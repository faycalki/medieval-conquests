from header_common import *
from header_operations import *
from header_parties import *
from header_items import *
from header_skills import *
from header_triggers import *
from header_troops import *

from module_constants import *

####################################################################################################################
#  Each trigger contains the following fields:
# 1) Check interval: How frequently this trigger will be checked
# 2) Delay interval: Time to wait before applying the consequences of the trigger
#    After its conditions have been evaluated as true.
# 3) Re-arm interval. How much time must pass after applying the consequences of the trigger for the trigger to become active again.
#    You can put the constant ti_once here to make sure that the trigger never becomes active again after it fires once.
# 4) Conditions block (list). This must be a valid operation block. See header_operations.py for reference.
#    Every time the trigger is checked, the conditions block will be executed.
#    If the conditions block returns true, the consequences block will be executed.
#    If the conditions block is empty, it is assumed that it always evaluates to true.
# 5) Consequences block (list). This must be a valid operation block. See header_operations.py for reference. 
####################################################################################################################

# Some constants for use below
merchant_inventory_space = 30
num_merchandise_goods = 36



triggers = [
	(0.1, 0.0, ti_once,
		[
			(map_free, 0)
		],

		[
			(dialog_box, "str_tutorial_map1")
		]),
		


	(0.0, 0.0, 168.0,
		[
		

		
		],

		[
			(call_script, "script_refresh_center_inventories")
		]),

	(0.0, 0.0, 168.0,
		[],

		[
			(call_script, "script_refresh_center_armories")
		]),

	(0.0, 0.0, 168.0,
		[],

		[
			(call_script, "script_refresh_center_weaponsmiths")
		]),

	(0.0, 0.0, 168.0,
		[],

		[
			(call_script, "script_refresh_center_stables")
		]),

#	(5.7, 0.0, 0.0,
#		[],
#
#		[]),

	(1.0, 0.0, 0.0,
		[
			(check_quest_active, "qst_track_down_bandits"),
			(neg|check_quest_failed, "qst_track_down_bandits"),
			(neg|check_quest_succeeded, "qst_track_down_bandits")
		],

		[
			(quest_get_slot, ":track_down_bandits_target_party", "qst_track_down_bandits", slot_quest_target_party),
			(try_begin),
				(party_is_active, ":track_down_bandits_target_party"),
				(store_faction_of_party, ":faction_of_party_track_down_bandits_target_party", ":track_down_bandits_target_party"),
				(neg|is_between, ":faction_of_party_track_down_bandits_target_party", "fac_player_supporters_faction", "fac_kingdoms_end"),
				(assign, ":value", 8),
				(try_begin),
					(is_currently_night),
					(assign, ":value", 5),
				(try_end),
				(try_for_parties, ":var_4"),
					(gt, ":var_4", "p_spawn_points_end"),
					(store_faction_of_party, ":faction_of_party_var_4", ":var_4"),
					(is_between, ":faction_of_party_var_4", "fac_player_supporters_faction", "fac_kingdoms_end"),
					(store_distance_to_party_from_party, ":distance_to_party_from_party_var_4_track_down_bandits_target_party", ":var_4", ":track_down_bandits_target_party"),
					(lt, ":distance_to_party_from_party_var_4_track_down_bandits_target_party", ":value"),
					(try_begin),
						(eq, "$cheat_mode", 1),
						(str_store_party_name, 4, ":var_4"),
						(display_message, "@{!}DEBUG -- Wanted bandits spotted by {s4}"),
					(try_end),
					(call_script, "script_get_closest_center", ":track_down_bandits_target_party"),
					(assign, ":var_7", reg0),
					(call_script, "script_add_log_entry", 70, ":var_4", ":var_7", ":track_down_bandits_target_party", -1),
				(try_end),
			(else_try),
				(display_message, "str_bandits_eliminated_by_another"),
				(call_script, "script_abort_quest", "qst_track_down_bandits", 0),
			(try_end)
		]),

	(2.0, 0.0, 0.0,
		[
			(store_random_party_of_template, reg2, "pt_prisoner_train_party"),
			(party_is_in_any_town, reg2)
		],

		[
			(store_faction_of_party, ":faction_of_party_reg2", reg2),
			(call_script, "script_cf_select_random_walled_center_with_faction", ":faction_of_party_reg2", -1),
			(party_set_ai_behavior, reg2, 1),
			(party_set_ai_object, reg2, reg0),
			(party_set_flags, reg2, 65536, 0)
		]),

	(4.0, 0.0, 0.0,
		[
			(eq, "$caravan_escort_state", 1),
			(assign, ":value", 0),
			(try_begin),
				(neg|party_is_active, "$caravan_escort_party_id"),
				(assign, ":value", 1),
			(else_try),
				(get_party_ai_object, ":party_ai_object_caravan_escort_party_id", "$caravan_escort_party_id"),
				(neq, ":party_ai_object_caravan_escort_party_id", "$caravan_escort_destination_town"),
				(assign, ":value", 1),
			(try_end),
			(eq, ":value", 1)
		],

		[
			(assign, "$caravan_escort_state", 0)
		]),

#	(1.5, 0.0, 0.0,
#		[],
#
#		[]),

	(1.0, 0.0, 0.0,
		[],

		[
			(try_for_range, ":script_param_2", "fac_player_supporters_faction", "fac_kingdom_43"), #Patch for new factions and civil factions/rebellions, setting this to any higher can cause CTD.
				(faction_slot_eq, ":script_param_2", slot_faction_state, 0),
				(try_begin),
					(store_random_in_range, ":random_in_range_0_100", 0, 100),
					(lt, ":random_in_range_0_100", 10),
					(call_script, "script_create_kingdom_party_if_below_limit", ":script_param_2", 7),
				(try_end),
				(try_begin),
					(store_random_in_range, ":random_in_range_0_100", 0, 100),
					(lt, ":random_in_range_0_100", 10),
					(call_script, "script_create_kingdom_party_if_below_limit", ":script_param_2", 11),
				(try_end),
				(try_begin),
					(store_random_in_range, ":random_in_range_0_100", 0, 100),
					(lt, ":random_in_range_0_100", 10),
					(call_script, "script_create_kingdom_party_if_below_limit", ":script_param_2", 12),
				(try_end),
			(try_end)
		]),

	(0.2, 0.0, 0.0,
		[
			(check_quest_active, "qst_incriminate_loyal_commander"),
			(neg|check_quest_concluded, "qst_incriminate_loyal_commander"),
			(quest_slot_eq, "qst_incriminate_loyal_commander", slot_quest_current_state, 2),
			(quest_get_slot, ":incriminate_loyal_commander_target_center", "qst_incriminate_loyal_commander", slot_quest_target_center),
			(quest_get_slot, ":incriminate_loyal_commander_target_party", "qst_incriminate_loyal_commander", slot_quest_target_party),
			(try_begin),
				(neg|party_is_active, ":incriminate_loyal_commander_target_party"),
				(quest_set_slot, "qst_incriminate_loyal_commander", slot_quest_current_state, 3),
				(call_script, "script_fail_quest", "qst_incriminate_loyal_commander"),
			(else_try),
				(party_is_in_town, ":incriminate_loyal_commander_target_party", ":incriminate_loyal_commander_target_center"),
				(remove_party, ":incriminate_loyal_commander_target_party"),
				(quest_set_slot, "qst_incriminate_loyal_commander", slot_quest_current_state, 3),
				(quest_get_slot, ":incriminate_loyal_commander_object_troop", "qst_incriminate_loyal_commander", slot_quest_object_troop),
				(assign, ":var_4", 0),
				(try_for_range, ":script_param_2", "fac_player_supporters_faction", "fac_kingdoms_end"),
					(faction_slot_eq, ":script_param_2", slot_faction_state, 0),
					(neq, ":script_param_2", "fac_player_supporters_faction"),
					(neg|quest_slot_eq, "qst_incriminate_loyal_commander", slot_quest_target_faction, ":script_param_2"),
					(val_add, ":var_4", 1),
				(try_end),
				(try_begin),
					(gt, ":var_4", 0),
					(store_random_in_range, ":random_in_range_0_var_4", 0, ":var_4"),
					(assign, ":value", -1),
					(try_for_range, ":script_param_2", "fac_player_supporters_faction", "fac_kingdoms_end"),
						(eq, ":value", -1),
						(faction_slot_eq, ":script_param_2", slot_faction_state, 0),
						(neq, ":script_param_2", "fac_player_supporters_faction"),
						(neg|quest_slot_eq, "qst_incriminate_loyal_commander", slot_quest_target_faction, ":script_param_2"),
						(val_sub, ":random_in_range_0_var_4", 1),
						(lt, ":random_in_range_0_var_4", 0),
						(assign, ":value", ":script_param_2"),
					(try_end),
				(try_end),
				(try_begin),
					(gt, ":value", 0),
					(call_script, "script_change_troop_faction", ":incriminate_loyal_commander_object_troop", ":value"),
				(else_try),
					(call_script, "script_change_troop_faction", ":incriminate_loyal_commander_object_troop", "fac_robber_knights"),
				(try_end),
				(call_script, "script_succeed_quest", "qst_incriminate_loyal_commander"),
			(try_end)
		],

		[]),

	(0.2, 0.0, 0.0,
		[
			(check_quest_active, "qst_bring_back_runaway_serfs"),
			(neg|check_quest_concluded, "qst_bring_back_runaway_serfs"),
			(quest_get_slot, ":bring_back_runaway_serfs_object_center", "qst_bring_back_runaway_serfs", slot_quest_object_center),
			(quest_get_slot, ":bring_back_runaway_serfs_target_center", "qst_bring_back_runaway_serfs", slot_quest_target_center),
			(try_begin),
				(party_is_active, "$qst_bring_back_runaway_serfs_party_1"),
				(try_begin),
					(party_is_in_town, "$qst_bring_back_runaway_serfs_party_1", ":bring_back_runaway_serfs_target_center"),
					(remove_party, "$qst_bring_back_runaway_serfs_party_1"),
					(val_add, "$qst_bring_back_runaway_serfs_num_parties_fleed", 1),
				(else_try),
					(party_is_in_town, "$qst_bring_back_runaway_serfs_party_1", ":bring_back_runaway_serfs_object_center"),
					(remove_party, "$qst_bring_back_runaway_serfs_party_1"),
					(val_add, "$qst_bring_back_runaway_serfs_num_parties_returned", 1),
				(else_try),
					(store_distance_to_party_from_party, ":distance_to_party_from_party_main_party_qst_bring_back_runaway_serfs_party_1", "p_main_party", "$qst_bring_back_runaway_serfs_party_1"),
					(gt, ":distance_to_party_from_party_main_party_qst_bring_back_runaway_serfs_party_1", 3),
					(party_set_ai_object, "$qst_bring_back_runaway_serfs_party_1", ":bring_back_runaway_serfs_target_center"),
				(try_end),
			(try_end),
			(try_begin),
				(party_is_active, "$qst_bring_back_runaway_serfs_party_2"),
				(try_begin),
					(party_is_in_town, "$qst_bring_back_runaway_serfs_party_2", ":bring_back_runaway_serfs_target_center"),
					(remove_party, "$qst_bring_back_runaway_serfs_party_2"),
					(val_add, "$qst_bring_back_runaway_serfs_num_parties_fleed", 1),
				(else_try),
					(party_is_in_town, "$qst_bring_back_runaway_serfs_party_2", ":bring_back_runaway_serfs_object_center"),
					(remove_party, "$qst_bring_back_runaway_serfs_party_2"),
					(val_add, "$qst_bring_back_runaway_serfs_num_parties_returned", 1),
				(else_try),
					(store_distance_to_party_from_party, ":distance_to_party_from_party_main_party_qst_bring_back_runaway_serfs_party_1", "p_main_party", "$qst_bring_back_runaway_serfs_party_2"),
					(gt, ":distance_to_party_from_party_main_party_qst_bring_back_runaway_serfs_party_1", 3),
					(party_set_ai_object, "$qst_bring_back_runaway_serfs_party_2", ":bring_back_runaway_serfs_target_center"),
				(try_end),
			(try_end),
			(try_begin),
				(party_is_active, "$qst_bring_back_runaway_serfs_party_3"),
				(try_begin),
					(party_is_in_town, "$qst_bring_back_runaway_serfs_party_3", ":bring_back_runaway_serfs_target_center"),
					(remove_party, "$qst_bring_back_runaway_serfs_party_3"),
					(val_add, "$qst_bring_back_runaway_serfs_num_parties_fleed", 1),
				(else_try),
					(party_is_in_town, "$qst_bring_back_runaway_serfs_party_3", ":bring_back_runaway_serfs_object_center"),
					(remove_party, "$qst_bring_back_runaway_serfs_party_3"),
					(val_add, "$qst_bring_back_runaway_serfs_num_parties_returned", 1),
				(else_try),
					(store_distance_to_party_from_party, ":distance_to_party_from_party_main_party_qst_bring_back_runaway_serfs_party_1", "p_main_party", "$qst_bring_back_runaway_serfs_party_3"),
					(gt, ":distance_to_party_from_party_main_party_qst_bring_back_runaway_serfs_party_1", 3),
					(party_set_ai_object, "$qst_bring_back_runaway_serfs_party_3", ":bring_back_runaway_serfs_target_center"),
				(try_end),
			(try_end),
			(assign, ":var_4", "$qst_bring_back_runaway_serfs_num_parties_returned"),
			(val_add, ":var_4", "$qst_bring_back_runaway_serfs_num_parties_fleed"),
			(ge, ":var_4", 3),
			(try_begin),
				(ge, "$qst_bring_back_runaway_serfs_num_parties_returned", 3),
				(call_script, "script_succeed_quest", "qst_bring_back_runaway_serfs"),
			(else_try),
				(eq, "$qst_bring_back_runaway_serfs_num_parties_returned", 0),
				(call_script, "script_fail_quest", "qst_bring_back_runaway_serfs"),
			(else_try),
				(call_script, "script_conclude_quest", "qst_bring_back_runaway_serfs"),
			(try_end)
		],

		[]),

	(0.5, 0.0, 0.0,
		[
			(check_quest_active, "qst_follow_spy"),
			(eq, "$qst_follow_spy_no_active_parties", 0),
			(quest_get_slot, ":follow_spy_giver_center", "qst_follow_spy", slot_quest_giver_center),
			(quest_get_slot, ":follow_spy_object_center", "qst_follow_spy", slot_quest_object_center),
			(assign, ":value", 0),
			(try_begin),
				(this_or_next|ge, "$qst_follow_spy_run_away", 2),
				(this_or_next|neg|party_is_active, "$qst_follow_spy_spy_party"),
				(neg|party_is_active, "$qst_follow_spy_spy_partners_party"),
			(else_try),
				(eq, "$qst_follow_spy_meeting_state", 0),
				(store_distance_to_party_from_party, ":distance_to_party_from_party_main_party_qst_follow_spy_spy_party", "p_main_party", "$qst_follow_spy_spy_party"),
				(try_begin),
					(assign, ":value_2", 3),
					(try_begin),
						(is_currently_night),
						(assign, ":value_2", 1),
					(try_end),
					(le, ":distance_to_party_from_party_main_party_qst_follow_spy_spy_party", ":value_2"),
					(store_distance_to_party_from_party, ":distance_to_party_from_party_main_party_follow_spy_giver_center", "p_main_party", ":follow_spy_giver_center"),
					(gt, ":distance_to_party_from_party_main_party_follow_spy_giver_center", 1),
					(val_add, "$qst_follow_spy_run_away", 1),
					(try_begin),
						(eq, "$qst_follow_spy_run_away", 2),
						(assign, ":value", 1),
						(display_message, "str_qst_follow_spy_noticed_you"),
					(try_end),
				(else_try),
					(store_distance_to_party_from_party, ":distance_to_party_from_party_main_party_qst_follow_spy_spy_party", "$qst_follow_spy_spy_partners_party", "$qst_follow_spy_spy_party"),
					(le, ":distance_to_party_from_party_main_party_qst_follow_spy_spy_party", 1),
					(party_attach_to_party, "$qst_follow_spy_spy_party", "$qst_follow_spy_spy_partners_party"),
					(assign, "$qst_follow_spy_meeting_state", 1),
					(assign, "$qst_follow_spy_meeting_counter", 0),
				(try_end),
			(else_try),
				(eq, "$qst_follow_spy_meeting_state", 1),
				(store_distance_to_party_from_party, ":distance_to_party_from_party_main_party_qst_follow_spy_spy_party", "p_main_party", "$qst_follow_spy_spy_partners_party"),
				(try_begin),
					(le, ":distance_to_party_from_party_main_party_qst_follow_spy_spy_party", 1),
					(party_detach, "$qst_follow_spy_spy_party"),
					(val_add, "$qst_follow_spy_run_away", 1),
					(try_begin),
						(eq, "$qst_follow_spy_run_away", 2),
						(assign, ":value", 1),
						(display_message, "str_qst_follow_spy_noticed_you"),
					(try_end),
				(else_try),
					(val_add, "$qst_follow_spy_meeting_counter", 1),
					(gt, "$qst_follow_spy_meeting_counter", 4),
					(party_detach, "$qst_follow_spy_spy_party"),
					(assign, ":value", 1),
					(assign, "$qst_follow_spy_meeting_state", 2),
				(try_end),
			(try_end),
			(try_begin),
				(eq, ":value", 1),
				(party_set_ai_object, "$qst_follow_spy_spy_party", ":follow_spy_giver_center"),
				(party_set_ai_object, "$qst_follow_spy_spy_partners_party", ":follow_spy_object_center"),
				(party_set_ai_behavior, "$qst_follow_spy_spy_party", 1),
				(party_set_ai_behavior, "$qst_follow_spy_spy_partners_party", 1),
				(party_set_flags, "$qst_follow_spy_spy_party", 65536, 0),
				(party_set_flags, "$qst_follow_spy_spy_partners_party", 65536, 0),
			(try_end),
			(assign, ":var_7", 0),
			(try_begin),
				(party_is_active, "$qst_follow_spy_spy_party"),
				(val_add, ":var_7", 1),
				(party_is_in_town, "$qst_follow_spy_spy_party", ":follow_spy_giver_center"),
				(remove_party, "$qst_follow_spy_spy_party"),
				(assign, "$qst_follow_spy_spy_back_in_town", 1),
				(val_sub, ":var_7", 1),
			(try_end),
			(try_begin),
				(party_is_active, "$qst_follow_spy_spy_partners_party"),
				(val_add, ":var_7", 1),
				(party_is_in_town, "$qst_follow_spy_spy_partners_party", ":follow_spy_object_center"),
				(remove_party, "$qst_follow_spy_spy_partners_party"),
				(assign, "$qst_follow_spy_partner_back_in_town", 1),
				(val_sub, ":var_7", 1),
			(try_end),
			(try_begin),
				(eq, "$qst_follow_spy_partner_back_in_town", 1),
				(eq, "$qst_follow_spy_spy_back_in_town", 1),
				(call_script, "script_fail_quest", "qst_follow_spy"),
			(try_end),
			(try_begin),
				(eq, ":var_7", 0),
				(assign, "$qst_follow_spy_no_active_parties", 1),
				(party_count_prisoners_of_type, ":var_8", "p_main_party", "trp_spy"),
				(party_count_prisoners_of_type, ":var_18", "p_main_party", "trp_spy_partner"),
				(gt, ":var_8", 0),
				(gt, ":var_18", 0),
				(call_script, "script_succeed_quest", "qst_follow_spy"),
			(try_end)
		],

		[]),

	(168.0, 0.0, 0.0,
		[],

		[
			(val_mul, "$debt_to_merchants_guild", 101),
			(val_div, "$debt_to_merchants_guild", 100)
		]),

	(0.1, 0.0, 0.1,
		[
			(check_quest_active, "qst_escort_merchant_caravan"),
			(eq, "$escort_merchant_caravan_mode", 1)
		],

		[
			(quest_get_slot, ":escort_merchant_caravan_target_party", "qst_escort_merchant_caravan", slot_quest_target_party),
			(try_begin),
				(party_is_active, ":escort_merchant_caravan_target_party"),
				(party_set_ai_behavior, ":escort_merchant_caravan_target_party", 0),
				(party_set_flags, ":escort_merchant_caravan_target_party", 65536, 0),
			(try_end)
		]),

	(0.1, 0.0, 0.1,
		[
			(check_quest_active, "qst_escort_merchant_caravan"),
			(eq, "$escort_merchant_caravan_mode", 0)
		],

		[
			(quest_get_slot, ":escort_merchant_caravan_target_party", "qst_escort_merchant_caravan", slot_quest_target_party),
			(try_begin),
				(party_is_active, ":escort_merchant_caravan_target_party"),
				(party_set_ai_behavior, ":escort_merchant_caravan_target_party", 10),
				(party_set_flags, ":escort_merchant_caravan_target_party", 65536, 0),
				(party_set_ai_object, ":escort_merchant_caravan_target_party", "p_main_party"),
			(try_end)
		]),

	(0.1, 0.0, 0.0,
		[
			(check_quest_active, "qst_escort_merchant_caravan"),
			(quest_get_slot, ":escort_merchant_caravan_target_party", "qst_escort_merchant_caravan", slot_quest_target_party),
			(neg|party_is_active, ":escort_merchant_caravan_target_party")
		],

		[
			(call_script, "script_abort_quest", "qst_escort_merchant_caravan", 2)
		]),

	(0.3, 0.0, 1.1,
		[
			(check_quest_active, "qst_troublesome_bandits"),
			(neg|check_quest_failed, "qst_troublesome_bandits"),
			(store_num_parties_destroyed, ":num_parties_destroyed_troublesome_bandits", "pt_troublesome_bandits"),
			(lt, "$qst_troublesome_bandits_eliminated", ":num_parties_destroyed_troublesome_bandits"),
			(store_num_parties_destroyed_by_player, ":num_parties_destroyed_by_player_troublesome_bandits", "pt_troublesome_bandits"),
			(eq, ":num_parties_destroyed_by_player_troublesome_bandits", "$qst_troublesome_bandits_eliminated_by_player")
		],

		[
			(display_message, "str_bandits_eliminated_by_another"),
			(call_script, "script_abort_quest", "qst_troublesome_bandits", 2)
		]),

	(0.3, 0.0, 1.1,
		[
			(check_quest_active, "qst_troublesome_bandits"),
			(neg|check_quest_succeeded, "qst_troublesome_bandits"),
			(store_num_parties_destroyed, ":num_parties_destroyed_troublesome_bandits", "pt_troublesome_bandits"),
			(lt, "$qst_troublesome_bandits_eliminated", ":num_parties_destroyed_troublesome_bandits"),
			(store_num_parties_destroyed_by_player, ":num_parties_destroyed_by_player_troublesome_bandits", "pt_troublesome_bandits"),
			(neq, ":num_parties_destroyed_by_player_troublesome_bandits", "$qst_troublesome_bandits_eliminated_by_player")
		],

		[
			(call_script, "script_succeed_quest", "qst_troublesome_bandits")
		]),

	(1.0, 0.0, 0.0,
		[
			(check_quest_active, "qst_kidnapped_girl"),
			(quest_get_slot, ":kidnapped_girl_target_party", "qst_kidnapped_girl", slot_quest_target_party),
			(party_is_active, ":kidnapped_girl_target_party"),
			(party_is_in_any_town, ":kidnapped_girl_target_party"),
			(remove_party, ":kidnapped_girl_target_party")
		],

		[]),

	(0.0, 0.0, 336.0,
		[
			(try_for_range, ":troop", "trp_kingdom_1_pretender", "trp_knight_1_1"),
				(troop_set_slot, ":troop", slot_troop_cur_center, 0),
				(neq, ":troop", "$supported_pretender"),
				(troop_get_slot, ":troop_original_faction", ":troop", slot_troop_original_faction),
				(faction_slot_eq, ":troop_original_faction", slot_faction_state, 0),
				(faction_slot_eq, ":troop_original_faction", slot_faction_has_rebellion_chance, 1),
				(neg|troop_slot_eq, ":troop", slot_troop_occupation, 2),
				(try_for_range, ":unused", 0, 30),
					(troop_slot_eq, ":troop", slot_troop_cur_center, 0),
					(store_random_in_range, ":random_in_range_town_1_1_castle_1_1", "p_town_1_1", "p_castle_1_1"),
					(store_faction_of_party, ":faction_of_party_random_in_range_town_1_1_castle_1_1", ":random_in_range_town_1_1_castle_1_1"),
					(store_relation, ":relation_faction_of_party_random_in_range_town_1_1_castle_1_1_troop_original_faction", ":faction_of_party_random_in_range_town_1_1_castle_1_1", ":troop_original_faction"),
					(le, ":relation_faction_of_party_random_in_range_town_1_1_castle_1_1_troop_original_faction", 0),
					(troop_set_slot, ":troop", slot_troop_cur_center, ":random_in_range_town_1_1_castle_1_1"),
					(try_begin),
						(eq, "$cheat_mode", 1),
						(str_store_troop_name, 4, ":troop"),
						(str_store_party_name, 5, ":random_in_range_town_1_1_castle_1_1"),
						(display_message, "@{!}{s4} is in {s5}"),
					(try_end),
				(try_end),
			(try_end)
		],

		[]),

	(360.0, 0.0, 0.0,
		[
			(call_script, "script_update_companion_candidates_in_taverns")
		],

		[]),

	(0.0, 0.0, 24.0,
		[
		(call_script, "script_sa_mod_replacement_materials"), #New
		],

		[
			(assign, ":var_1", 0),
			(assign, ":var_2", 100),
			(try_for_range, ":troop", "trp_npc1", "trp_kingdom_1_lord"),
				(main_party_has_troop, ":troop"),
				(val_add, ":var_1", 1),
			(try_end),
			(val_sub, ":var_2", ":var_1"),
			(store_skill_level, ":skill_level_persuasion_player", "skl_persuasion", "trp_player"),
			(val_add, ":var_2", ":skill_level_persuasion_player"),
			(assign, reg7, ":var_2"),
			(try_begin),
				(gt, "$personality_clash_after_24_hrs", 0),
				(eq, "$disable_npc_complaints", 0),
				(try_begin),
					(troop_get_slot, ":personality_clash_after_24_hrs_personalityclash_object", "$personality_clash_after_24_hrs", slot_troop_personalityclash_object),
					(main_party_has_troop, "$personality_clash_after_24_hrs"),
					(main_party_has_troop, ":personality_clash_after_24_hrs_personalityclash_object"),
					(assign, "$npc_with_personality_clash", "$personality_clash_after_24_hrs"),
				(try_end),
				(assign, "$personality_clash_after_24_hrs", 0),
			(try_end),
			(try_for_range, ":troop_2", "trp_npc1", "trp_kingdom_1_lord"),
				(troop_set_slot, ":troop_2", slot_troop_turned_down_twice, 0),
				(try_begin),
					(troop_slot_eq, ":troop_2", slot_troop_met, 1),
					(troop_set_slot, ":troop_2", slot_troop_met_previously, 1),
				(try_end),
				(troop_get_slot, ":troop_2_occupation", ":troop_2", slot_troop_occupation),
				(try_begin),
					(eq, ":troop_2_occupation", 11),
					(troop_get_slot, ":troop_2_return_renown", ":troop_2", slot_troop_return_renown),
					(str_store_troop_name, 31, ":troop_2"),
					(troop_get_slot, ":player_renown", "trp_player", slot_troop_renown),
					(assign, reg4, ":player_renown"),
					(assign, reg5, ":troop_2_return_renown"),
					(gt, ":player_renown", ":troop_2_return_renown"),
					(troop_set_slot, ":troop_2", slot_troop_personalityclash_penalties, 0),
					(troop_set_slot, ":troop_2", slot_troop_morality_penalties, 0),
					(troop_set_slot, ":troop_2", slot_troop_occupation, 0),
				(try_end),
				(try_begin),
					(troop_slot_ge, ":troop_2", 151, 5),
					(troop_slot_eq, ":troop_2", slot_troop_mission_object, 1),
					(troop_get_slot, ":personality_clash_after_24_hrs_personalityclash_object", ":troop_2", slot_troop_kingsupport_opponent),
					(troop_slot_eq, ":personality_clash_after_24_hrs_personalityclash_object", slot_troop_kingsupport_objection_state, 0),
					(troop_set_slot, ":personality_clash_after_24_hrs_personalityclash_object", slot_troop_kingsupport_objection_state, 1),
					(str_store_troop_name, 3, ":troop_2"),
					(str_store_troop_name, 4, ":personality_clash_after_24_hrs_personalityclash_object"),
					(try_begin),
						(eq, "$cheat_mode", 1),
						(display_message, "str_s4_ready_to_voice_objection_to_s3s_mission_if_in_party"),
					(try_end),
				(try_end),
				(try_begin),
					(main_party_has_troop, ":troop_2"),
					(eq, "$disable_npc_complaints", 0),
					(call_script, "script_npc_morale", ":troop_2"),
					(assign, ":var_10", reg0),
					(try_begin),
						(lt, ":var_10", 20),
						(store_random_in_range, ":random_in_range_0_100", 0, 100),
						(val_add, ":var_10", ":random_in_range_0_100"),
						(lt, ":var_10", 20),
						(assign, "$npc_is_quitting", ":troop_2"),
					(try_end),
					(troop_get_slot, ":troop_2_personalityclash_penalties", ":troop_2", slot_troop_personalityclash_penalties),
					(val_mul, ":troop_2_personalityclash_penalties", 90),
					(val_div, ":troop_2_personalityclash_penalties", ":var_2"),
					(troop_set_slot, ":troop_2", slot_troop_personalityclash_penalties, ":troop_2_personalityclash_penalties"),
					(troop_get_slot, ":troop_2_personalityclash_penalties", ":troop_2", slot_troop_morality_penalties),
					(val_mul, ":troop_2_personalityclash_penalties", 90),
					(val_div, ":troop_2_personalityclash_penalties", ":var_2"),
					(troop_set_slot, ":troop_2", slot_troop_morality_penalties, ":troop_2_personalityclash_penalties"),
					(try_begin),
						(this_or_next|troop_slot_ge, ":troop_2", 72, 1),
						(eq, "$disable_npc_complaints", 1),
						(troop_get_slot, ":troop_2_personalityclash_object", ":troop_2", slot_troop_personalityclash_object),
						(main_party_has_troop, ":troop_2_personalityclash_object"),
						(call_script, "script_reduce_companion_morale_for_clash", ":troop_2", ":troop_2_personalityclash_object", 72),
					(try_end),
					(try_begin),
						(this_or_next|troop_slot_ge, ":troop_2", 74, 1),
						(eq, "$disable_npc_complaints", 1),
						(troop_get_slot, ":troop_2_personalityclash_object", ":troop_2", slot_troop_personalityclash2_object),
						(main_party_has_troop, ":troop_2_personalityclash_object"),
						(call_script, "script_reduce_companion_morale_for_clash", ":troop_2", ":troop_2_personalityclash_object", 74),
					(try_end),
					(try_begin),
						(this_or_next|troop_slot_ge, ":troop_2", 76, 1),
						(eq, "$disable_npc_complaints", 1),
						(troop_get_slot, ":troop_2_personalityclash_object", ":troop_2", slot_troop_personalitymatch_object),
						(main_party_has_troop, ":troop_2_personalityclash_object"),
						(troop_get_slot, ":troop_2_personalityclash_penalties", ":troop_2", slot_troop_personalityclash_penalties),
						(val_mul, ":troop_2_personalityclash_penalties", 9),
						(val_div, ":troop_2_personalityclash_penalties", 10),
						(troop_set_slot, ":troop_2", slot_troop_personalityclash_penalties, ":troop_2_personalityclash_penalties"),
					(try_end),
					(try_begin),
						(eq, "$disable_npc_complaints", 0),
						(eq, "$npc_with_personality_clash", 0),
						(eq, "$npc_with_personality_clash_2", 0),
						(eq, "$personality_clash_after_24_hrs", 0),
						(troop_slot_eq, ":troop_2", slot_troop_personalityclash_state, 0),
						(troop_get_slot, ":personality_clash_after_24_hrs_personalityclash_object", ":troop_2", slot_troop_personalityclash_object),
						(main_party_has_troop, ":personality_clash_after_24_hrs_personalityclash_object"),
						(assign, "$personality_clash_after_24_hrs", ":troop_2"),
					(try_end),
					(try_begin),
						(eq, "$npc_with_political_grievance", 0),
						(troop_slot_eq, ":troop_2", slot_troop_kingsupport_objection_state, 1),
						(assign, "$npc_with_political_grievance", ":troop_2"),
					(try_end),
				(else_try),
					(neg|main_party_has_troop, ":troop_2"),
					(eq, ":troop_2_occupation", 5),
					(troop_get_slot, ":troop_2_current_mission", ":troop_2", slot_troop_current_mission),
					(try_begin),
						(eq, "$cheat_mode", 1),
						(str_store_troop_name, 10, ":troop_2"),
						(assign, reg0, ":troop_2_current_mission"),
						(display_message, "@Checking rejoin of {s10} days on mission: {reg0}"),
					(try_end),
					(try_begin),
						(gt, ":troop_2_current_mission", 0),
						(val_sub, ":troop_2_current_mission", 1),
						(troop_set_slot, ":troop_2", slot_troop_current_mission, ":troop_2_current_mission"),
					(else_try),
						(troop_slot_eq, ":troop_2", slot_troop_mission_object, 11),
						(troop_slot_ge, ":troop_2", 162, 1),
						(troop_set_slot, "trp_merc_euro_spearman", slot_troop_recent_offense_time, ":troop_2"),
						(assign, "$npc_to_rejoin_party", "trp_merc_euro_spearman"),
					(else_try),
						(troop_slot_ge, ":troop_2", 152, 1),
						(this_or_next|neg|troop_slot_eq, ":troop_2", slot_troop_mission_object, 8),
						(hero_can_join, ":troop_2"),
						(assign, "$npc_to_rejoin_party", ":troop_2"),
					(try_end),
				(try_end),
			(try_end)
		]),

	(0.5, 0.0, 0.5, #0.5, 0.0, 0.0, World-map optimizaiton effort v1
		[
			(eq, "$tom_use_longships", 1)
		],

		[
		#(display_message, "@Use longships!", 0x00ff0000)
			(try_for_parties, ":var_1"),
				(neg|is_between, "p_town_1_1", "p_salt_mine"),
				(party_get_template_id, ":template_id_var_1", ":var_1"),
				(neq, ":template_id_var_1", "pt_manor"),
				(gt, ":template_id_var_1", 0),
				(party_get_icon, ":icon_var_1", ":var_1"),
				(try_begin),
					(call_script, "script_cf_is_party_on_water", ":var_1"),
					(neg|is_between, ":icon_var_1", "icon_longship", "icon_bandit_marker"),
					(try_begin),
						(party_slot_eq, ":var_1", 600, 0),
						(party_set_slot, ":var_1", 600, ":icon_var_1"),
					(try_end),
					(store_faction_of_party, ":faction_of_party_var_1", ":var_1"),
					#####Kaos Begin add factions assign icon in here for factions
					(try_begin),
					(this_or_next|eq, ":faction_of_party_var_1", "fac_kingdom_47"),
						(eq, ":faction_of_party_var_1", "fac_kingdom_5"),
						(party_set_icon, ":var_1", "icon_longship_poland"),
					(else_try),
						(this_or_next|eq, ":faction_of_party_var_1", "fac_kingdom_1"),
						(eq, ":faction_of_party_var_1", "fac_kingdom_43"),
						(party_set_icon, ":var_1", "icon_longship_teu"),
					(else_try),
					(this_or_next|eq, ":faction_of_party_var_1", "fac_kingdom_44"),
						(eq, ":faction_of_party_var_1", "fac_kingdom_2"),
						(party_set_icon, ":var_1", "icon_longship_lithuania"),
					(else_try),
					(this_or_next|eq, ":faction_of_party_var_1", "fac_kingdom_45"),
						(eq, ":faction_of_party_var_1", "fac_kingdom_3"),
						(party_set_icon, ":var_1", "icon_longship_mongol"),
					(else_try),
					(this_or_next|eq, ":faction_of_party_var_1", "fac_kingdom_46"),
						(eq, ":faction_of_party_var_1", "fac_kingdom_4"),
						(party_set_icon, ":var_1", "icon_longship_denmark"),
					(else_try),
					(this_or_next|eq, ":faction_of_party_var_1", "fac_kingdom_48"),
						(eq, ":faction_of_party_var_1", "fac_kingdom_6"),
						(party_set_icon, ":var_1", "icon_longship_hre"),
					(else_try),
					(this_or_next|eq, ":faction_of_party_var_1", "fac_kingdom_49"),
						(eq, ":faction_of_party_var_1", "fac_kingdom_7"),
						(party_set_icon, ":var_1", "icon_longship_hungary"),
					(else_try),
					(this_or_next|eq, ":faction_of_party_var_1", "fac_kingdom_50"),
						(eq, ":faction_of_party_var_1", "fac_kingdom_8"),
						(party_set_icon, ":var_1", "icon_longship_novgorod"),
					(else_try),
					(this_or_next|eq, ":faction_of_party_var_1", "fac_kingdom_51"),
						(eq, ":faction_of_party_var_1", "fac_kingdom_9"),
						(party_set_icon, ":var_1", "icon_longship_england"),
					(else_try),
					(this_or_next|eq, ":faction_of_party_var_1", "fac_kingdom_52"),
						(eq, ":faction_of_party_var_1", "fac_kingdom_10"),
						(party_set_icon, ":var_1", "icon_longship_france"),
					(else_try),
					(this_or_next|eq, ":faction_of_party_var_1", "fac_kingdom_53"),
						(eq, ":faction_of_party_var_1", "fac_kingdom_11"),
						(party_set_icon, ":var_1", "icon_longship_norway"),
					(else_try),
					(this_or_next|eq, ":faction_of_party_var_1", "fac_kingdom_54"),
						(eq, ":faction_of_party_var_1", "fac_kingdom_12"),
						(party_set_icon, ":var_1", "icon_longship_scotland"),
					(else_try),
					(this_or_next|eq, ":faction_of_party_var_1", "fac_kingdom_55"),
						(eq, ":faction_of_party_var_1", "fac_kingdom_13"),
						(party_set_icon, ":var_1", "icon_longship_ireland"),
					(else_try),
					(this_or_next|eq, ":faction_of_party_var_1", "fac_kingdom_56"),
						(eq, ":faction_of_party_var_1", "fac_kingdom_14"),
						(party_set_icon, ":var_1", "icon_longship_sweden"),
					(else_try),
					(this_or_next|eq, ":faction_of_party_var_1", "fac_kingdom_57"),
						(eq, ":faction_of_party_var_1", "fac_kingdom_15"),
						(party_set_icon, ":var_1", "icon_longship_galicia"),
					(else_try),
					(this_or_next|eq, ":faction_of_party_var_1", "fac_kingdom_58"),
						(eq, ":faction_of_party_var_1", "fac_kingdom_16"),
						(party_set_icon, ":var_1", "icon_longship_portugal"),
					(else_try),
					(this_or_next|eq, ":faction_of_party_var_1", "fac_kingdom_59"),
						(eq, ":faction_of_party_var_1", "fac_kingdom_17"),
						(party_set_icon, ":var_1", "icon_longship_aragon"),
					(else_try),
					(this_or_next|eq, ":faction_of_party_var_1", "fac_kingdom_60"),
						(eq, ":faction_of_party_var_1", "fac_kingdom_18"),
						(party_set_icon, ":var_1", "icon_longship_castile"),
					(else_try),
					(this_or_next|eq, ":faction_of_party_var_1", "fac_kingdom_61"),
						(eq, ":faction_of_party_var_1", "fac_kingdom_19"),
						(party_set_icon, ":var_1", "icon_longship_navarra"),
					(else_try),
					(this_or_next|eq, ":faction_of_party_var_1", "fac_kingdom_62"),
						(eq, ":faction_of_party_var_1", "fac_kingdom_20"),
						(party_set_icon, ":var_1", "icon_longship_granada"),
					(else_try),
					(this_or_next|eq, ":faction_of_party_var_1", "fac_kingdom_63"),
						(eq, ":faction_of_party_var_1", "fac_papacy"),
						(party_set_icon, ":var_1", "icon_longship_papal"),
					(else_try),
					(this_or_next|eq, ":faction_of_party_var_1", "fac_kingdom_64"),
						(eq, ":faction_of_party_var_1", "fac_kingdom_22"),
						(party_set_icon, ":var_1", "icon_longship_byzantine"),
					(else_try),
					(this_or_next|eq, ":faction_of_party_var_1", "fac_kingdom_65"),
						(eq, ":faction_of_party_var_1", "fac_kingdom_23"),
						(party_set_icon, ":var_1", "icon_longship_jerusalem"),
					(else_try),
					(this_or_next|eq, ":faction_of_party_var_1", "fac_kingdom_66"),
						(eq, ":faction_of_party_var_1", "fac_kingdom_24"),
						(party_set_icon, ":var_1", "icon_longship_sicily"),
					(else_try),
					(this_or_next|eq, ":faction_of_party_var_1", "fac_kingdom_67"),
						(eq, ":faction_of_party_var_1", "fac_kingdom_25"),
						(party_set_icon, ":var_1", "icon_longship_mamluke"),
					(else_try),
					(this_or_next|eq, ":faction_of_party_var_1", "fac_kingdom_68"),
						(eq, ":faction_of_party_var_1", "fac_kingdom_26"),
						(party_set_icon, ":var_1", "icon_longship_latin"),
					(else_try),
					(this_or_next|eq, ":faction_of_party_var_1", "fac_kingdom_69"),
						(eq, ":faction_of_party_var_1", "fac_kingdom_27"),
						(party_set_icon, ":var_1", "icon_longship_ilkhanate"),
					(else_try),
					(this_or_next|eq, ":faction_of_party_var_1", "fac_kingdom_70"),
						(eq, ":faction_of_party_var_1", "fac_kingdom_28"),
						(party_set_icon, ":var_1", "icon_longship_hafsid"),
					(else_try),
					(this_or_next|eq, ":faction_of_party_var_1", "fac_kingdom_71"),
						(eq, ":faction_of_party_var_1", "fac_kingdom_29"),
						(party_set_icon, ":var_1", "icon_longship_serbia"),
					(else_try),
					(this_or_next|eq, ":faction_of_party_var_1", "fac_kingdom_72"),
						(eq, ":faction_of_party_var_1", "fac_kingdom_30"),
						(party_set_icon, ":var_1", "icon_longship_bulgaria"),
					(else_try),
					(this_or_next|eq, ":faction_of_party_var_1", "fac_kingdom_73"),
						(eq, ":faction_of_party_var_1", "fac_kingdom_31"),
						(party_set_icon, ":var_1", "icon_longship_marinid"),
					(else_try),
						(eq, ":faction_of_party_var_1", "fac_outlaws"),
						(party_set_icon, ":var_1", "icon_longship_pirate"),
					(else_try),
						(party_set_icon, ":var_1", "icon_longship"),
						#####Kaos end add factions
					(try_end),
				(else_try),
					(eq, reg0, 0),
					(is_between, ":icon_var_1", "icon_longship", "icon_bandit_marker"),
					(neg|party_slot_eq, ":var_1", 600, 0),
					(party_get_slot, ":icon_var_1", ":var_1", 600),
					(party_set_icon, ":var_1", ":icon_var_1"),
				(try_end),
			(try_end)
		]),

	(24.0, 0.0, 288.0,
		[],

		[
			(assign, ":value", 0),
			(try_for_range, ":party", "p_town_1_1", "p_village_1_1"),
				(party_get_slot, ":party_town_lord", ":party", slot_town_lord),
				(eq, ":party_town_lord", "trp_player"),
				(assign, ":value", 1),
			(try_end),
			(eq, ":value", 1),
			(try_begin),
				(eq, "$cheat_mode", 1),
				(assign, reg0, "$g_player_chamberlain"),
				(display_message, "@{!}DEBUG : chamberlain: {reg0}"),
			(try_end),
			(assign, ":value_2", 0),
			(try_begin),
				(eq, "$g_player_chamberlain", 0),
				(assign, ":value_2", 1),
			(else_try),
				(neq, "$g_player_chamberlain", -1),
				(neq, "$g_player_chamberlain", "trp_dplmc_chamberlain"),
				(assign, ":value_2", 1),
			(try_end),
			(try_begin),
				(eq, ":value_2", 1),
				(call_script, "script_add_notification_menu", "mnu_dplmc_notification_appoint_chamberlain", 0, 0),
			(try_end)
		]),

	(24.0, 0.0, 312.0,
		[],

		[
			(assign, ":value", 0),
			(try_for_range, ":party", "p_town_1_1", "p_village_1_1"),
				(party_get_slot, ":party_town_lord", ":party", slot_town_lord),
				(eq, ":party_town_lord", "trp_player"),
				(assign, ":value", 1),
			(try_end),
			(eq, ":value", 1),
			(try_begin),
				(eq, "$cheat_mode", 1),
				(assign, reg0, "$g_player_constable"),
				(display_message, "@{!}DEBUG : constable: {reg0}"),
			(try_end),
			(assign, ":value_2", 0),
			(try_begin),
				(eq, "$g_player_constable", 0),
				(assign, ":value_2", 1),
			(else_try),
				(neq, "$g_player_constable", -1),
				(neq, "$g_player_constable", "trp_dplmc_constable"),
				(assign, ":value_2", 1),
			(try_end),
			(try_begin),
				(eq, ":value_2", 1),
				(call_script, "script_add_notification_menu", "mnu_dplmc_notification_appoint_constable", 0, 0),
			(try_end)
		]),

	(24.0, 0.0, 336.0,
		[],

		[
			(assign, ":value", 0),
			(try_for_range, ":party", "p_town_1_1", "p_castle_1_1"),
				(party_get_slot, ":party_town_lord", ":party", slot_town_lord),
				(eq, ":party_town_lord", "trp_player"),
				(assign, ":value", 1),
			(try_end),
			(eq, ":value", 1),
			(try_begin),
				(eq, "$cheat_mode", 1),
				(assign, reg0, "$g_player_chancellor"),
				(display_message, "@{!}DEBUG : chancellor: {reg0}"),
			(try_end),
			(assign, ":value_2", 0),
			(try_begin),
				(eq, "$g_player_chancellor", 0),
				(assign, ":value_2", 1),
			(else_try),
				(neq, "$g_player_chancellor", -1),
				(neq, "$g_player_chancellor", "trp_dplmc_chancellor"),
				(assign, ":value_2", 1),
			(try_end),
			(try_begin),
				(eq, ":value_2", 1),
				(call_script, "script_add_notification_menu", "mnu_dplmc_notification_appoint_chancellor", 0, 0),
			(try_end)
		]),

	(0.0, 0.0, 0.0,
		[
			(eq, "$freelancer_state", 1),
			(gt, "$enlisted_party", 0),
			(neg|party_is_active, "$enlisted_party")
		],

		[
			(assign, "$freelancer_state", 0),
			(call_script, "script_freelancer_detach_party"),
			(call_script, "script_party_restore"),
			(party_get_num_companion_stacks, ":num_companion_stacks_main_party", "p_main_party"),
			(try_for_range_backwards, ":var_2", 0, ":num_companion_stacks_main_party"),
				(party_stack_get_troop_id, ":party_stack_troop_id_main_party_var_2", "p_main_party", ":var_2"),
				(neg|troop_is_hero, ":party_stack_troop_id_main_party_var_2"),
				(party_stack_get_size, ":party_stack_size_main_party_var_2", "p_main_party", ":var_2"),
				(party_remove_members, "p_main_party", ":party_stack_troop_id_main_party_var_2", ":party_stack_size_main_party_var_2"),
			(try_end),
			(store_faction_of_troop, ":faction_of_troop_enlisted_lord", "$enlisted_lord"),
			(try_for_range, ":script_param_2", "fac_player_supporters_faction", "fac_kingdoms_end"),
				(neq, ":faction_of_troop_enlisted_lord", ":script_param_2"),
				(faction_slot_eq, ":script_param_2", slot_faction_state, 0),
				(call_script, "script_set_player_relation_with_faction", ":script_param_2", 0),
			(try_end),
			(assign, "$g_encountered_party", "$g_enemy_party"),
			(jump_to_menu, "mnu_captivity_start_wilderness")
		]),

	(0.0, 0.0, 0.0,
		[
			(eq, "$freelancer_state", 1),
			(try_begin),
				(party_slot_ge, "p_freelancer_party_backup", 68, 1),
				(map_free),
				(party_set_slot, "p_freelancer_party_backup", slot_party_last_in_combat, 0),
				(party_get_num_attached_parties, ":num_attached_parties_main_party", "p_main_party"),
				(try_for_range_backwards, ":var_2", 0, ":num_attached_parties_main_party"),
					(party_get_attached_party_with_rank, ":attached_party_with_rank_main_party_var_2", "p_main_party", ":var_2"),
					(party_detach, ":attached_party_with_rank_main_party_var_2"),
				(try_end),
			(try_end),
			(party_get_battle_opponent, ":battle_opponent_l_enlisted_party", "$enlisted_party"),
			(gt, ":battle_opponent_l_enlisted_party", 0),
			(store_troop_health, ":troop_health_player", "trp_player"),
			(ge, ":troop_health_player", 50)
		],

		[
			(jump_to_menu, "mnu_world_map_soldier")
		]),

	(1.0, 0.0, 0.0,
		[
			(eq, "$freelancer_state", 0),
			(gt, "$enlisted_party", 0),
			(neg|party_is_active, "$enlisted_party"),
			(store_faction_of_troop, ":faction_of_troop_enlisted_lord", "$enlisted_lord"),
			(store_relation, ":relation_player_supporters_faction_faction_of_troop_enlisted_lord", "fac_player_supporters_faction", ":faction_of_troop_enlisted_lord"),
			(lt, ":relation_player_supporters_faction_faction_of_troop_enlisted_lord", 0),
			(party_get_attached_party_with_rank, ":attached_party_with_rank_main_party_0", "p_main_party", 0),
			(eq, "p_temp_party_2", ":attached_party_with_rank_main_party_0")
		],

		[
			(assign, "$enlisted_party", -1),
			(party_detach, "p_temp_party_2"),
			(store_skill_level, ":skill_level_leadership_player", "skl_leadership", "trp_player"),
			(store_skill_level, ":skill_level_persuasion_player", "skl_persuasion", "trp_player"),
			(store_add, ":value", ":skill_level_persuasion_player", ":skill_level_leadership_player"),
			(val_add, ":value", 10),
			(store_random_in_range, ":random_in_range_0_value", 0, ":value"),
			(try_begin),
				(is_between, ":random_in_range_0_value", 0, 5),
				(call_script, "script_party_calculate_strength", "p_main_party", 0),
				(assign, ":var_5", reg0),
				(call_script, "script_party_calculate_strength", "p_temp_party_2", 0),
				(assign, ":var_6", reg0),
				(ge, ":var_6", ":var_5"),
				(party_get_num_prisoner_stacks, ":num_prisoner_stacks_temp_party_2", "p_temp_party_2"),
				(try_for_range, ":localvariable", 0, ":num_prisoner_stacks_temp_party_2"),
					(party_prisoner_stack_get_troop_id, ":party_prisoner_stack_troop_id_temp_party_2_localvariable", "p_temp_party_2", ":localvariable"),
					(party_prisoner_stack_get_size, ":party_prisoner_stack_size_temp_party_2_localvariable", "p_temp_party_2", ":localvariable"),
					(party_remove_prisoners, "p_temp_party_2", ":party_prisoner_stack_troop_id_temp_party_2_localvariable", ":party_prisoner_stack_size_temp_party_2_localvariable"),
				(try_end),
				(dialog_box, "@The released prisoners were not be trusted and they are preparing to attack you!", "@Warning!"),
				(start_encounter, "p_temp_party_2"),
				(change_screen_map),
			(else_try),
				(is_between, ":random_in_range_0_value", 5, 10),
				(dialog_box, "@The released prisoners scattered as soon as the battle finished. You will not be seeing them again.", "@Notice!"),
				(party_clear, "p_temp_party_2"),
			(else_try),
				(dialog_box, "@The released prisoners have remained loyal and will join your party", "@Notice!"),
				(party_get_num_companion_stacks, ":num_prisoner_stacks_temp_party_2", "p_temp_party_2"),
				(try_for_range, ":localvariable", 0, ":num_prisoner_stacks_temp_party_2"),
					(party_stack_get_troop_id, ":party_prisoner_stack_troop_id_temp_party_2_localvariable", "p_temp_party_2", ":localvariable"),
					(party_stack_get_size, ":party_prisoner_stack_size_temp_party_2_localvariable", "p_temp_party_2", ":localvariable"),
					(party_add_members, "p_main_party", ":party_prisoner_stack_troop_id_temp_party_2_localvariable", ":party_prisoner_stack_size_temp_party_2_localvariable"),
				(try_end),
				(party_clear, "p_temp_party_2"),
			(try_end)
		]),

	(0.0, 0.0, 0.0,
		[
			(eq, "$freelancer_state", 1),
			(key_clicked, 224),
			(set_fixed_point_multiplier, 1000),
			(mouse_get_position, 0),
			(position_get_y, ":position_y_0", 0),
			(gt, ":position_y_0", 50)
		],

		[
			(jump_to_menu, "mnu_world_map_soldier"),
			(rest_for_hours_interactive, 9999, 4, 0)
		]),

	(24.0, 0.0, 0.0,
		[
			(eq, "$freelancer_state", 2)
		],

		[
			(troop_get_slot, ":player_current_mission", "trp_player", slot_troop_current_mission),
			(try_begin),
				(gt, ":player_current_mission", 5),
				(val_sub, ":player_current_mission", 1),
				(troop_set_slot, "trp_player", slot_troop_current_mission, ":player_current_mission"),
			(else_try),
				(is_between, ":player_current_mission", 1, 5),
				(assign, reg0, ":player_current_mission"),
				(display_message, "@You have {reg0} days left till you are declared as a deserter!"),
				(val_sub, ":player_current_mission", 1),
				(troop_set_slot, "trp_player", slot_troop_current_mission, ":player_current_mission"),
			(else_try),
				(eq, ":player_current_mission", 0),
				(call_script, "script_event_player_deserts"),
				(display_message, "@You have now been declared as a deserter!"),
				(call_script, "script_desert_order"),
			(try_end)
		]),

	(1.0, 96.0, 0.0,
		[
			(eq, "$crusader_state", 0),
			(call_script, "script_diplomacy_start_war_between_kingdoms", "$crusader_faction", "$crusade_target_faction", 1),
			(try_for_range, ":script_param_2", "fac_player_supporters_faction", "fac_kingdoms_end"),
				(neq, ":script_param_2", "$crusader_faction"),
				(try_begin),
					(this_or_next|faction_slot_eq, ":script_param_2", 102, 0),
					(faction_slot_eq, ":script_param_2", 102, 1),
					(set_relation, ":script_param_2", "fac_crusade", 10),
				(else_try),
					(set_relation, ":script_param_2", "fac_crusade", -50),
				(try_end),
			(try_end),
			(try_for_range, ":party", "p_town_1_1", "p_village_1_1"),
				(store_faction_of_party, ":script_param_2", ":party"),
				(eq, "$crusader_faction", ":script_param_2"),
				(assign, "$crusade_start", ":party"),
				(store_num_parties_of_template, ":num_parties_of_template_crusaders", "pt_crusaders"),
				(lt, ":num_parties_of_template_crusaders", 1),
				(set_spawn_radius, 5),
				(spawn_around_party, "$crusade_start", "pt_crusaders"),
				(assign, ":var_4", reg0),
				(assign, "$crusader_party_id", reg0),
				(party_set_ai_behavior, ":var_4", 0),
				(str_store_party_name, 1, ":party"),
				(str_store_faction_name, 2, "$crusade_target_faction"),
				(try_begin),
				(eq, "$colored_messages", 1),
				(display_message, "@Crusaders are going to gather near {s1} to start a Crusade against the {s2}!", 0x00EEE8AA), #Begin color change
				(else_try),
				(display_message, "@Crusaders are going to gather near {s1} to start a Crusade against the {s2}!"),
				(try_end),
				(play_sound, "snd_crusade_called"),
				(assign, ":party", -1),
			(try_end)
		],

		[
			(try_begin),
				(try_for_range, ":party", "p_town_1_1", "p_village_1_1"),
					(store_faction_of_party, ":faction_of_party_party", ":party"),
					(eq, ":faction_of_party_party", "$crusade_target_faction"),
					(assign, "$crusade_target", ":party"),
				(try_end),
				(str_store_faction_name, 1, "$crusade_target_faction"),
								(try_begin),
				(eq, "$colored_messages", 1),
				(display_message, "@The Crusaders begin their march to the {s1}.", 0x00EEE8AA),
					(else_try),
					(display_message, "@The Crusaders begin their march to the {s1}."),
					(try_end),
				(assign, "$crusader_state", 1),
				(call_script, "script_party_set_ai_state", "$crusader_party_id", 1, "$crusade_target"),
			(try_end)
		]),

		
#		#Test
#		
#					(2.0, 0.0, 2.0,
#		[
#
#		],
#
#		[
#		(jump_to_menu, "mnu_event_19")
#		]),
		
		
		
#			(0.0, 0.0, 1.0,
#		[
#
#		],
#
#		[
#		(store_relation, ":destination", "fac_kingdom_20", "trp_player"),
##	Debug Mode Begin
#          (assign, reg10, ":destination"),
#          (str_clear, s10),
#          (str_store_string, s10, "@1st: {reg10}"),
#		  (display_message, s10),
##	Debug Mode End
#(store_relation, ":destinationn", "fac_kingdom_20", "fac_player_faction"),
##	Debug Mode Begin
#          (assign, reg11, ":destinationn"),
#          (str_clear, s11),
#          (str_store_string, s11, "@2nd: {reg11}"),
#		  (display_message, s11),
##	Debug Mode End
#(store_relation, ":destinationn2", "fac_kingdom_20", "fac_player_supporters_faction"),
##	Debug Mode Begin
#          (assign, reg12, ":destinationn2"),
#          (str_clear, s12),
#          (str_store_string, s12, "@3rd: {reg12}"),
#		  (display_message, s12),
##	Debug Mode End
#		]),
		#Test
		
		
		
	(1.0, 0.0, 0.0,
		[
			(eq, "$crusader_state", 0),
			(neq, "$crusader_party_id", -1)
		],

		[
			(try_begin),
				(eq, "$crusader_faction", "fac_player_supporters_faction"),
				(party_get_slot, ":crusade_start_center_original_faction", "$crusade_start", slot_center_original_faction),
				(faction_get_slot, ":crusade_start_center_original_faction_reinforcements_a", ":crusade_start_center_original_faction", slot_faction_reinforcements_a),
				(faction_get_slot, ":crusade_start_center_original_faction_reinforcements_b", ":crusade_start_center_original_faction", slot_faction_reinforcements_b),
				(faction_get_slot, ":crusade_start_center_original_faction_reinforcements_b_2", ":crusade_start_center_original_faction", slot_faction_reinforcements_b),
			(else_try),
				(faction_get_slot, ":crusade_start_center_original_faction_reinforcements_a", "$crusader_faction", slot_faction_reinforcements_a),
				(faction_get_slot, ":crusade_start_center_original_faction_reinforcements_b", "$crusader_faction", slot_faction_reinforcements_b),
				(faction_get_slot, ":crusade_start_center_original_faction_reinforcements_b_2", "$crusader_faction", slot_faction_reinforcements_b),
			(try_end),
			(store_random_in_range, ":random_in_range_0_4", 0, 4),
			(try_begin),
				(eq, ":random_in_range_0_4", 0),
				(party_add_template, "$crusader_party_id", ":crusade_start_center_original_faction_reinforcements_a"),
			(else_try),
				(eq, ":random_in_range_0_4", 1),
				(party_add_template, "$crusader_party_id", ":crusade_start_center_original_faction_reinforcements_b"),
			(else_try),
				(eq, ":random_in_range_0_4", 2),
				(party_add_template, "$crusader_party_id", ":crusade_start_center_original_faction_reinforcements_b_2"),
			(else_try),
				(store_random_in_range, ":random_in_range_0_4", 0, 3),
				(try_begin),
					(eq, ":random_in_range_0_4", 0),
					(party_add_template, "$crusader_party_id", "pt_teutonic_reinforcements_c"),
				(else_try),
					(eq, ":random_in_range_0_4", 1),
					(party_add_template, "$crusader_party_id", "pt_templar_reinforcements_c"),
				(else_try),
					(party_add_template, "$crusader_party_id", "pt_hospitaller_reinforcements_c"),
				(try_end),
			(try_end)
		]),

	(1.0, 0.0, 0.0,
		[
			(eq, "$crusader_state", 1)
		],

		[
			(try_begin),
				(store_num_parties_of_template, ":num_parties_of_template_crusaders", "pt_crusaders"),
				(lt, ":num_parties_of_template_crusaders", 1),
				(assign, "$crusader_faction", -5),
				(assign, "$crusader_party_id", -1),
				(assign, "$crusade_start", 0),
				(assign, "$crusade_target", 0),
				(assign, "$crusade_target_faction", 0),
				(assign, "$crusader_party_id", -1),
				(assign, "$crusader_state", -1),
				(try_begin),
				(eq, "$colored_messages", 1),
				(display_message, "@Crusaders have been defeated!", 0x00f7bf78), #Begin color change
				(else_try),
				(display_message, "@Crusaders have been defeated!"), #Begin color change
				(try_end),
				(play_sound, "snd_crusade_fail"),
			(else_try),
				(store_distance_to_party_from_party, ":distance_to_party_from_party_crusader_party_id_crusade_target", "$crusader_party_id", "$crusade_target"),
				(lt, ":distance_to_party_from_party_crusader_party_id_crusade_target", 3),
				(store_current_hours, ":current_hours"),
				(party_set_slot, "$crusade_target", slot_center_is_besieged_by, "$crusader_party_id"),
				(party_set_slot, "$crusade_target", slot_center_siege_begin_hours, ":current_hours"),
				(call_script, "script_update_faction_notes", "$crusade_target_faction"),
				(try_begin),
				(eq, "$colored_messages", 1),
				(display_message, "@Crusaders have reached their target!", 0x00EEE8AA), #Begin color change
				(else_try),
				(display_message, "@Crusaders have reached their target!"), #Begin color change
				(try_end),
				(play_sound, "snd_crusade_reached"),
				(assign, "$crusader_state", 2),
			(else_try),
				(ge, ":distance_to_party_from_party_crusader_party_id_crusade_target", 3),
				(call_script, "script_party_set_ai_state", "$crusader_party_id", 1, "$crusade_target"),
			(try_end)
		]),

	(1.0, 24.0, 0.0,
		[
			(eq, "$crusader_state", 2)
		],

		[
			(try_begin),
				(store_num_parties_of_template, ":num_parties_of_template_crusaders", "pt_crusaders"),
				(lt, ":num_parties_of_template_crusaders", 1),
				(assign, "$crusader_faction", -5),
				(assign, "$crusader_party_id", -1),
				(assign, "$crusade_start", 0),
				(assign, "$crusade_target", 0),
				(assign, "$crusade_target_faction", 0),
				(assign, "$crusader_state", -1),
				(try_begin),
				(eq, "$colored_messages", 1),
				(display_message, "@Crusaders have been defeated!", 0x00f7bf78), #Begin color change
				(else_try),
				(display_message, "@Crusaders have been defeated!"), #Begin color change
				(try_end),
				(play_sound, "snd_crusade_fail"),
			(else_try),
				(store_distance_to_party_from_party, ":distance_to_party_from_party_crusader_party_id_crusade_target", "$crusader_party_id", "$crusade_target"),
				(lt, ":distance_to_party_from_party_crusader_party_id_crusade_target", 5),
				(call_script, "script_party_set_ai_state", "$crusader_party_id", 1, "$crusade_target"),
				(party_set_ai_behavior, "$crusader_party_id", 4),
				(party_set_ai_object, "$crusader_party_id", "$crusade_target"),
				(party_set_flags, "$crusader_party_id", 65536, 1),
				(party_set_slot, "$crusader_party_id", slot_party_ai_substate, 1),
				(try_begin),
				(eq, "$colored_messages", 1),
				(display_message, "@Crusaders have besieged their target!", 0x00EEE8AA), #Begin color change
				(else_try),
				(display_message, "@Crusaders have besieged their target!"), #Begin color change
				(try_end),
				(play_sound, "snd_crusade_reached"),
				(assign, "$crusader_state", 3),
			(else_try),
				(assign, "$crusader_state", 1),
				(party_set_slot, "$crusade_target", slot_center_is_besieged_by, "$crusader_party_id"),
				(party_get_slot, ":crusade_target_center_is_besieged_by", "$crusade_target", slot_center_is_besieged_by),
				(eq, ":crusade_target_center_is_besieged_by", "$crusader_party_id"),
				(party_set_slot, "$crusade_target", slot_center_is_besieged_by, -1),
			(try_end)
		]),

	(1.0, 0.0, 0.0,
		[
			(eq, "$crusader_state", 3)
		],

		[
			(try_begin),
				(store_num_parties_of_template, ":num_parties_of_template_crusaders", "pt_crusaders"),
				(lt, ":num_parties_of_template_crusaders", 1),
				(assign, "$crusader_faction", -5),
				(assign, "$crusader_party_id", -1),
				(assign, "$crusade_start", 0),
				(assign, "$crusade_target", 0),
				(assign, "$crusade_target_faction", 0),
				(assign, "$crusader_party_id", -1),
				(assign, "$crusader_state", -1),
				(try_begin),
				(eq, "$colored_messages", 1),
				(display_message, "@Crusaders have been defeated!", 0x00f7bf78), #Begin color change
				(else_try),
				(display_message, "@Crusaders have been defeated!"), #Begin color change
				(try_end),
				(play_sound, "snd_crusade_fail"),
			(else_try),
				(assign, ":value", 0),
				(try_for_range, ":party", "p_town_1_1", "p_village_1_1"),
					(store_faction_of_party, ":faction_of_party_party", ":party"),
					(eq, ":faction_of_party_party", "fac_crusade"),
					(try_begin),
						(eq, ":party", "p_town_21_1"),
						(call_script, "script_give_center_to_faction_aux", "p_town_21_1", "fac_papacy"),
						(faction_set_slot, "fac_papacy", slot_faction_state, 0),
						(faction_set_slot, "fac_papacy", slot_faction_leader, "trp_pope"),
						(call_script, "script_give_center_to_lord", "p_town_21_1", "trp_pope", 1),
						(party_set_slot, "p_town_21_1", 255, 0),
						(assign, ":value", 1),
					(else_try),
						(eq, ":party", "p_town_25_5"),
						(call_script, "script_give_center_to_faction_aux", "p_town_25_5", "fac_kingdom_23"),
						(faction_set_slot, "fac_kingdom_23", slot_faction_state, 0),
						(faction_set_slot, "fac_kingdom_23", slot_faction_leader, "trp_kingdom_23_lord"),
						(call_script, "script_give_center_to_lord", "p_town_25_5", "trp_kingdom_23_lord", 1),
						(party_set_slot, "p_town_25_5", 255, 0),
						(assign, ":value", 1),
					(else_try),
						(call_script, "script_give_center_to_faction_aux", ":party", "$crusader_faction"),
						(try_begin),
							(eq, "$players_kingdom", "$crusader_faction"),
							(call_script, "script_give_center_to_lord", ":party", "trp_player", 1),
						(else_try),
							(call_script, "script_cf_get_random_lord_except_king_with_faction", "$crusader_faction"),
							(gt, reg0, -1),
							(call_script, "script_give_center_to_lord", ":party", reg0, 1),
						(try_end),
						(assign, ":value", 1),
					(try_end),
				(try_end),
				(eq, ":value", 1),
				(party_leave_cur_battle, "$crusader_party_id"),
				(remove_party, "$crusader_party_id"),
				(assign, "$crusader_faction", -5),
				(assign, "$crusader_party_id", -1),
				(assign, "$crusade_start", 0),
				(assign, "$crusade_target", 0),
				(assign, "$crusade_target_faction", 0),
				(assign, "$crusader_party_id", -1),
				(assign, "$crusader_state", -1),
				(display_message, "@Crusade ended succesfully!", 0x00f7ea78),
				(play_sound, "snd_crusade_success"),
			(else_try),
				(neq, "$crusader_party_id", -1),
				(store_faction_of_party, ":faction_of_party_party", "$crusade_target"),
				(neq, ":faction_of_party_party", "$crusade_target_faction"),
				(try_begin),
				(eq, "$colored_messages", 1),
				(display_message, "@Crusaders disperce, because someone else conquered the center", 0x00EEE8AA),
				(else_try),
				(display_message, "@Crusaders disperce, because someone else conquered the center"),
				(try_end),
				(play_sound, "snd_crusade_fail"),
				(party_leave_cur_battle, "$crusader_party_id"),
				(remove_party, "$crusader_party_id"),
				(assign, "$crusader_faction", -5),
				(assign, "$crusader_party_id", -1),
				(assign, "$crusade_start", 0),
				(assign, "$crusade_target", 0),
				(assign, "$crusade_target_faction", 0),
				(assign, "$crusader_party_id", -1),
				(assign, "$crusader_state", -1),
			(else_try),
				(call_script, "script_party_set_ai_state", "$crusader_party_id", 1, "$crusade_target"),
			(try_end)
		]),

	(24.0, 0.0, 0.0,
		[
			(eq, "$crusader_state", -1),
			(store_random_in_range, reg0, 0, 100),
			(eq, reg0, 0)
		],

		[
			(try_for_range, ":number", 0, 40),
				(troop_set_slot, "trp_temp_lord", ":number", -1),
			(try_end),
			(assign, reg0, 0),
			(try_for_range, ":number", "fac_player_supporters_faction", "fac_kingdoms_end"),
				(neq, ":number", "fac_player_supporters_faction"),
				(faction_slot_eq, ":number", slot_faction_state, 0),
				(faction_slot_eq, ":number", 102, 0),
				(troop_set_slot, "trp_temp_lord", reg0, ":number"),
				(val_add, reg0, 1),
			(try_end),
			(gt, reg0, 0),
			(store_random_in_range, ":random_in_range_0_reg0", 0, reg0),
			(troop_get_slot, ":number", "trp_temp_lord", ":random_in_range_0_reg0"),
			(assign, "$crusader_state", 0),
			(assign, "$crusader_faction", ":number"),
			(try_for_range, ":number", 0, 40),
				(troop_set_slot, "trp_temp_lord", ":number", -1),
			(try_end),
			(assign, reg0, 0),
			(try_for_range, ":number", "fac_player_supporters_faction", "fac_kingdoms_end"),
				(faction_slot_eq, ":number", slot_faction_state, 0),
				(neg|faction_slot_eq, ":number", 102, 0),
				(neg|faction_slot_eq, ":number", 102, 1),
				(troop_set_slot, "trp_temp_lord", reg0, ":number"),
				(val_add, reg0, 1),
			(try_end),
			(gt, reg0, 0),
			(store_random_in_range, ":random_in_range_0_reg0", 0, reg0),
			(troop_get_slot, ":number", "trp_temp_lord", ":random_in_range_0_reg0"),
			(assign, "$crusade_target_faction", ":number")
		]),

	(1.0, 0.0, 0.0,
		[
			(eq, 0, 1),
			(eq, "$g_camp_mode", 1),
			(is_currently_night)
		],

		[]),
		
		
#		#Title upgrades begin
#			(0.0, 0.0, 1.0,
#		[
#
#		],
#
#		[
#		
#				#Extension
#		#New Extension
#		(try_begin),
#		(eq, "$kaos_kings_kingdom", 1),
#		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_1"),
#		(else_try),
#		(eq, "$kaos_kings_kingdom", 2),
#		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_2"),
#				(else_try),
#		(eq, "$kaos_kings_kingdom", 3),
#		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_3"),
#				(else_try),
#		(eq, "$kaos_kings_kingdom", 4),
#		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_4"),
#				(else_try),
#		(eq, "$kaos_kings_kingdom", 5),
#		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_5"),
#				(else_try),
#		(eq, "$kaos_kings_kingdom", 6),
#		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_6"),
#				(else_try),
#		(eq, "$kaos_kings_kingdom", 7),
#		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_7"),
#				(else_try),
#		(eq, "$kaos_kings_kingdom", 8),
#		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_8"),
#				(else_try),
#		(eq, "$kaos_kings_kingdom", 9),
#		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_9"),
#				(else_try),
#		(eq, "$kaos_kings_kingdom", 10),
#		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_10"),
#				(else_try),
#		(eq, "$kaos_kings_kingdom", 11),
#		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_11"),
#				(else_try),
#		(eq, "$kaos_kings_kingdom", 12),
#		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_12"),
#				(else_try),
#		(eq, "$kaos_kings_kingdom", 13),
#		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_13"),
#				(else_try),
#		(eq, "$kaos_kings_kingdom", 14),
#		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_14"),
#				(else_try),
#		(eq, "$kaos_kings_kingdom", 15),
#		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_15"),
#				(else_try),
#		(eq, "$kaos_kings_kingdom", 16),
#		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_16"),
#				(else_try),
#		(eq, "$kaos_kings_kingdom", 17),
#		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_17"),
#				(else_try),
#		(eq, "$kaos_kings_kingdom", 18),
#		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_18"),
#				(else_try),
#		(eq, "$kaos_kings_kingdom", 19),
#		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_19"),
#				(else_try),
#		(eq, "$kaos_kings_kingdom", 20),
#		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_20"),
#				(else_try),
#		(eq, "$kaos_kings_kingdom", 21),
#		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_papacy"),
#				(else_try),
#		(eq, "$kaos_kings_kingdom", 22),
#		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_22"),
#				(else_try),
#		(eq, "$kaos_kings_kingdom", 23),
#		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_23"),
#				(else_try),
#		(eq, "$kaos_kings_kingdom", 24),
#		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_24"),
#				(else_try),
#		(eq, "$kaos_kings_kingdom", 25),
#		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_25"),
#				(else_try),
#		(eq, "$kaos_kings_kingdom", 26),
#		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_26"),
#				(else_try),
#		(eq, "$kaos_kings_kingdom", 27),
#		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_27"),
#				(else_try),
#		(eq, "$kaos_kings_kingdom", 28),
#		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_28"),
#				(else_try),
#		(eq, "$kaos_kings_kingdom", 29),
#		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_29"),
#				(else_try),
#		(eq, "$kaos_kings_kingdom", 30),
#		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_30"),
#				(else_try),
#		(eq, "$kaos_kings_kingdom", 31),
#		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_31"),
#				(else_try),
#		(eq, "$kaos_kings_kingdom", 32),
#		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_32"),
#				(else_try),
#		(eq, "$kaos_kings_kingdom", 33),
#		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_33"),
#				(else_try),
#		(eq, "$kaos_kings_kingdom", 34),
#		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_34"),
#				(else_try),
#		(eq, "$kaos_kings_kingdom", 35),
#		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_35"),
#				(else_try),
#		(eq, "$kaos_kings_kingdom", 36),
#		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_36"),
#				(else_try),
#		(eq, "$kaos_kings_kingdom", 37),
#		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_37"),
#				(else_try),
#		(eq, "$kaos_kings_kingdom", 38),
#		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_38"),
#				(else_try),
#		(eq, "$kaos_kings_kingdom", 39),
#		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_39"),
#				(else_try),
#		(eq, "$kaos_kings_kingdom", 40),
#		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_40"),
#				(else_try),
#		(eq, "$kaos_kings_kingdom", 41),
#		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_41"),
#				(else_try),
#		(eq, "$kaos_kings_kingdom", 42),
#		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_42"),
#		(else_try),
#	 (faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_player_supporters_faction"),
#	 (try_end),
#	 #Edit faction titles
#      (faction_set_slot, "fac_kingdom_1", slot_kaoses_faction_title_type, "fac_kingdom_1"),
#      (faction_set_slot, "fac_kingdom_2", slot_kaoses_faction_title_type, "fac_kingdom_2"),
#      (faction_set_slot, "fac_kingdom_3", slot_kaoses_faction_title_type, "fac_kingdom_3"),
#      (faction_set_slot, "fac_kingdom_4", slot_kaoses_faction_title_type, "fac_kingdom_4"),
#      (faction_set_slot, "fac_kingdom_5", slot_kaoses_faction_title_type, "fac_kingdom_5"),
#      (faction_set_slot, "fac_kingdom_6", slot_kaoses_faction_title_type, "fac_kingdom_6"),
#	        (faction_set_slot, "fac_kingdom_7", slot_kaoses_faction_title_type, "fac_kingdom_7"),
#      (faction_set_slot, "fac_kingdom_8", slot_kaoses_faction_title_type, "fac_kingdom_8"),
#      (faction_set_slot, "fac_kingdom_9", slot_kaoses_faction_title_type, "fac_kingdom_9"),
#      (faction_set_slot, "fac_kingdom_10", slot_kaoses_faction_title_type, "fac_kingdom_10"),
#      (faction_set_slot, "fac_kingdom_11", slot_kaoses_faction_title_type, "fac_kingdom_11"),
#      (faction_set_slot, "fac_kingdom_12", slot_kaoses_faction_title_type, "fac_kingdom_12"),
#	        (faction_set_slot, "fac_kingdom_13", slot_kaoses_faction_title_type, "fac_kingdom_13"),
#      (faction_set_slot, "fac_kingdom_14", slot_kaoses_faction_title_type, "fac_kingdom_14"),
#      (faction_set_slot, "fac_kingdom_15", slot_kaoses_faction_title_type, "fac_kingdom_15"),
#      (faction_set_slot, "fac_kingdom_16", slot_kaoses_faction_title_type, "fac_kingdom_16"),
#      (faction_set_slot, "fac_kingdom_17", slot_kaoses_faction_title_type, "fac_kingdom_17"),
#      (faction_set_slot, "fac_kingdom_18", slot_kaoses_faction_title_type, "fac_kingdom_18"),
#	        (faction_set_slot, "fac_kingdom_19", slot_kaoses_faction_title_type, "fac_kingdom_19"),
#      (faction_set_slot, "fac_kingdom_20", slot_kaoses_faction_title_type, "fac_kingdom_20"),
#      (faction_set_slot, "fac_papacy", slot_kaoses_faction_title_type, "fac_papacy"),
#      (faction_set_slot, "fac_kingdom_22", slot_kaoses_faction_title_type, "fac_kingdom_22"),
#      (faction_set_slot, "fac_kingdom_23", slot_kaoses_faction_title_type, "fac_kingdom_23"),
#      (faction_set_slot, "fac_kingdom_24", slot_kaoses_faction_title_type, "fac_kingdom_24"),
#	        (faction_set_slot, "fac_kingdom_25", slot_kaoses_faction_title_type, "fac_kingdom_25"),
#      (faction_set_slot, "fac_kingdom_26", slot_kaoses_faction_title_type, "fac_kingdom_26"),
#      (faction_set_slot, "fac_kingdom_27", slot_kaoses_faction_title_type, "fac_kingdom_27"),
#      (faction_set_slot, "fac_kingdom_28", slot_kaoses_faction_title_type, "fac_kingdom_28"),
#      (faction_set_slot, "fac_kingdom_29", slot_kaoses_faction_title_type, "fac_kingdom_29"),
#	        (faction_set_slot, "fac_kingdom_30", slot_kaoses_faction_title_type, "fac_kingdom_30"),
#      (faction_set_slot, "fac_kingdom_31", slot_kaoses_faction_title_type, "fac_kingdom_31"),
#      (faction_set_slot, "fac_kingdom_32", slot_kaoses_faction_title_type, "fac_kingdom_32"),
#      (faction_set_slot, "fac_kingdom_33", slot_kaoses_faction_title_type, "fac_kingdom_33"),
#      (faction_set_slot, "fac_kingdom_34", slot_kaoses_faction_title_type, "fac_kingdom_34"),
#      (faction_set_slot, "fac_kingdom_35", slot_kaoses_faction_title_type, "fac_kingdom_35"),
#	        (faction_set_slot, "fac_kingdom_36", slot_kaoses_faction_title_type, "fac_kingdom_36"),
#      (faction_set_slot, "fac_kingdom_37", slot_kaoses_faction_title_type, "fac_kingdom_37"),
#      (faction_set_slot, "fac_kingdom_38", slot_kaoses_faction_title_type, "fac_kingdom_38"),
#      (faction_set_slot, "fac_kingdom_39", slot_kaoses_faction_title_type, "fac_kingdom_39"),
#      (faction_set_slot, "fac_kingdom_40", slot_kaoses_faction_title_type, "fac_kingdom_40"),
#      (faction_set_slot, "fac_kingdom_41", slot_kaoses_faction_title_type, "fac_kingdom_41"),
#	        (faction_set_slot, "fac_kingdom_42", slot_kaoses_faction_title_type, "fac_kingdom_42"),
#
#			
#	  #####checkpoint 1 rebel factions begin
#      (faction_set_slot, "fac_kingdom_43", slot_kaoses_faction_title_type, "fac_kingdom_1"),
#      (faction_set_slot, "fac_kingdom_44", slot_kaoses_faction_title_type, "fac_kingdom_2"),
#      (faction_set_slot, "fac_kingdom_45", slot_kaoses_faction_title_type, "fac_kingdom_3"),
#      (faction_set_slot, "fac_kingdom_46", slot_kaoses_faction_title_type, "fac_kingdom_4"),
#      (faction_set_slot, "fac_kingdom_47", slot_kaoses_faction_title_type, "fac_kingdom_5"),
#      (faction_set_slot, "fac_kingdom_48", slot_kaoses_faction_title_type, "fac_kingdom_6"),
#	  (faction_set_slot, "fac_kingdom_49", slot_kaoses_faction_title_type, "fac_kingdom_7"),
#      (faction_set_slot, "fac_kingdom_50", slot_kaoses_faction_title_type, "fac_kingdom_8"),
#      (faction_set_slot, "fac_kingdom_51", slot_kaoses_faction_title_type, "fac_kingdom_9"),
#      (faction_set_slot, "fac_kingdom_52", slot_kaoses_faction_title_type, "fac_kingdom_10"),
#      (faction_set_slot, "fac_kingdom_53", slot_kaoses_faction_title_type, "fac_kingdom_11"),
#      (faction_set_slot, "fac_kingdom_54", slot_kaoses_faction_title_type, "fac_kingdom_12"),
#	  (faction_set_slot, "fac_kingdom_55", slot_kaoses_faction_title_type, "fac_kingdom_13"),
#      (faction_set_slot, "fac_kingdom_56", slot_kaoses_faction_title_type, "fac_kingdom_14"),
#      (faction_set_slot, "fac_kingdom_57", slot_kaoses_faction_title_type, "fac_kingdom_15"),
#      (faction_set_slot, "fac_kingdom_58", slot_kaoses_faction_title_type, "fac_kingdom_16"),
#      (faction_set_slot, "fac_kingdom_59", slot_kaoses_faction_title_type, "fac_kingdom_17"),
#      (faction_set_slot, "fac_kingdom_60", slot_kaoses_faction_title_type, "fac_kingdom_18"),
#	  (faction_set_slot, "fac_kingdom_61", slot_kaoses_faction_title_type, "fac_kingdom_19"),
#      (faction_set_slot, "fac_kingdom_62", slot_kaoses_faction_title_type, "fac_kingdom_20"),
#      (faction_set_slot, "fac_kingdom_63", slot_kaoses_faction_title_type, "fac_papacy"),
#      (faction_set_slot, "fac_kingdom_64", slot_kaoses_faction_title_type, "fac_kingdom_22"),
#      (faction_set_slot, "fac_kingdom_65", slot_kaoses_faction_title_type, "fac_kingdom_23"),
#      (faction_set_slot, "fac_kingdom_66", slot_kaoses_faction_title_type, "fac_kingdom_24"),
#	  (faction_set_slot, "fac_kingdom_67", slot_kaoses_faction_title_type, "fac_kingdom_25"),
#      (faction_set_slot, "fac_kingdom_68", slot_kaoses_faction_title_type, "fac_kingdom_26"),
#      (faction_set_slot, "fac_kingdom_69", slot_kaoses_faction_title_type, "fac_kingdom_27"),
#      (faction_set_slot, "fac_kingdom_70", slot_kaoses_faction_title_type, "fac_kingdom_28"),
#      (faction_set_slot, "fac_kingdom_71", slot_kaoses_faction_title_type, "fac_kingdom_29"),
#      (faction_set_slot, "fac_kingdom_72", slot_kaoses_faction_title_type, "fac_kingdom_30"),
#      (faction_set_slot, "fac_kingdom_73", slot_kaoses_faction_title_type, "fac_kingdom_31"),
#      (faction_set_slot, "fac_kingdom_74", slot_kaoses_faction_title_type, "fac_kingdom_32"),
#      (faction_set_slot, "fac_kingdom_75", slot_kaoses_faction_title_type, "fac_kingdom_33"),
#      (faction_set_slot, "fac_kingdom_76", slot_kaoses_faction_title_type, "fac_kingdom_34"),
#      (faction_set_slot, "fac_kingdom_77", slot_kaoses_faction_title_type, "fac_kingdom_35"),
#      (faction_set_slot, "fac_kingdom_78", slot_kaoses_faction_title_type, "fac_kingdom_36"),
#	  (faction_set_slot, "fac_kingdom_79", slot_kaoses_faction_title_type, "fac_kingdom_37"),
#      (faction_set_slot, "fac_kingdom_80", slot_kaoses_faction_title_type, "fac_kingdom_38"),
#      (faction_set_slot, "fac_kingdom_81", slot_kaoses_faction_title_type, "fac_kingdom_39"),
#      (faction_set_slot, "fac_kingdom_82", slot_kaoses_faction_title_type, "fac_kingdom_40"),
#      (faction_set_slot, "fac_kingdom_83", slot_kaoses_faction_title_type, "fac_kingdom_41"),
#      (faction_set_slot, "fac_kingdom_84", slot_kaoses_faction_title_type, "fac_kingdom_42"),
#		#New Extension End
#		#(faction_set_slot, "fac_kingdom_23", slot_kaoses_faction_title_type, "fac_kingdom_23"), #Crusader bugfix
#		#(faction_set_slot, "fac_kingdom_27", slot_kaoses_faction_title_type, "fac_kingdom_27"), #Illkhanate bugfix
#		(call_script, "script_kaos_update_titles"), #Update titles every week.
#		(display_message, "@Updating Dynamic Titles...Success!", 0x0032CD32),
#		#Extension end
#		
#		]),
#		#Title upgrades end
		

	(1.0, 0.0, 0.0,
		[
			(store_num_parties_of_template, ":num_parties_of_template_merc_party", "pt_merc_party"),
			(ge, ":num_parties_of_template_merc_party", 1)
		],

		[
		#(display_message, "@num_parties_of_template_merc-party triggresn!", 0x00ff0000)
			(try_for_parties, ":var_1"),
				(party_get_template_id, ":template_id_var_1", ":var_1"),
				(eq, ":template_id_var_1", "pt_merc_party"),
				(party_set_faction, ":var_1", "$players_kingdom"),
				(party_get_slot, ":var_1_ai_state", ":var_1", slot_party_ai_state),
				(party_get_slot, ":var_1_ai_object", ":var_1", slot_party_ai_object),
				(try_begin),
					(eq, ":var_1_ai_state", 2),
					(store_distance_to_party_from_party, ":distance_to_party_from_party_var_1_var_1_ai_object", ":var_1", ":var_1_ai_object"),
					(try_begin),
						(gt, ":distance_to_party_from_party_var_1_var_1_ai_object", 10),
						(party_set_ai_behavior, ":var_1", 6),
						(party_get_position, 5, ":var_1_ai_object"),
						(party_set_ai_target_position, ":var_1", 5),
					(else_try),
						(party_set_ai_behavior, ":var_1", 2),
						(party_set_ai_object, ":var_1", ":var_1_ai_object"),
						(party_set_ai_patrol_radius, ":var_1", 5),
					(try_end),
				(else_try),
					(eq, ":var_1_ai_object", "p_main_party"),
					(party_set_ai_behavior, ":var_1", 10),
					(party_set_ai_object, ":var_1", "p_main_party"),
				(try_end),
				(store_party_size_wo_prisoners, ":party_size_wo_prisoners_var_1", ":var_1"),
				(try_begin),
					(le, ":party_size_wo_prisoners_var_1", 10),
					(remove_party, ":var_1"),
				(try_end),
			(try_end)
		]),

	(168.0, 0.0, 0.0,
		[
			(store_num_parties_of_template, ":num_parties_of_template_merc_party", "pt_merc_party"),
			(ge, ":num_parties_of_template_merc_party", 1)
		],

		[
			(assign, ":value", -1),
			(assign, ":value_2", 0),
			(try_for_parties, ":var_3"),
				(party_get_template_id, ":template_id_var_3", ":var_3"),
				(eq, ":template_id_var_3", "pt_merc_party"),
				(party_get_num_companion_stacks, ":num_companion_stacks_var_3", ":var_3"),
				(try_for_range, ":localvariable", 0, ":num_companion_stacks_var_3"),
					(party_stack_get_troop_id, ":party_stack_troop_id_var_3_localvariable", ":var_3", ":localvariable"),
					(party_stack_get_size, ":party_stack_size_var_3_localvariable", ":var_3", ":localvariable"),
					(call_script, "script_game_get_troop_wage", ":party_stack_troop_id_var_3_localvariable", 0),
					(val_mul, reg0, ":party_stack_size_var_3_localvariable"),
					(val_add, ":value_2", reg0),
				(try_end),
				(assign, ":value", ":var_3"),
			(try_end),
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(assign, ":value_3", 0),
			(try_begin),
				(lt, ":troop_gold_player", ":value_2"),
				(assign, ":value_3", 1),
				(assign, ":value_2", ":troop_gold_player"),
				(display_message, "@you do not have enough gold to pay your forces!"),
			(try_end),
			(try_begin),
				(eq, ":value_3", 1),
				(neq, ":value", -1),
				(store_random_in_range, ":random_in_range_0_100", 0, 100),
				(lt, ":random_in_range_0_100", 30),
				(set_spawn_radius, 1),
				(spawn_around_party, ":value", "pt_deserters"),
				(assign, ":var_12", reg0),
				(party_clear, ":var_12"),
				(party_get_num_companion_stacks, ":num_companion_stacks_var_3", ":var_3"),
				(try_for_range, ":localvariable", 0, ":num_companion_stacks_var_3"),
					(party_stack_get_troop_id, ":party_stack_troop_id_var_3_localvariable", ":value", ":localvariable"),
					(party_stack_get_size, ":party_stack_size_var_3_localvariable", ":value", ":localvariable"),
					(party_add_members, ":var_12", ":party_stack_troop_id_var_3_localvariable", ":party_stack_size_var_3_localvariable"),
				(try_end),
				(remove_party, ":value"),
				(party_set_ai_behavior, ":var_12", 4),
				(party_set_ai_object, ":var_12", "p_main_party"),
				(display_message, "@One of your armies have deserted you!"),
			(try_end),
			(troop_remove_gold, "trp_player", ":value_2")
		]),

	(168.0, 0.0, 0.0,
		[],

		[
			(try_for_range, ":party", "p_town_1_1", "p_salt_mine"),
				(party_get_slot, ":party_298", ":party", 298),
				(this_or_next|eq, ":party_298", 0),
				(neg|party_is_active, ":party_298"),
				(party_set_slot, ":party", 298, -1),
				(store_faction_of_party, ":faction_of_party_party", ":party"),
				(this_or_next|eq, ":faction_of_party_party", "fac_kingdom_3"),
				(eq, ":faction_of_party_party", "fac_kingdom_27"),
				(set_spawn_radius, 5),
				(spawn_around_party, ":party", "pt_mongolian_camp"),
				(assign, ":value", reg0),
				(party_set_ai_behavior, ":value", 2),
				(party_set_ai_object, ":value", ":party"),
				(party_set_slot, ":value", slot_party_ai_object, ":party"),
				(party_set_ai_patrol_radius, ":value", 10),
				(party_set_slot, ":value", 299, ":party"),
				(party_set_slot, ":party", 298, ":value"),
				(party_set_faction, ":value", ":faction_of_party_party"),
				(party_set_slot, ":value", slot_town_center, "scn_village_mongol"),
				(party_set_slot, ":value", slot_center_volunteer_troop_amount, 1),
				(party_set_slot, ":value", slot_center_culture, "fac_culture_mongol"),
				(party_set_slot, ":value", 301, 1),
				(party_set_slot, ":value", slot_town_prosperity, 50),
				(party_set_slot, ":value", slot_party_type, 31),
				(party_set_icon, ":value", "icon_camp"),
			(try_end),
			(try_begin),
				(assign, ":party", "p_town_3_1"),
				(party_get_slot, ":party_298", ":party", 298),
				(le, ":party_298", 0),
				(store_faction_of_party, ":faction_of_party_party", ":party"),
				(set_spawn_radius, 5),
				(spawn_around_party, ":party", "pt_mongolian_camp"),
				(assign, ":value", reg0),
				(party_set_ai_behavior, ":value", 2),
				(party_set_ai_object, ":value", ":party"),
				(party_set_slot, ":value", slot_party_ai_object, ":party"),
				(party_set_ai_patrol_radius, ":value", 10),
				(party_set_slot, ":value", 299, ":party"),
				(party_set_slot, ":party", 298, ":value"),
				(party_set_faction, ":value", ":faction_of_party_party"),
				(party_set_slot, ":value", slot_town_center, "scn_village_mongol"),
				(party_set_slot, ":value", slot_center_volunteer_troop_amount, 1),
				(party_set_slot, ":value", slot_center_culture, "fac_culture_mongol"),
				(party_set_slot, ":value", 301, 1),
				(party_set_slot, ":value", slot_town_prosperity, 50),
				(party_set_slot, ":value", slot_party_type, 31),
				(party_set_icon, ":value", "icon_camp"),
			(try_end)
		]),

	(48.0, 0.0, 0.0,
		[
			(store_num_parties_of_template, ":num_parties_of_template_mongolian_camp", "pt_mongolian_camp"),
			(gt, ":num_parties_of_template_mongolian_camp", 0)
		],

		[
			(try_for_parties, ":var_1"),
				(party_get_template_id, ":template_id_var_1", ":var_1"),
				(eq, ":template_id_var_1", "pt_mongolian_camp"),
				(party_is_active, ":var_1"),
				(party_get_slot, ":var_1_301", ":var_1", 301),
				(try_begin),
					(eq, ":var_1_301", 1),
					(store_random_in_range, ":random_in_range_0_100", 0, 100),
					(le, ":random_in_range_0_100", 50),
					(party_set_slot, ":var_1", 301, 0),
					(party_set_icon, ":var_1", "icon_khergit"),
					(party_get_slot, ":var_1_299", ":var_1", 299),
					(party_set_ai_behavior, ":var_1", 2),
					(party_set_ai_object, ":var_1", ":var_1_299"),
					(party_set_slot, ":var_1", slot_party_ai_object, ":var_1_299"),
					(party_set_ai_patrol_radius, ":var_1", 10),
				(else_try),
					(store_faction_of_party, ":faction_of_party_var_1", ":var_1"),
					(party_get_slot, ":var_1_299", ":var_1", 299),
					(store_faction_of_party, ":faction_of_party_var_1_299", ":var_1_299"),
					(eq, ":faction_of_party_var_1_299", ":faction_of_party_var_1"),
					(party_set_slot, ":var_1", 301, 1),
					(party_set_icon, ":var_1", "icon_camp"),
				(try_end),
				(try_begin),
					(store_party_size_wo_prisoners, ":party_size_wo_prisoners_var_1", ":var_1"),
					(le, ":party_size_wo_prisoners_var_1", 100),
					(store_random_in_range, ":random_in_range_0_100", 1, 101),
					(try_begin),
						(le, ":random_in_range_0_100", 25),
						(assign, ":value", "pt_kingdom_mongol_reinforcements_c"),
					(else_try),
						(ge, ":random_in_range_0_100", 75),
						(assign, ":value", "pt_kingdom_mongol_reinforcements_b"),
					(else_try),
						(assign, ":value", "pt_kingdom_mongol_reinforcements_a"),
					(try_end),
					(party_add_template, ":var_1", ":value"),
					(party_get_slot, ":var_1_center_volunteer_troop_amount", ":var_1", slot_center_volunteer_troop_amount),
					(lt, ":var_1_center_volunteer_troop_amount", 6),
					(val_add, ":var_1_center_volunteer_troop_amount", 1),
					(party_set_slot, ":var_1", slot_center_volunteer_troop_amount, ":var_1_center_volunteer_troop_amount"),
				(try_end),
			(try_end)
		]),
		
		
		#####Patch Emoticons OSP
#		(3,
#        [
#        (eq, "$g_disable_emoticons", 1),
#        (eq, "$g_emoticons_hidden", 0),
#	    (call_script, "script_hide_emoticons"),
#	    (assign, "$g_emoticons_hidden", 1),
#        ]),
		#####End Patch OSP
		
### Insert anywhere in the triggers list, preferably at the end.

################################################################################
# LAV MODIFICATIONS START (EMOTICON MOD)
################################################################################

#    # Trigger to update emoticons every 6 game minutes.
#    (0.1, 0, 30, #0
#        [
#		#####Emoticons Enable instead of Disable Presentation Begin
#            (eq, "$g_disable_emoticons", 1),
#		#####Emoticons Enable instead of Disable Presentation End
#		
#		#####Emoticons Disable instead of Enable Presentation Begin
#		    #(eq, "$g_disable_emoticons", 0),
#		#####Emoticons Disable instead of Enable Presentation End
#        ],
#        [
#            (call_script, "script_show_emoticons"),
#        ]
#    ),

################################################################################
# LAV MODIFICATIONS END (EMOTICON MOD)
################################################################################
#####Kaos Safe Begin
#Kaos begin
  (0.1, 0, ti_once, [(map_free,0)], 
  [
    
  ]),
  
    (0.0, 0, 1.0, [], 
  [
    #			#Extension
		#New Extension
		(try_begin),
		(eq, "$kaos_kings_kingdom", 1),
		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_1"),
		(else_try),
		(eq, "$kaos_kings_kingdom", 2),
		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_2"),
				(else_try),
		(eq, "$kaos_kings_kingdom", 3),
		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_3"),
				(else_try),
		(eq, "$kaos_kings_kingdom", 4),
		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_4"),
				(else_try),
		(eq, "$kaos_kings_kingdom", 5),
		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_5"),
				(else_try),
		(eq, "$kaos_kings_kingdom", 6),
		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_6"),
				(else_try),
		(eq, "$kaos_kings_kingdom", 7),
		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_7"),
				(else_try),
		(eq, "$kaos_kings_kingdom", 8),
		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_8"),
				(else_try),
		(eq, "$kaos_kings_kingdom", 9),
		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_9"),
				(else_try),
		(eq, "$kaos_kings_kingdom", 10),
		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_10"),
				(else_try),
		(eq, "$kaos_kings_kingdom", 11),
		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_11"),
				(else_try),
		(eq, "$kaos_kings_kingdom", 12),
		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_12"),
				(else_try),
		(eq, "$kaos_kings_kingdom", 13),
		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_13"),
				(else_try),
		(eq, "$kaos_kings_kingdom", 14),
		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_14"),
				(else_try),
		(eq, "$kaos_kings_kingdom", 15),
		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_15"),
				(else_try),
		(eq, "$kaos_kings_kingdom", 16),
		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_16"),
				(else_try),
		(eq, "$kaos_kings_kingdom", 17),
		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_17"),
				(else_try),
		(eq, "$kaos_kings_kingdom", 18),
		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_18"),
				(else_try),
		(eq, "$kaos_kings_kingdom", 19),
		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_19"),
				(else_try),
		(eq, "$kaos_kings_kingdom", 20),
		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_20"),
				(else_try),
		(eq, "$kaos_kings_kingdom", 21),
		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_papacy"),
				(else_try),
		(eq, "$kaos_kings_kingdom", 22),
		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_22"),
				(else_try),
		(eq, "$kaos_kings_kingdom", 23),
		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_23"),
				(else_try),
		(eq, "$kaos_kings_kingdom", 24),
		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_24"),
				(else_try),
		(eq, "$kaos_kings_kingdom", 25),
		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_25"),
				(else_try),
		(eq, "$kaos_kings_kingdom", 26),
		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_26"),
				(else_try),
		(eq, "$kaos_kings_kingdom", 27),
		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_27"),
				(else_try),
		(eq, "$kaos_kings_kingdom", 28),
		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_28"),
				(else_try),
		(eq, "$kaos_kings_kingdom", 29),
		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_29"),
				(else_try),
		(eq, "$kaos_kings_kingdom", 30),
		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_30"),
				(else_try),
		(eq, "$kaos_kings_kingdom", 31),
		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_31"),
				(else_try),
		(eq, "$kaos_kings_kingdom", 32),
		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_32"),
				(else_try),
		(eq, "$kaos_kings_kingdom", 33),
		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_33"),
				(else_try),
		(eq, "$kaos_kings_kingdom", 34),
		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_34"),
				(else_try),
		(eq, "$kaos_kings_kingdom", 35),
		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_35"),
				(else_try),
		(eq, "$kaos_kings_kingdom", 36),
		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_36"),
				(else_try),
		(eq, "$kaos_kings_kingdom", 37),
		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_37"),
				(else_try),
		(eq, "$kaos_kings_kingdom", 38),
		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_38"),
				(else_try),
		(eq, "$kaos_kings_kingdom", 39),
		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_39"),
				(else_try),
		(eq, "$kaos_kings_kingdom", 40),
		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_40"),
				(else_try),
		(eq, "$kaos_kings_kingdom", 41),
		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_41"),
				(else_try),
		(eq, "$kaos_kings_kingdom", 42),
		(faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_kingdom_42"),
		(else_try),
	 (faction_set_slot, "fac_player_supporters_faction", slot_kaoses_faction_title_type, "fac_player_supporters_faction"),
	 (try_end),
	 #Edit faction titles
      (faction_set_slot, "fac_kingdom_1", slot_kaoses_faction_title_type, "fac_kingdom_1"),
      (faction_set_slot, "fac_kingdom_2", slot_kaoses_faction_title_type, "fac_kingdom_2"),
      (faction_set_slot, "fac_kingdom_3", slot_kaoses_faction_title_type, "fac_kingdom_3"),
      (faction_set_slot, "fac_kingdom_4", slot_kaoses_faction_title_type, "fac_kingdom_4"),
      (faction_set_slot, "fac_kingdom_5", slot_kaoses_faction_title_type, "fac_kingdom_5"),
      (faction_set_slot, "fac_kingdom_6", slot_kaoses_faction_title_type, "fac_kingdom_6"),
	        (faction_set_slot, "fac_kingdom_7", slot_kaoses_faction_title_type, "fac_kingdom_7"),
      (faction_set_slot, "fac_kingdom_8", slot_kaoses_faction_title_type, "fac_kingdom_8"),
      (faction_set_slot, "fac_kingdom_9", slot_kaoses_faction_title_type, "fac_kingdom_9"),
      (faction_set_slot, "fac_kingdom_10", slot_kaoses_faction_title_type, "fac_kingdom_10"),
      (faction_set_slot, "fac_kingdom_11", slot_kaoses_faction_title_type, "fac_kingdom_11"),
      (faction_set_slot, "fac_kingdom_12", slot_kaoses_faction_title_type, "fac_kingdom_12"),
	        (faction_set_slot, "fac_kingdom_13", slot_kaoses_faction_title_type, "fac_kingdom_13"),
      (faction_set_slot, "fac_kingdom_14", slot_kaoses_faction_title_type, "fac_kingdom_14"),
      (faction_set_slot, "fac_kingdom_15", slot_kaoses_faction_title_type, "fac_kingdom_15"),
      (faction_set_slot, "fac_kingdom_16", slot_kaoses_faction_title_type, "fac_kingdom_16"),
      (faction_set_slot, "fac_kingdom_17", slot_kaoses_faction_title_type, "fac_kingdom_17"),
      (faction_set_slot, "fac_kingdom_18", slot_kaoses_faction_title_type, "fac_kingdom_18"),
	        (faction_set_slot, "fac_kingdom_19", slot_kaoses_faction_title_type, "fac_kingdom_19"),
      (faction_set_slot, "fac_kingdom_20", slot_kaoses_faction_title_type, "fac_kingdom_20"),
      (faction_set_slot, "fac_papacy", slot_kaoses_faction_title_type, "fac_papacy"),
      (faction_set_slot, "fac_kingdom_22", slot_kaoses_faction_title_type, "fac_kingdom_22"),
      (faction_set_slot, "fac_kingdom_23", slot_kaoses_faction_title_type, "fac_kingdom_23"),
      (faction_set_slot, "fac_kingdom_24", slot_kaoses_faction_title_type, "fac_kingdom_24"),
	        (faction_set_slot, "fac_kingdom_25", slot_kaoses_faction_title_type, "fac_kingdom_25"),
      (faction_set_slot, "fac_kingdom_26", slot_kaoses_faction_title_type, "fac_kingdom_26"),
      (faction_set_slot, "fac_kingdom_27", slot_kaoses_faction_title_type, "fac_kingdom_27"),
      (faction_set_slot, "fac_kingdom_28", slot_kaoses_faction_title_type, "fac_kingdom_28"),
      (faction_set_slot, "fac_kingdom_29", slot_kaoses_faction_title_type, "fac_kingdom_29"),
	        (faction_set_slot, "fac_kingdom_30", slot_kaoses_faction_title_type, "fac_kingdom_30"),
      (faction_set_slot, "fac_kingdom_31", slot_kaoses_faction_title_type, "fac_kingdom_31"),
      (faction_set_slot, "fac_kingdom_32", slot_kaoses_faction_title_type, "fac_kingdom_32"),
      (faction_set_slot, "fac_kingdom_33", slot_kaoses_faction_title_type, "fac_kingdom_33"),
      (faction_set_slot, "fac_kingdom_34", slot_kaoses_faction_title_type, "fac_kingdom_34"),
      (faction_set_slot, "fac_kingdom_35", slot_kaoses_faction_title_type, "fac_kingdom_35"),
	        (faction_set_slot, "fac_kingdom_36", slot_kaoses_faction_title_type, "fac_kingdom_36"),
      (faction_set_slot, "fac_kingdom_37", slot_kaoses_faction_title_type, "fac_kingdom_37"),
      (faction_set_slot, "fac_kingdom_38", slot_kaoses_faction_title_type, "fac_kingdom_38"),
      (faction_set_slot, "fac_kingdom_39", slot_kaoses_faction_title_type, "fac_kingdom_39"),
      (faction_set_slot, "fac_kingdom_40", slot_kaoses_faction_title_type, "fac_kingdom_40"),
      (faction_set_slot, "fac_kingdom_41", slot_kaoses_faction_title_type, "fac_kingdom_41"),
	        (faction_set_slot, "fac_kingdom_42", slot_kaoses_faction_title_type, "fac_kingdom_42"),

			
	  #####checkpoint 1 rebel factions begin
      (faction_set_slot, "fac_kingdom_43", slot_kaoses_faction_title_type, "fac_kingdom_1"),
      (faction_set_slot, "fac_kingdom_44", slot_kaoses_faction_title_type, "fac_kingdom_2"),
      (faction_set_slot, "fac_kingdom_45", slot_kaoses_faction_title_type, "fac_kingdom_3"),
      (faction_set_slot, "fac_kingdom_46", slot_kaoses_faction_title_type, "fac_kingdom_4"),
      (faction_set_slot, "fac_kingdom_47", slot_kaoses_faction_title_type, "fac_kingdom_5"),
      (faction_set_slot, "fac_kingdom_48", slot_kaoses_faction_title_type, "fac_kingdom_6"),
	  (faction_set_slot, "fac_kingdom_49", slot_kaoses_faction_title_type, "fac_kingdom_7"),
      (faction_set_slot, "fac_kingdom_50", slot_kaoses_faction_title_type, "fac_kingdom_8"),
      (faction_set_slot, "fac_kingdom_51", slot_kaoses_faction_title_type, "fac_kingdom_9"),
      (faction_set_slot, "fac_kingdom_52", slot_kaoses_faction_title_type, "fac_kingdom_10"),
      (faction_set_slot, "fac_kingdom_53", slot_kaoses_faction_title_type, "fac_kingdom_11"),
      (faction_set_slot, "fac_kingdom_54", slot_kaoses_faction_title_type, "fac_kingdom_12"),
	  (faction_set_slot, "fac_kingdom_55", slot_kaoses_faction_title_type, "fac_kingdom_13"),
      (faction_set_slot, "fac_kingdom_56", slot_kaoses_faction_title_type, "fac_kingdom_14"),
      (faction_set_slot, "fac_kingdom_57", slot_kaoses_faction_title_type, "fac_kingdom_15"),
      (faction_set_slot, "fac_kingdom_58", slot_kaoses_faction_title_type, "fac_kingdom_16"),
      (faction_set_slot, "fac_kingdom_59", slot_kaoses_faction_title_type, "fac_kingdom_17"),
      (faction_set_slot, "fac_kingdom_60", slot_kaoses_faction_title_type, "fac_kingdom_18"),
	  (faction_set_slot, "fac_kingdom_61", slot_kaoses_faction_title_type, "fac_kingdom_19"),
      (faction_set_slot, "fac_kingdom_62", slot_kaoses_faction_title_type, "fac_kingdom_20"),
      (faction_set_slot, "fac_kingdom_63", slot_kaoses_faction_title_type, "fac_papacy"),
      (faction_set_slot, "fac_kingdom_64", slot_kaoses_faction_title_type, "fac_kingdom_22"),
      (faction_set_slot, "fac_kingdom_65", slot_kaoses_faction_title_type, "fac_kingdom_23"),
      (faction_set_slot, "fac_kingdom_66", slot_kaoses_faction_title_type, "fac_kingdom_24"),
	  (faction_set_slot, "fac_kingdom_67", slot_kaoses_faction_title_type, "fac_kingdom_25"),
      (faction_set_slot, "fac_kingdom_68", slot_kaoses_faction_title_type, "fac_kingdom_26"),
      (faction_set_slot, "fac_kingdom_69", slot_kaoses_faction_title_type, "fac_kingdom_27"),
      (faction_set_slot, "fac_kingdom_70", slot_kaoses_faction_title_type, "fac_kingdom_28"),
      (faction_set_slot, "fac_kingdom_71", slot_kaoses_faction_title_type, "fac_kingdom_29"),
      (faction_set_slot, "fac_kingdom_72", slot_kaoses_faction_title_type, "fac_kingdom_30"),
      (faction_set_slot, "fac_kingdom_73", slot_kaoses_faction_title_type, "fac_kingdom_31"),
      (faction_set_slot, "fac_kingdom_74", slot_kaoses_faction_title_type, "fac_kingdom_32"),
      (faction_set_slot, "fac_kingdom_75", slot_kaoses_faction_title_type, "fac_kingdom_33"),
      (faction_set_slot, "fac_kingdom_76", slot_kaoses_faction_title_type, "fac_kingdom_34"),
      (faction_set_slot, "fac_kingdom_77", slot_kaoses_faction_title_type, "fac_kingdom_35"),
      (faction_set_slot, "fac_kingdom_78", slot_kaoses_faction_title_type, "fac_kingdom_36"),
	  (faction_set_slot, "fac_kingdom_79", slot_kaoses_faction_title_type, "fac_kingdom_37"),
      (faction_set_slot, "fac_kingdom_80", slot_kaoses_faction_title_type, "fac_kingdom_38"),
      (faction_set_slot, "fac_kingdom_81", slot_kaoses_faction_title_type, "fac_kingdom_39"),
      (faction_set_slot, "fac_kingdom_82", slot_kaoses_faction_title_type, "fac_kingdom_40"),
      (faction_set_slot, "fac_kingdom_83", slot_kaoses_faction_title_type, "fac_kingdom_41"),
      (faction_set_slot, "fac_kingdom_84", slot_kaoses_faction_title_type, "fac_kingdom_42"),
		#New Extension End
		#(faction_set_slot, "fac_kingdom_23", slot_kaoses_faction_title_type, "fac_kingdom_23"), #Crusader bugfix
		#(faction_set_slot, "fac_kingdom_27", slot_kaoses_faction_title_type, "fac_kingdom_27"), #Illkhanate bugfix
		#(display_message, "@Updating Dynamic Titles...Success!", 0x0032CD32),
		#Extension end
	
	
  ]),
  
  
  #Ensure unassigned centers get assigned at least once a month
  
#    (53.0, 0, 696.0, [ #Each 28 days
#	],
#	
#  [
#  (call_script, "script_assign_lords_to_empty_centers"),
#  ]),
#Kaos End
#####Kaos SAfe end
  (0.01, 0, ti_once, [], 
  [
(call_script, "script_after_game_starts")
  ]),
  
#  (0.1, 0, ti_once, [], 
#  [
#  #(this_or_next|eq, "$kaos_monarch_var", 1), 
#  #(this_or_next|eq, "$kaos_heir", 1), 
#  #(eq, "$start_as_vassal_gvar1", 1),
#  (eq, "$kaos_kings_kingdom", 23),
#  (display_message, "@Applying correct cultures to player!", 0x0032CD32),
#	(faction_set_slot, "fac_player_supporters_faction", slot_faction_culture, "fac_culture_western"),
#	(faction_set_slot, "fac_player_faction", slot_faction_culture, "fac_culture_western"),
#	(faction_set_slot, "fac_kingdom_23", slot_faction_culture, "fac_culture_western"),
#	(display_message, "@Applying correct cultures to player success!", 0x0032CD32),
#  #(call_script, "script_kaos_update_titles"),
#  ]),


#Begin additional triggers for disasters
#  (0, 0, 168,[],
#  [
#    (try_begin),
#      (ge, "$weekk_count", 4),
#      (assign, "$weekk_count", 1),
#    (else_try),
#      (val_add, "$weekk_count", 1),
#    (try_end),
#    (try_begin),
#      (this_or_next|eq, "$weekk_count", 2),
#      (eq, "$weekk_count", 4),
#      (try_begin),
#        (gt, "$main_q_step", 0),
#        (lt, "$main_q_step", 19),
#        (display_message, "str_mq_camp_menu_tip_ala", 0x00FFFF00),
#      (try_end),
#      (store_attribute_level, ":var0", "trp_player", 2),
#      (try_begin),
#        (gt, ":var0", 40),
#        (assign, ":var0", 40),
#      (try_end),
#      (assign, reg8, ":var0"),
#      (val_mul, ":var0", 5),
#      (assign, reg9, ":var0"),
#      (display_message, "str_int_exp_rep"),
#      (call_script, "script_int_exp_diff", ":var0"),
#    (try_end),
#    (try_begin),
#      (ge, "$weekk_count", 2),
#      (try_for_range, ":var1", "p_town_1_1", "p_village_1_1"),
#        (store_faction_of_party, ":var2", ":var1"),
#        (eq, ":var2", "fac_neutral"),
#        (party_set_flags, ":var1", pf_disabled, 1),
#      (try_end),
#    (try_end),
#    (try_begin),
#      (eq, "$start_age", 1184),
#      (try_for_range, ":var1", "p_wasteland1", "p_ruin_1"),
#        (party_set_flags, ":var1", pf_disabled, 1),
#      (try_end),
#    (try_end),
#    (call_script, "script_error_party_remove"),
#  ]),

#  (0, 0, 24,[],
#  [
#    (try_begin),
#      (ge, "$dayy_count", 7),
#      (assign, "$dayy_count", 1),
#    (else_try),
#      (val_add, "$dayy_count", 1),
#    (try_end),
#    (try_begin),
#      (eq, "$dayy_two", 1),
#      (assign, "$dayy_two", 0),
#    (else_try),
#      (assign, "$dayy_two", 1),
#    (try_end),
#    (try_begin),
#      (ge, "$dayy_three", 3),
#      (assign, "$dayy_three", 1),
#    (else_try),
#      (val_add, "$dayy_three", 1),
#    (try_end),
#    (try_begin),
#      (ge, "$dayy_four", 4),
#      (assign, "$dayy_four", 1),
#    (else_try),
#      (val_add, "$dayy_four", 1),
#    (try_end),
#    (try_begin),
#      (gt, "$main_q_day", 0),
#      (val_sub, "$main_q_day", 1),
#      (try_begin),
#        (eq, "$main_q_step", 3),
#        (assign, reg8, "$main_q_day"),
#        (display_message, "str_mq_1_3b"),
#      (try_end),
#    (try_end),
#    (call_script, "script_wm_check_faction_castle_num_regular_activate"),
#    (call_script, "script_check_faction_army_power_and_food"),
#    (try_for_range, ":var0", "fac_kingdom_1", "fac_kingdoms_end"),
#      (faction_slot_eq, ":var0", 30, 1),
#      (neq, ":var0", "fac_kingdoms_end"),
#      (faction_get_slot, ":var1", ":var0", 25),
#      (faction_get_slot, ":var2", ":var0", 20),
#      (faction_get_slot, ":var3", ":var0", 28),
#      (try_begin),
#        (is_between, ":var2", "p_town_1_1", "p_village_1_1"),
#        (store_faction_of_party, ":var4", ":var2"),
#        (neg|faction_slot_eq, ":var4", 30, 1),
#        (faction_set_slot, ":var0", 20, 1),
#        (faction_set_slot, ":var0", 28, 0),
#      (else_try),
#        (le, ":var3", 0),
#        (lt, ":var1", 25000),
#        (faction_set_slot, ":var0", 20, 1),
#        (faction_set_slot, ":var0", 28, 0),
#      (else_try),
#        (is_between, ":var2", "p_town_1_1", "p_village_1_1"),
#        (store_faction_of_party, ":var4", ":var2"),
#        (eq, ":var4", ":var0"),
#        (faction_set_slot, ":var0", 20, 1),
#        (faction_set_slot, ":var0", 28, 0),
#      (else_try),
#        (is_between, ":var2", "p_town_1_1", "p_village_1_1"),
#        (store_faction_of_party, ":var4", ":var2"),
#        (store_relation, ":var5", ":var4", ":var0"),
#        (ge, ":var5", 0),
#        (faction_set_slot, ":var0", 20, 1),
#        (faction_set_slot, ":var0", 28, 0),
#      (else_try),
#        (neq, ":var2", 1),
#        (neg|is_between, ":var2", "p_town_1_1", "p_village_1_1"),
#        (faction_set_slot, ":var0", 20, 1),
#        (faction_set_slot, ":var0", 28, 0),
#      (try_end),
#      (faction_get_slot, ":var2", ":var0", 20),
#      (ge, ":var1", 25000),
#      (eq, ":var2", 1),
#      (call_script, "script_temp_save_number11_initialize"),
#      (try_for_range, ":var6", "p_town_1_1", "p_village_1_1"),
#        (store_faction_of_party, ":var7", ":var6"),
#        (eq, ":var7", ":var0"),
#        (try_for_range, ":var8", 53, 63),
#          (party_get_slot, ":var9", ":var6", ":var8"),
#          (store_faction_of_party, ":var4", ":var9"),
#          (faction_slot_eq, ":var4", 30, 1),
#          (store_relation, ":var10", ":var0", ":var4"),
#          (lt, ":var10", 0),
#          (call_script, "script_party_count_fit_for_battle", ":var9"),
#          (assign, ":var11", reg0),
#          (lt, ":var11", 11000),
#          (call_script, "script_temp_save_number11_inject", ":var9"),
#        (try_end),
#      (try_end),
#      (call_script, "script_temp_save_number11_choice_rand"),
#      (try_begin),
#        (is_between, "$wm_target_number11", "p_town_1_1", "p_village_1_1"),
#        (store_faction_of_party, ":var4", "$wm_target_number11"),
#        (faction_slot_eq, ":var4", 30, 1),
#        (store_relation, ":var10", ":var0", ":var4"),
#        (lt, ":var10", 0),
#        (faction_set_slot, ":var0", 20, "$wm_target_number11"),
#        (try_begin),
#          (ge, ":var0", "fac_kingdom_1"),
#          (this_or_next|eq, ":var0", "$contract_fac"),
#          (eq, ":var0", "$wm_player_fac"),
#          (str_store_party_name, s1, "$wm_target_number11"),
#          (display_message, "str_attack_targett", 0x00FF0000),
#          (party_relocate_near_party, "p_attack_target", "$wm_target_number11", 0),
#          (party_set_flags, "p_attack_target", pf_disabled, 0),
#          (party_set_icon, "p_attack_target", "icon_attack_target"),
#        (try_end),
#      (else_try),
#        (neg|is_between, "$wm_target_number11", "p_town_1_1", "p_village_1_1"),
#        (call_script, "script_temp_save_number11_initialize"),
#        (try_for_range, ":var6", "p_town_1_1", "p_village_1_1"),
#          (store_faction_of_party, ":var7", ":var6"),
#          (eq, ":var7", ":var0"),
#          (try_for_range, ":var8", 53, 63),
#            (party_get_slot, ":var9", ":var6", ":var8"),
#            (store_faction_of_party, ":var4", ":var9"),
#            (faction_slot_eq, ":var4", 30, 1),
#            (store_relation, ":var10", ":var0", ":var4"),
#            (lt, ":var10", 0),
#            (call_script, "script_temp_save_number11_inject", ":var9"),
#          (try_end),
#        (try_end),
#        (call_script, "script_temp_save_number11_choice_rand"),
#        (try_begin),
#          (is_between, "$wm_target_number11", "p_town_1_1", "p_village_1_1"),
#          (store_faction_of_party, ":var4", "$wm_target_number11"),
#          (faction_slot_eq, ":var4", 30, 1),
#          (store_relation, ":var10", ":var0", ":var4"),
#          (lt, ":var10", 0),
#          (faction_set_slot, ":var0", 20, "$wm_target_number11"),
#          (try_begin),
#            (ge, ":var0", "fac_kingdom_1"),
#            (this_or_next|eq, ":var0", "$contract_fac"),
#            (eq, ":var0", "$wm_player_fac"),
#            (str_store_party_name, s1, "$wm_target_number11"),
#            (display_message, "str_attack_targett", 0x00FF0000),
#            (party_relocate_near_party, "p_attack_target", "$wm_target_number11", 0),
#            (party_set_flags, "p_attack_target", pf_disabled, 0),
#            (party_set_icon, "p_attack_target", "icon_attack_target"),
#          (try_end),
#        (try_end),
#      (try_end),
#      (try_begin),
#        (ge, ":var0", "fac_kingdom_1"),
#        (this_or_next|eq, ":var0", "$contract_fac"),
#        (eq, ":var0", "$wm_player_fac"),
#        (faction_get_slot, ":var12", ":var0", 20),
#        (neg|is_between, ":var12", "p_town_1_1", "p_village_1_1"),
#        (party_set_flags, "p_attack_target", pf_disabled, 1),
#      (try_end),
#    (try_end),
#    (try_begin),
#      (eq, "$dayy_count", 6),
#      (call_script, "script_wm_turn_dev_output_div_build_ai"),
#    (try_end),
#    (try_begin),
#      (eq, "$dayy_count", 1),
#      (call_script, "script_faction_public_opinion_sett"),
#      (call_script, "script_check_faction_border_faction"),
#      (call_script, "script_no_border_faction_enemy_peace"),
#      (try_begin),
#        (eq, "$weekk_count", 1),
#        (call_script, "script_rand_between_faction_diplomacy", "fac_kingdom_1", "fac_kingdom_16"),
#        (call_script, "script_wm_trade_price_try_for"),
#      (else_try),
#        (eq, "$weekk_count", 2),
#        (call_script, "script_rand_between_faction_diplomacy", "fac_kingdom_17", "fac_kingdom_32"),
#        (call_script, "script_wm_place_owner_sett_scan", 1),
#      (else_try),
#        (eq, "$weekk_count", 3),
#        (call_script, "script_rand_between_faction_diplomacy", "fac_kingdom_33", "fac_kingdom_48"),
#        (call_script, "script_wm_trade_price_try_for"),
#      (else_try),
#        (eq, "$weekk_count", 4),
#        (call_script, "script_rand_between_faction_diplomacy", "fac_kingdom_49", "fac_japan_people"),
#        (call_script, "script_wm_place_owner_sett_scan", 1),
#      (try_end),
#    (try_end),
#    (try_begin),
#      (eq, "$dayy_count", 2),
#      (try_begin),
#        (gt, "$ai_holywar_delay", 0),
#        (val_sub, "$ai_holywar_delay", 1),
#      (try_end),
#      (try_begin),
#        (le, "$ai_holywar_delay", 0),
#        (store_random_in_range, ":var13", 0, 10),
#        (try_begin),
#          (eq, ":var13", 0),
#          (call_script, "script_ai_rand_holywar"),
#        (else_try),
#          (eq, ":var13", 1),
#          (this_or_next|eq, "$start_age", 0),
#          (eq, "$start_age", 1184),
#          (store_faction_of_party, ":var7", "p_jerusalem"),
#          (faction_get_slot, ":var14", ":var7", 27),
#          (try_begin),
#            (neq, ":var14", 1),
#            (call_script, "script_holywar_reln_set", 1, ":var14", "p_jerusalem"),
#          (else_try),
#            (neq, ":var14", 3),
#            (call_script, "script_holywar_reln_set", 3, ":var14", "p_jerusalem"),
#          (try_end),
#        (try_end),
#      (try_end),
#    (try_end),
#    (try_begin),
#      (eq, "$dayy_count", 3),
#      (store_random_in_range, ":var15", 0, 2),
#      (try_begin),
#        (eq, ":var15", 0),
#        (try_begin),
#          (eq, "$weekk_count", 1),
#          (call_script, "script_disaster_rand_execute", 9),
#        (else_try),
#          (eq, "$weekk_count", 2),
#          (call_script, "script_disaster_rand_execute", 7),
#          (call_script, "script_npc_courtship_event"),
#        (else_try),
#          (eq, "$weekk_count", 3),
#          (call_script, "script_disaster_rand_execute", 6),
#        (else_try),
#          (eq, "$weekk_count", 4),
#          (call_script, "script_disaster_rand_execute", 5),
#          (call_script, "script_npc_courtship_event"),
#        (try_end),
#      (try_end),
#      (store_random_in_range, "$temp_glob_rand_1", 1081, 1252),
#      (store_random_in_range, "$temp_glob_rand_2", 1081, 1252),
#      (store_random_in_range, "$temp_glob_rand_3", 1081, 1252),
#      (store_random_in_range, "$temp_glob_rand_4", 1081, 1252),
#      (store_random_in_range, "$temp_glob_rand_5", 1081, 1252),
#      (store_random_in_range, "$temp_glob_rand_6", 1081, 1252),
#      (store_random_in_range, "$temp_glob_rand_7", 1081, 1252),
#    (try_end),
#    (try_begin),
#      (eq, "$dayy_count", 5),
#      (try_for_range, ":var16", "fac_kingdom_1", "fac_kingdoms_end"),
#        (faction_slot_eq, ":var16", 30, 1),
#        (try_for_range, ":var8", 56, 76),
#          (faction_get_slot, ":var17", ":var16", ":var8"),
#          (gt, ":var17", 0),
#          (neg|is_between, ":var17", "p_temp_party", "p_reserved_5"),
#          (neq, ":var17", "p_reserved_5"),
#          (party_is_active, ":var17"),
#          (party_slot_eq, ":var17", 0, 1),
#          (party_stack_get_troop_id, ":var18", ":var17", 0),
#          (is_between, ":var18", "trp_kingdom_lord_1", "trp_knight_1_1_wife"),
#          #(is_between, ":var18", "trp_temp_commander_fac_01", "trp_temp_commander_end"),
#          (assign, ":var19", 100),
#          (store_div, ":var20", ":var19", 5),
#          (call_script, "script_ai_equip_supp_depend_fac", ":var17", ":var20", ":var16"),
#        (try_end),
#      (try_end),
#      (try_begin),
#        (assign, ":var21", "p_main_party"),
#        (try_begin),
#          (neq, "$supp_equip_01", 1),
#          (party_set_slot, ":var21", 30, 0),
#        (try_end),
#        (try_begin),
#          (neq, "$supp_equip_02", 1),
#          (party_set_slot, ":var21", 31, 0),
#        (try_end),
#        (try_begin),
#          (neq, "$supp_equip_03", 1),
#          (party_set_slot, ":var21", 32, 0),
#        (try_end),
#        (try_begin),
#          (neq, "$supp_equip_04", 1),
#          (party_set_slot, ":var21", 33, 0),
#        (try_end),
#        (try_begin),
#          (neq, "$supp_equip_05", 1),
#          (party_set_slot, ":var21", 34, 0),
#        (try_end),
#        (try_begin),
#          (neq, "$supp_equip_06", 1),
#          (party_set_slot, ":var21", 35, 0),
#        (try_end),
#        (try_begin),
#          (neq, "$supp_equip_07", 1),
#          (party_set_slot, ":var21", 36, 0),
#        (try_end),
#        (try_begin),
#          (neq, "$supp_equip_08", 1),
#          (party_set_slot, ":var21", 37, 0),
#        (try_end),
#        (try_begin),
#          (neq, "$supp_equip_09", 1),
#          (party_set_slot, ":var21", 38, 0),
#        (try_end),
#        (try_begin),
#          (neq, "$supp_equip_10", 1),
#          (party_set_slot, ":var21", 39, 0),
#        (try_end),
#        (try_begin),
#          (neq, "$supp_equip_11", 1),
#          (party_set_slot, ":var21", 40, 0),
#        (try_end),
#        (try_begin),
#          (neq, "$supp_equip_12", 1),
#          (party_set_slot, ":var21", 41, 0),
#        (try_end),
#        (try_begin),
#          (neq, "$supp_equip_13", 1),
#          (party_set_slot, ":var21", 42, 0),
#        (try_end),
#        (assign, ":var22", 0),
#        (try_begin),
#          (eq, "$supp_equip_01", 1),
#          (val_add, ":var22", 1),
#        (try_end),
#        (try_begin),
#          (eq, "$supp_equip_02", 1),
#          (val_add, ":var22", 1),
#        (try_end),
#        (try_begin),
#          (eq, "$supp_equip_03", 1),
#          (val_add, ":var22", 1),
#        (try_end),
#        (try_begin),
#          (eq, "$supp_equip_04", 1),
#          (val_add, ":var22", 1),
#        (try_end),
#        (try_begin),
#          (eq, "$supp_equip_05", 1),
#          (val_add, ":var22", 1),
#        (try_end),
#        (try_begin),
#          (eq, "$supp_equip_06", 1),
#          (val_add, ":var22", 1),
#        (try_end),
#        (try_begin),
#          (eq, "$supp_equip_07", 1),
#          (val_add, ":var22", 1),
#        (try_end),
#        (try_begin),
#          (eq, "$supp_equip_08", 1),
#          (val_add, ":var22", 1),
#        (try_end),
#        (try_begin),
#          (eq, "$supp_equip_09", 1),
#          (val_add, ":var22", 1),
#        (try_end),
#        (try_begin),
#          (eq, "$supp_equip_10", 1),
#          (val_add, ":var22", 1),
#        (try_end),
#        (try_begin),
#          (eq, "$supp_equip_11", 1),
#          (val_add, ":var22", 1),
#        (try_end),
#        (try_begin),
#          (eq, "$supp_equip_12", 1),
#          (val_add, ":var22", 1),
#        (try_end),
#        (try_begin),
#          (eq, "$supp_equip_13", 1),
#          (val_add, ":var22", 1),
#        (try_end),
#        (gt, ":var22", 0),
#        (assign, ":var19", 100),
#        (assign, ":var23", 5000),
#        (store_div, ":var20", ":var19", ":var22"),
#        (store_div, ":var24", ":var23", ":var22"),
#        (try_begin),
#          (eq, "$supp_equip_01", 1),
#          (call_script, "script_equip_supp_to_party", ":var21", 30, ":var20", ":var24"),
#        (try_end),
#        (try_begin),
#          (eq, "$supp_equip_02", 1),
#          (call_script, "script_equip_supp_to_party", ":var21", 31, ":var20", ":var24"),
#        (try_end),
#        (try_begin),
#          (eq, "$supp_equip_03", 1),
#          (call_script, "script_equip_supp_to_party", ":var21", 32, ":var20", ":var24"),
#        (try_end),
#        (try_begin),
#          (eq, "$supp_equip_04", 1),
#          (call_script, "script_equip_supp_to_party", ":var21", 33, ":var20", ":var24"),
#        (try_end),
#        (try_begin),
#          (eq, "$supp_equip_05", 1),
#          (call_script, "script_equip_supp_to_party", ":var21", 34, ":var20", ":var24"),
#        (try_end),
#        (try_begin),
#          (eq, "$supp_equip_06", 1),
#          (call_script, "script_equip_supp_to_party", ":var21", 35, ":var20", ":var24"),
#        (try_end),
#        (try_begin),
#          (eq, "$supp_equip_07", 1),
#          (call_script, "script_equip_supp_to_party", ":var21", 36, ":var20", ":var24"),
#        (try_end),
#        (try_begin),
#          (eq, "$supp_equip_08", 1),
#          (call_script, "script_equip_supp_to_party", ":var21", 37, ":var20", ":var24"),
#        (try_end),
#        (try_begin),
#          (eq, "$supp_equip_09", 1),
#          (call_script, "script_equip_supp_to_party", ":var21", 38, ":var20", ":var24"),
#        (try_end),
#        (try_begin),
#          (eq, "$supp_equip_10", 1),
#          (call_script, "script_equip_supp_to_party", ":var21", 39, ":var20", ":var24"),
#        (try_end),
#        (try_begin),
#          (eq, "$supp_equip_11", 1),
#          (call_script, "script_equip_supp_to_party", ":var21", 40, ":var20", ":var24"),
#        (try_end),
#        (try_begin),
#          (eq, "$supp_equip_12", 1),
#          (call_script, "script_equip_supp_to_party", ":var21", 41, ":var20", ":var24"),
#        (try_end),
#        (try_begin),
#          (eq, "$supp_equip_13", 1),
#          (call_script, "script_equip_supp_to_party", ":var21", 42, ":var20", ":var24"),
#        (try_end),
#      (try_end),
#      (try_begin),
#        (eq, "$r_player_class", 5),
#        (party_set_slot, "p_main_party", 41, 1000),
#      (else_try),
#        (eq, "$r_player_class", 3),
#        (party_set_slot, "p_main_party", 38, 1000),
#      (try_end),
#      (try_begin),
#        (gt, "$workshop_target_party", 0),
#        (gt, "$workshop_slave", 50),
#        (is_between, "$wm_player_fac", "fac_kingdom_1", "fac_kingdoms_end"),
#        (faction_slot_eq, "$wm_player_fac", 6, 0),
#        (display_message, "str_slave_not_fac", 0x00FF9000),
#        (call_script, "script_wm_honor_change_diff", "trp_player", 2, 34),
#      (try_end),
#      (try_for_range, ":var0", "fac_kingdom_1", "fac_kingdoms_end"),
#        (faction_get_slot, ":var3", ":var0", 28),
#        (gt, ":var3", 0),
#        (val_sub, ":var3", 1),
#        (faction_set_slot, ":var0", 28, ":var3"),
#      (try_end),
#    (try_end),
#    (try_begin),
#      (gt, "$qquest_type", 0),
#      (le, "$qquest_time_day", 0),
#      (call_script, "script_qquest_initialize"),
#      (display_message, "str_questfail_time", 0x00FFFF00),
#    (else_try),
#      (gt, "$qquest_time_day", 0),
#      (neq, "$qquest_progress", 1),
#      (val_sub, "$qquest_time_day", 1),
#    (try_end),
#    (try_begin),
#      (neq, "$qquest_type", 23),
#      (neq, "$qquest_type", 24),
#      (party_set_flags, "p_for_quest_villa", pf_disabled, 1),
#      (party_set_flags, "p_for_quest_villa", pf_always_visible, 0),
#    (try_end),
#    (try_begin),
#      (is_between, "$workshop_target_party", "p_town_1_1", "p_village_1_1"),
#      (store_faction_of_party, ":var7", "$workshop_target_party"),
#      (store_relation, ":var5", ":var7", "$wm_player_fac"),
#      (party_get_slot, ":var25", "$workshop_target_party", 11),
#      (try_begin),
#        (lt, ":var5", 0),
#        (str_store_party_name, s7, "p_workshop_party"),
#        (assign, "$workshop_target_party", 0),
#        (assign, "$workshop_slave", 0),
#        (party_set_flags, "p_workshop_party", pf_disabled, 1),
#        (display_message, "str_workshop_enemy"),
#        (play_sound, "snd_sabotagee"),
#      (else_try),
#        (neq, ":var25", "$workshop_target_res_slot"),
#        (str_store_party_name, s7, "p_workshop_party"),
#        (str_store_item_name, s8, "$workshop_target_product"),
#        (assign, "$workshop_target_party", 0),
#        (assign, "$workshop_slave", 0),
#        (party_set_flags, "p_workshop_party", pf_disabled, 1),
#        (display_message, "str_workshop_depleted"),
#      (else_try),
#        (gt, "$workshop_slave", 50),
#        (store_random_in_range, ":var26", 0, 4),
#        (store_mul, ":var27", 25, 5),
#        (try_begin),
#          (eq, "$workshop_work_level", ":var27"),
#          (ge, ":var26", 1),
#          (val_sub, "$workshop_slave", 1),
#        (else_try),
#          (eq, "$workshop_work_level", 100),
#          (ge, ":var26", 2),
#          (val_sub, "$workshop_slave", 1),
#        (else_try),
#          (eq, "$workshop_work_level", 75),
#          (ge, ":var26", 3),
#          (val_sub, "$workshop_slave", 1),
#        (try_end),
#        (store_mul, ":var28", "$workshop_slave", "$workshop_work_level"),
#        (val_div, ":var28", 100),
#        (val_add, "$workshop_product_cur", ":var28"),
#        (try_begin),
#          (gt, "$workshop_product_cur", "$workshop_target_price"),
#          (val_sub, "$workshop_product_cur", "$workshop_target_price"),
#          (val_add, "$workshop_product_stock", 1),
#          (try_begin),
#            (gt, "$workshop_product_stock", 10),
#            (assign, "$workshop_product_stock", 10),
#          (try_end),
#        (try_end),
#      (try_end),
#    (try_end),
#    (try_begin),
#      (neg|is_between, "$contract_fac", "fac_kingdom_1", "fac_kingdoms_end"),
#      (gt, "$contract_time", 0),
#      (assign, "$contract_time", 0),
#    (try_end),
#    (try_begin),
#      (le, "$contract_time", 0),
#      (assign, "$contract_fac", 0),
#    (try_end),
#    (try_begin),
#      (gt, "$contract_time", 0),
#      (val_sub, "$contract_time", 1),
#      (is_between, "$contract_fac", "fac_kingdom_1", "fac_kingdoms_end"),
#      (assign, ":var29", "$contract_fac"),
#      (try_for_range, ":var0", "fac_kingdom_1", "fac_kingdoms_end"),
#        (neq, ":var0", ":var29"),
#        (faction_slot_eq, ":var0", 30, 1),
#        (call_script, "script_wm_copy_faction_relation", ":var29", ":var0", ":var29"),
#      (try_end),
#      (call_script, "script_troop_contribution_diff", "trp_player", 1, 34),
#    (try_end),
#    (try_begin),
#      (is_between, "$contract_fac", "fac_kingdom_1", "fac_kingdoms_end"),
#      (set_show_messages, 0),
#      (troop_get_slot, ":var30", "trp_player", 20),
#      (val_div, ":var30", 23),
#      (set_show_messages, 1),
#      (try_begin),
#        (le, ":var30", 0),
#        (call_script, "script_wm_mercenary_dispose"),
#        (display_message, "str_merc_too_lazy", 0x00FF9000),
#      (else_try),
#        (le, "$contract_time", 0),
#        (call_script, "script_wm_mercenary_dispose"),
#      (try_end),
#    (try_end),
#    (try_begin),
#      (is_between, "$wm_player_fac", "fac_kingdom_1", "fac_kingdoms_end"),
#      (try_for_range, ":var0", "fac_kingdom_1", "fac_kingdoms_end"),
#        (neq, ":var0", "$wm_player_fac"),
#        (neq, ":var0", "fac_kingdoms_end"),
#        (store_relation, ":var5", "$wm_player_fac", ":var0"),
#        (call_script, "script_set_player_relation_with_faction_no_mess", ":var0", ":var5"),
#      (try_end),
#    (try_end),
#    (try_begin),
#      (is_between, "$nakepit_target_party", "p_town_1_1", "p_village_1_1"),
#      (store_faction_of_party, ":var7", "$nakepit_target_party"),
#      (store_relation, ":var5", ":var7", "$wm_player_fac"),
#      (lt, ":var5", 0),
#      (str_store_party_name, s7, "p_nakepit_party"),
#      (assign, "$nakepit_target_party", 0),
#      (party_set_flags, "p_nakepit_party", pf_disabled, 1),
#      (display_message, "str_workshop_enemy"),
#      (play_sound, "snd_sabotagee"),
#    (try_end),
#    (try_begin),
#      (is_between, "$brothel_target_party", "p_town_1_1", "p_village_1_1"),
#      (store_faction_of_party, ":var7", "$brothel_target_party"),
#      (store_relation, ":var5", ":var7", "$wm_player_fac"),
#      (lt, ":var5", 0),
#      (str_store_party_name, s7, "p_brothel_party"),
#      (assign, "$brothel_target_party", 0),
#      (party_set_flags, "p_brothel_party", pf_disabled, 1),
#      (display_message, "str_workshop_enemy"),
#      (play_sound, "snd_sabotagee"),
#    (try_end),
#    (try_begin),
#      (is_between, "$hidout_target_party", "p_town_1_1", "p_village_1_1"),
#      (store_faction_of_party, ":var7", "$brothel_target_party"),
#      (store_relation, ":var5", ":var7", "$wm_player_fac"),
#      (lt, ":var5", 0),
#      (str_store_party_name, s7, "p_ply_hideout"),
#      (assign, "$hidout_target_party", 0),
#      (assign, "$hideout_build_prison", 0),
#      (assign, "$hideout_build_torture", 0),
#      (party_set_flags, "p_ply_hideout", pf_disabled, 1),
#      (display_message, "str_workshop_enemy"),
#      (play_sound, "snd_sabotagee"),
#    (try_end),
#    (call_script, "script_player_faction_relation_rescan"),
#    (try_begin),
#      (eq, "$dayy_two", 1),
#      (store_random_in_range, "$glob_weather", 0, 3),
#      (try_begin),
#        (eq, "$glob_weather", 2),
#        (store_random_in_range, ":var26", 0, 2),
#        (eq, ":var26", 0),
#        (assign, "$glob_weather", 0),
#      (try_end),
#    (try_end),
#    (try_begin),
#      (eq, "$dayy_two", 1),
#      (troop_slot_ge, "trp_player", 16, 1),
#      (troop_get_slot, ":var31", "trp_player", 16),
#      (store_add, ":var32", "str_wound_0", ":var31"),
#      (str_store_string, s8, ":var32"),
#      (display_message, "str_health_status_s8"),
#    (try_end),
#    (try_begin),
#      (eq, "$dayy_three", 1),
#      (call_script, "script_bandit_party_spawn"),
#    (try_end),
#    (try_begin),
#      (eq, "$dayy_four", 1),
#      (call_script, "script_wm_wound_disease_event"),
#    (try_end),
#    (call_script, "script_lord_lady_mainland_sett"),
#    (try_begin),
#      (eq, "$dayy_four", 1),
#      (store_attribute_level, ":var33", "trp_player", 3),
#      (try_begin),
#        (gt, ":var33", 40),
#        (assign, ":var33", 40),
#      (try_end),
#      (assign, reg8, ":var33"),
#      (val_mul, ":var33", 2),
#      (assign, reg9, ":var33"),
#      (display_message, "str_charisma_train"),
#      (call_script, "script_exp_reward_for_common_troop", ":var33"),
#    (try_end),
#    (try_begin),
#      (eq, "$dayy_count", 2),
#      (gt, "$orphan_girl_troop_id", 0),
#      (lt, "$orphan_grown_count", 240),
#      (try_begin),
#        (ge, "$orphan_train_type", 23),
#        (store_skill_level, ":var34", "$orphan_train_type", "$orphan_girl_troop_id"),
#        (lt, ":var34", 9),
#        (troop_raise_skill, "$orphan_girl_troop_id", "$orphan_train_type", 1),
#      (else_try),
#        (eq, "$orphan_train_type", 1),
#        (store_attribute_level, ":var35", "$orphan_girl_troop_id", 0),
#        (lt, ":var35", 60),
#        (troop_raise_attribute, "$orphan_girl_troop_id", ca_strength, 1),
#        (troop_raise_proficiency, "$orphan_girl_troop_id", wpt_one_handed_weapon, 10),
#        (troop_raise_proficiency, "$orphan_girl_troop_id", wpt_two_handed_weapon, 10),
#        (troop_raise_proficiency, "$orphan_girl_troop_id", wpt_polearm, 10),
#      (else_try),
#        (eq, "$orphan_train_type", 2),
#        (store_attribute_level, ":var35", "$orphan_girl_troop_id", 1),
#        (lt, ":var35", 60),
#        (troop_raise_attribute, "$orphan_girl_troop_id", ca_agility, 1),
#        (troop_raise_proficiency, "$orphan_girl_troop_id", wpt_archery, 10),
#        (troop_raise_proficiency, "$orphan_girl_troop_id", wpt_crossbow, 10),
#        (troop_raise_proficiency, "$orphan_girl_troop_id", wpt_throwing, 10),
#        (troop_raise_proficiency, "$orphan_girl_troop_id", wpt_firearm, 10),
#      (else_try),
#        (eq, "$orphan_train_type", 3),
#        (store_attribute_level, ":var35", "$orphan_girl_troop_id", 3),
#        (lt, ":var35", 60),
#        (troop_raise_attribute, "$orphan_girl_troop_id", ca_charisma, 1),
#      (try_end),
#      (store_attribute_level, ":var35", "$orphan_girl_troop_id", 3),
#      (try_begin),
#        (ge, ":var35", 45),
#        (assign, "$orphan_girl_troop_id", "trp_tt_lady_orphan_05"),
#        (call_script, "script_orphan_skill_copy"),
#      (else_try),
#        (ge, ":var35", 35),
#        (assign, "$orphan_girl_troop_id", "trp_tt_lady_orphan_04"),
#        (call_script, "script_orphan_skill_copy"),
#      (else_try),
#        (ge, ":var35", 25),
#        (assign, "$orphan_girl_troop_id", "trp_tt_lady_orphan_03"),
#        (call_script, "script_orphan_skill_copy"),
#      (else_try),
#        (ge, ":var35", 15),
#        (assign, "$orphan_girl_troop_id", "trp_tt_lady_orphan_02"),
#        (call_script, "script_orphan_skill_copy"),
#      (try_end),
#      (val_add, "$orphan_grown_count", 1),
#    (try_end),
#    (try_begin),
#      (eq, "$dayy_count", 3),
#      (call_script, "script_slave_progress_try"),
#      (call_script, "script_qquest_lord_lady_sett"),
#      (try_begin),
#        (this_or_next|eq, "$trade_contract_a", 1),
#        (eq, "$trade_contract_b", 1),
#        (call_script, "script_respawn_player_traders_party"),
#      (try_end),
#      (call_script, "script_wm_party_quest_slot_sett"),
#    (try_end),
#    (try_begin),
#      (eq, "$dayy_count", 2),
#      (val_add, "$player_bath_cooltime", 1),
#      (try_begin),
#        (gt, "$player_bath_cooltime", 11),
#        (display_message, "str_player_bath_alarm", 0x00FF0000),
#        (call_script, "script_wm_troop_wound_disease_slot", "trp_player", 5),
#      (try_end),
#    (try_end),
#    (try_begin),
#      (eq, "$dayy_count", 1),
#      (call_script, "script_quest_party_spawn"),
#      (call_script, "script_quest_party_time_sett"),
#      (call_script, "script_quest_party_remove"),
#    (try_end),
#    (assign, ":var36", 0),
#    (assign, ":var37", 0),
#    (assign, ":var38", 0),
#    (assign, ":var39", 0),
#    (assign, ":var40", 0),
#    (assign, ":var41", 0),
#    (party_get_num_companion_stacks, ":var42", "p_main_party"),
#    (try_for_range, ":var43", 0, ":var42"),
#      (party_stack_get_troop_id, ":var44", "p_main_party", ":var43"),
#      (gt, ":var44", "trp_army_size_troop"),
#      (neg|troop_is_hero, ":var44"),
#      (party_stack_get_size, ":var45", "p_main_party", ":var43"),
#      (try_begin),
#        (gt, ":var45", 0),
#        (store_character_level, ":var46", ":var44"),
#        (try_begin),
#          (lt, ":var46", 18),
#          (val_add, ":var36", ":var45"),
#        (else_try),
#          (lt, ":var46", 21),
#          (val_add, ":var37", ":var45"),
#        (else_try),
#          (lt, ":var46", 25),
#          (val_add, ":var38", ":var45"),
#        (else_try),
#          (lt, ":var46", 28),
#          (val_add, ":var39", ":var45"),
#        (else_try),
#          (lt, ":var46", 30),
#          (val_add, ":var40", ":var45"),
#        (else_try),
#          (val_add, ":var41", ":var45"),
#        (try_end),
#      (try_end),
#    (try_end),
#    (store_add, ":var47", ":var40", ":var41"),
#    (store_add, ":var48", ":var47", ":var39"),
#    (try_begin),
#      (gt, ":var41", 20),
#      (store_sub, ":var49", ":var41", 20),
#      (call_script, "script_troop_recount_sett", ":var49", 1, 30, 1000),
#    (else_try),
#      (gt, ":var47", 40),
#      (store_sub, ":var49", ":var47", 40),
#      (call_script, "script_troop_recount_sett", ":var49", 1, 28, 30),
#    (else_try),
#      (gt, ":var48", 60),
#    (try_end),
#    (call_script, "script_lord_slot_troop_leader_state_fix"),
#    (try_begin),
#      (eq, "$dayy_count", 1),
#      (party_set_flags, "p_tournament_flag_1", pf_disabled, 1),
#      (party_set_flags, "p_tournament_flag_2", pf_disabled, 1),
#      (party_set_flags, "p_tournament_flag_3", pf_disabled, 1),
#      (party_set_flags, "p_tournament_flag_4", pf_disabled, 1),
#      (party_set_flags, "p_tournament_flag_5", pf_disabled, 1),
#      (party_set_flags, "p_tournament_flag_6", pf_disabled, 1),
#      (party_set_flags, "p_tournament_flag_7", pf_disabled, 1),
#      (party_set_flags, "p_tournament_flag_8", pf_disabled, 1),
#    (try_end),
#    (try_begin),
#      (eq, "$dayy_count", 2),
#      (store_random_in_range, "$tournament_place_1", "p_town_1_1", "p_village_1_1"),
#      (party_set_slot, "$tournament_place_1", 52, 1),
#      (party_relocate_near_party, "p_tournament_flag_1", "$tournament_place_1", 0),
#      (party_set_flags, "p_tournament_flag_1", pf_disabled, 0),
#      (party_set_icon, "p_tournament_flag_1", "icon_tournament_flag"),
#      (store_random_in_range, "$tournament_place_2", "p_town_1_1", "p_village_1_1"),
#      (party_set_slot, "$tournament_place_2", 52, 1),
#      (party_relocate_near_party, "p_tournament_flag_2", "$tournament_place_2", 0),
#      (party_set_flags, "p_tournament_flag_2", pf_disabled, 0),
#      (party_set_icon, "p_tournament_flag_2", "icon_tournament_flag"),
#      (store_random_in_range, "$tournament_place_3", "p_town_1_1", "p_village_1_1"),
#      (party_set_slot, "$tournament_place_3", 52, 1),
#      (party_relocate_near_party, "p_tournament_flag_3", "$tournament_place_3", 0),
#      (party_set_flags, "p_tournament_flag_3", pf_disabled, 0),
#      (party_set_icon, "p_tournament_flag_3", "icon_tournament_flag"),
#      (store_random_in_range, "$tournament_place_4", "p_town_1_1", "p_village_1_1"),
#      (party_set_slot, "$tournament_place_4", 52, 1),
#      (party_relocate_near_party, "p_tournament_flag_4", "$tournament_place_4", 0),
#      (party_set_flags, "p_tournament_flag_4", pf_disabled, 0),
#      (party_set_icon, "p_tournament_flag_4", "icon_tournament_flag"),
#      (store_random_in_range, "$tournament_place_5", "p_town_1_1", "p_village_1_1"),
#      (party_set_slot, "$tournament_place_5", 52, 1),
#      (party_relocate_near_party, "p_tournament_flag_5", "$tournament_place_5", 0),
#      (party_set_flags, "p_tournament_flag_5", pf_disabled, 0),
#      (party_set_icon, "p_tournament_flag_5", "icon_tournament_flag"),
#      (store_random_in_range, "$tournament_place_6", "p_town_1_1", "p_village_1_1"),
#      (party_set_slot, "$tournament_place_6", 52, 1),
#      (party_relocate_near_party, "p_tournament_flag_6", "$tournament_place_6", 0),
#      (party_set_flags, "p_tournament_flag_6", pf_disabled, 0),
#      (party_set_icon, "p_tournament_flag_6", "icon_tournament_flag"),
#      (store_random_in_range, "$tournament_place_7", "p_town_1_1", "p_village_1_1"),
#      (party_set_slot, "$tournament_place_7", 52, 1),
#      (party_relocate_near_party, "p_tournament_flag_7", "$tournament_place_7", 0),
#      (party_set_flags, "p_tournament_flag_7", pf_disabled, 0),
#      (party_set_icon, "p_tournament_flag_7", "icon_tournament_flag"),
#      (store_random_in_range, "$tournament_place_8", "p_town_1_1", "p_village_1_1"),
#      (party_set_slot, "$tournament_place_8", 52, 1),
#      (party_relocate_near_party, "p_tournament_flag_8", "$tournament_place_8", 0),
#      (party_set_flags, "p_tournament_flag_8", pf_disabled, 0),
#      (party_set_icon, "p_tournament_flag_8", "icon_tournament_flag"),
#    (try_end),
#    (store_random_in_range, ":var15", 0, 2),
#    (try_begin),
#      (eq, ":var15", 0),
#      (try_begin),
#        (eq, "$dayy_count", 1),
#        (call_script, "script_disaster_rand_execute", 11),
#      (else_try),
#        (eq, "$dayy_count", 2),
#        (call_script, "script_disaster_rand_execute", 1),
#      (else_try),
#        (eq, "$dayy_count", 3),
#        (call_script, "script_disaster_rand_execute", 2),
#      (else_try),
#        (eq, "$dayy_count", 4),
#        (call_script, "script_disaster_rand_execute", 3),
#      (else_try),
#        (eq, "$dayy_count", 5),
#        (call_script, "script_disaster_rand_execute", 4),
#      (else_try),
#        (eq, "$dayy_count", 6),
#        (call_script, "script_disaster_rand_execute", 8),
#      (else_try),
#        (eq, "$dayy_count", 7),
#        (call_script, "script_disaster_rand_execute", 10),
#      (try_end),
#    (try_end),
#    (call_script, "script_caravan_party_spawn"),
#    (try_begin),
#      (eq, "$dayy_count", 4),
#      (call_script, "script_wm_comp_separate", "$wm_comp_id_standby"),
#      (call_script, "script_resilience_progress"),
#    (try_end),
#    (try_begin),
#      (eq, "$g_sex_officer", "trp_player"),
#      (store_party_size_wo_prisoners, ":var50", "p_main_party"),
#      (gt, ":var50", 1),
#      (val_sub, ":var50", 1),
#      (try_begin),
#        (gt, ":var50", 20),
#        (store_random_in_range, ":var50", 10, 21),
#      (try_end),
#      (val_add, "$Sex_num", ":var50"),
#    (try_end),
#    (try_begin),
#      (eq, "$dayy_count", 5),
#      (assign, ":var51", 0),
#      (assign, ":var52", 0),
#      (try_begin),
#        (gt, "$wm_comp_id_1", 0),
#        (store_character_level, ":var46", "$wm_comp_id_1"),
#        (val_add, ":var52", ":var46"),
#      (try_end),
#      (try_begin),
#        (gt, "$wm_comp_id_2", 0),
#        (store_character_level, ":var46", "$wm_comp_id_2"),
#        (val_add, ":var52", ":var46"),
#      (try_end),
#      (try_begin),
#        (gt, "$wm_comp_id_3", 0),
#        (store_character_level, ":var46", "$wm_comp_id_3"),
#        (val_add, ":var52", ":var46"),
#      (try_end),
#      (try_begin),
#        (gt, "$wm_comp_id_4", 0),
#        (store_character_level, ":var46", "$wm_comp_id_4"),
#        (val_add, ":var52", ":var46"),
#      (try_end),
#      (try_begin),
#        (gt, "$wm_comp_id_5", 0),
#        (store_character_level, ":var46", "$wm_comp_id_5"),
#        (val_add, ":var52", ":var46"),
#      (try_end),
#      (val_mul, ":var52", 10),
#      (val_add, ":var51", ":var52"),
#      (assign, ":var53", 0),
#      (try_for_range, ":var54", "trp_elite_troops_01", "trp_elite_troops_end"),
#        (troop_slot_eq, ":var54", 35, 1),
#        (store_character_level, ":var46", ":var54"),
#        (val_mul, ":var46", 7),
#        (val_add, ":var53", ":var46"),
#      (try_end),
#      (val_add, ":var51", ":var53"),
#      (store_party_size_wo_prisoners, ":var55", "p_main_party"),
#      (val_sub, ":var55", 1),
#      (try_begin),
#        (is_between, "$contract_fac", "fac_kingdom_1", "fac_kingdoms_end"),
#        (eq, "$r_player_class", 0),
#        (assign, ":var55", 0),
#      (else_try),
#        (is_between, "$contract_fac", "fac_kingdom_1", "fac_kingdoms_end"),
#        (ge, ":var55", 500),
#        (val_div, ":var55", 4),
#      (else_try),
#        (lt, ":var55", 500),
#        (assign, ":var55", 0),
#      (else_try),
#        (gt, ":var55", 3),
#        (val_div, ":var55", 3),
#      (try_end),
#      (val_add, ":var51", ":var55"),
#      (assign, ":var56", 0),
#      (try_begin),
#        (is_between, "$ply_staying_party_no", "p_town_1_1", "p_village_1_1"),
#        (gt, "$ply_staying_army_size", 3),
#        (store_div, ":var56", "$ply_staying_army_size", 3),
#      (try_end),
#      (val_add, ":var51", ":var56"),
#      (assign, ":var57", 0),
#      (party_get_num_companion_stacks, ":var42", "p_main_party"),
#      (try_for_range, ":var43", 0, ":var42"),
#        (party_stack_get_troop_id, ":var44", "p_main_party", ":var43"),
#        (gt, ":var44", "trp_army_size_troop"),
#        (neg|troop_is_hero, ":var44"),
#        (party_stack_get_size, ":var45", "p_main_party", ":var43"),
#        (try_begin),
#          (gt, ":var45", 0),
#          (store_character_level, ":var46", ":var44"),
#          (store_sub, ":var27", ":var46", 10),
#          (try_begin),
#            (ge, ":var46", 25),
#            (troop_is_guarantee_horse, ":var44"),
#            (val_mul, ":var27", 3),
#          (try_end),
#          (val_add, ":var57", ":var27"),
#        (try_end),
#      (try_end),
#      (store_party_size_wo_prisoners, ":var50", "p_main_party"),
#      (try_begin),
#        (le, ":var50", 300),
#        (ge, ":var57", 2),
#        (val_div, ":var57", 2),
#      (try_end),
#      (try_begin),
#        (is_between, "$contract_fac", "fac_kingdom_1", "fac_kingdoms_end"),
#        (eq, "$r_player_class", 0),
#        (assign, ":var57", 0),
#      (else_try),
#        (is_between, "$contract_fac", "fac_kingdom_1", "fac_kingdoms_end"),
#        (ge, ":var57", 2),
#        (val_div, ":var57", 2),
#      (try_end),
#      (val_add, ":var51", ":var57"),
#      (try_begin),
#        (gt, "$policy_frugal", 0),
#        (le, "$policy_frugal", 5),
#        (store_mul, ":var58", "$policy_frugal", 5),
#        (store_sub, ":var59", 100, ":var58"),
#        (set_show_messages, 0),
#        (val_mul, ":var51", ":var59"),
#        (val_div, ":var51", 100),
#        (set_show_messages, 1),
#      (try_end),
#      (assign, ":var60", 0),
#      (try_begin),
#        (call_script, "script_ship_wage_counting", "$m_ship_type_1"),
#        (val_add, ":var60", "$temp"),
#        (call_script, "script_ship_wage_counting", "$m_ship_type_2"),
#        (val_add, ":var60", "$temp"),
#        (call_script, "script_ship_wage_counting", "$m_ship_type_3"),
#        (val_add, ":var60", "$temp"),
#        (call_script, "script_ship_wage_counting", "$m_ship_type_4"),
#        (val_add, ":var60", "$temp"),
#        (call_script, "script_ship_wage_counting", "$m_ship_type_5"),
#        (val_add, ":var60", "$temp"),
#      (try_end),
#      (try_begin),
#        (gt, ":var60", 3),
#        (store_party_size_wo_prisoners, ":var61", "p_main_party"),
#        (lt, ":var61", 200),
#        (val_div, ":var60", 3),
#      (try_end),
#      (try_begin),
#        (eq, "$pirate_king", 1),
#        (gt, ":var60", 3),
#        (val_div, ":var60", 3),
#      (try_end),
#      (try_begin),
#        (gt, "$policy_ship_manage", 0),
#        (le, "$policy_ship_manage", 5),
#        (store_mul, ":var58", "$policy_ship_manage", 6),
#        (store_sub, ":var59", 100, ":var58"),
#        (set_show_messages, 0),
#        (val_mul, ":var60", ":var59"),
#        (val_div, ":var60", 100),
#        (set_show_messages, 1),
#      (try_end),
#      (val_add, ":var51", ":var60"),
#      (troop_get_slot, ":var62", "trp_player", 42),
#      (try_begin),
#        (neq, ":var62", "p_main_party"),
#        (neg|is_between, ":var62", "p_temp_party", "p_reserved_5"),
#        (neq, ":var62", "p_reserved_5"),
#        (party_is_active, ":var62"),
#        (party_slot_eq, ":var62", 0, 5),
#        (val_add, ":var51", 500),
#      (try_end),
#      (troop_get_slot, ":var62", "trp_player", 43),
#      (try_begin),
#        (neq, ":var62", "p_main_party"),
#        (neg|is_between, ":var62", "p_temp_party", "p_reserved_5"),
#        (neq, ":var62", "p_reserved_5"),
#        (party_is_active, ":var62"),
#        (party_slot_eq, ":var62", 0, 5),
#        (val_add, ":var51", 500),
#      (try_end),
#      (try_begin),
#        (gt, "$workshop_slave", 50),
#        (val_add, ":var51", "$workshop_slave"),
#      (try_end),
#      (try_begin),
#        (call_script, "script_party_money_level_ge", "p_main_party", ":var51"),
#        (neq, "$wm_mo_continue", 1),
#        (call_script, "script_party_army_size_execute", "p_main_party", 90, 3),
#        (call_script, "script_moral_level_diff", "p_main_party", -10),
#        (display_message, "str_nomoney", 0x00FF0000),
#      (try_end),
#      (display_message, "str_ala_payday", 0x00FFFF00),
#      (call_script, "script_party_money_level_diff", "p_main_party", ":var51", 34),
#    (try_end),
#    (try_begin),
#      (gt, "$need_meeting_loose", 0),
#      (val_sub, "$need_meeting_loose", 1),
#      (display_message, "str_ala_meeting", 0x00FFFF00),
#    (try_end),
#    (try_begin),
#      (gt, "$need_meeting_for_ai", 0),
#      (le, "$need_meeting_loose", 0),
#      (store_random_in_range, ":var63", 0, 10),
#      (try_begin),
#        (try_begin),
#          (eq, "$opinion_suggester", 4),
#          (val_add, ":var63", 2),
#        (try_end),
#        (try_begin),
#          (eq, "$need_meeting_for_ai", 11),
#          (ge, ":var63", 3),
#          (call_script, "script_wm_fac_relation_set", "$wm_player_fac", "$sugester_faction", -10),
#          (faction_set_slot, "$wm_player_fac", 4, "$declare_war_term"),
#        (else_try),
#          (ge, ":var63", 3),
#          (this_or_next|eq, "$need_meeting_for_ai", 12),
#          (eq, "$need_meeting_for_ai", 2),
#          (call_script, "script_wm_fac_relation_set", "$wm_player_fac", "$sugester_faction", 10),
#        (else_try),
#          (ge, ":var63", 5),
#          (this_or_next|eq, "$need_meeting_for_ai", 13),
#          (eq, "$need_meeting_for_ai", 3),
#          (call_script, "script_wm_fac_relation_set", "$wm_player_fac", "$sugester_faction", 30),
#        (else_try),
#          (ge, ":var63", 5),
#          (this_or_next|eq, "$need_meeting_for_ai", 14),
#          (eq, "$need_meeting_for_ai", 4),
#          (call_script, "script_wm_fac_relation_set", "$wm_player_fac", "$sugester_faction", 90),
#        (else_try),
#          (eq, "$need_meeting_for_ai", 15),
#          (ge, ":var63", 3),
#          (call_script, "script_temporary_policy_excute", 1, "$wm_player_fac"),
#        (else_try),
#          (eq, "$need_meeting_for_ai", 16),
#          (ge, ":var63", 3),
#          (call_script, "script_temporary_policy_excute", 2, "$wm_player_fac"),
#        (else_try),
#          (eq, "$need_meeting_for_ai", 17),
#          (ge, ":var63", 3),
#          (call_script, "script_temporary_policy_excute", 3, "$wm_player_fac"),
#        (try_end),
#      (try_end),
#      (assign, "$need_meeting_for_ai", 0),
#      (assign, "$sugester_faction", 0),
#      (assign, "$need_meeting_loose", 0),
#      (display_message, "str_ala_meet_cancel", 0x00FFFF00),
#    (try_end),
#    (try_begin),
#      (gt, "$ruin_qst_target_num", 0),
#      (gt, "$ruin_qst_remain_turn", 0),
#      (neg|party_slot_ge, "$ruin_qst_target_num", 3, 3),
#      (val_sub, "$ruin_qst_remain_turn", 1),
#      (assign, reg8, "$ruin_qst_remain_turn"),
#      (str_store_party_name, s11, "$ruin_qst_target_num"),
#      (store_sub, ":var31", "$ruin_qst_target_num", "p_ruin_1"),
#      (store_add, ":var32", "str_r_clue_001", ":var31"),
#      (str_store_string, s12, ":var32"),
#      (str_store_party_name, s13, "$ruin_qst_giver_loc"),
#      (display_message, "str_ruin_quest_mess", 0x00FFFFFF),
#    (else_try),
#      (gt, "$ruin_qst_target_num", 0),
#      (le, "$ruin_qst_remain_turn", 0),
#      (str_store_party_name, s11, "$ruin_qst_giver_loc"),
#      (display_message, "str_fail_rep", 0x00FFFFFF),
#    (else_try),
#      (gt, "$ruin_qst_target_num", 0),
#      (party_slot_ge, "$ruin_qst_target_num", 3, 3),
#      (str_store_party_name, s11, "$ruin_qst_giver_loc"),
#      (display_message, "str_succ_rep", 0x00FFFFFF),
#    (try_end),
#    (assign, "$wm_try_duel", 0),
#    (assign, "$wm_steal_try", 0),
#    (call_script, "script_rand_glob_dice"),
#    (party_set_morale, "p_main_party", 100),
#    (try_begin),
#      (is_between, "$ply_staying_party_no", "p_town_1_1", "p_village_1_1"),
#      (store_party_size_wo_prisoners, ":var50", "p_main_party"),
#      (store_faction_of_party, ":var4", "$ply_staying_party_no"),
#      (store_relation, ":var10", "$wm_player_fac", ":var4"),
#      (this_or_next|lt, ":var10", 0),
#      (gt, ":var50", 300),
#      (assign, "$ply_staying_party_no", 0),
#      (assign, "$ply_staying_army_size", 0),
#      (assign, "$ply_staying_army_recruit_on", 0),
#      (display_message, "str_t_armystay_disband_enemy", 0x00FF0000),
#    (else_try),
#      (neg|is_between, "$ply_staying_party_no", "p_town_1_1", "p_village_1_1"),
#      (assign, "$ply_staying_party_no", 0),
#      (assign, "$ply_staying_army_size", 0),
#      (assign, "$ply_staying_army_recruit_on", 0),
#    (try_end),
#    (call_script, "script_init_main_party_core_slot"),
#    (call_script, "script_paohu_r18_control"),
#  ]),

 (0, 0, 168,[],
  [
    (try_begin), #Fief-related disease
      (ge, "$weekk_count", 4),
      (assign, "$weekk_count", 1),
    (else_try),
      (val_add, "$weekk_count", 1),
    (try_end),
	  ]), #Moved up.
#    (try_begin),
#      (this_or_next|eq, "$weekk_count", 2),
#      (eq, "$weekk_count", 4),
#      (try_begin),
#        (gt, "$main_q_step", 0),
#        (lt, "$main_q_step", 19),
#        (display_message, "str_mq_camp_menu_tip_ala", 0x00FFFF00),
#      (try_end),
#      (store_attribute_level, ":var0", "trp_player", 2),
#      (try_begin),
#        (gt, ":var0", 40),
#        (assign, ":var0", 40),
#      (try_end),
#      (assign, reg8, ":var0"),
#      (val_mul, ":var0", 5),
#      (assign, reg9, ":var0"),
#      (display_message, "str_int_exp_rep"),
#      (call_script, "script_int_exp_diff", ":var0"),
#    (try_end),
#    (try_begin),
#      (ge, "$weekk_count", 2),
#      (try_for_range, ":var1", "p_pyongyang", "p_place_end"),
#        (store_faction_of_party, ":var2", ":var1"),
#        (eq, ":var2", "fac_neutral"),
#        (party_set_flags, ":var1", pf_disabled, 1),
#      (try_end),
#    (try_end),
#    (try_begin),
#      (eq, "$start_age", 1184),
#      (try_for_range, ":var1", "p_wasteland1", "p_ruin_1"),
#        (party_set_flags, ":var1", pf_disabled, 1),
#      (try_end),
#    (try_end),
#    (call_script, "script_error_party_remove"),
# ]),


  #(0, 0, 24,[], #24 default
  (0, 0, 24,[], #24 default
  [
  (eq, "$fief_disasters", 1),
    #     (troop_get_slot, ":skill_slot", "trp_player", 35), #Change 35 to another skill, and increase chance_skill to at least 11 so that there is always a chance.
	#	#(store_skill_level, ":leadership_level", "skl_leadership", "p_main_party"),
	#	#  #(store_skill_level, ":leadership_level", "skl_leadership", "trp_player"),
         #(assign, reg10, "$kaos_kings_kingdom"),
         #(str_clear, s10),
		 #(str_store_string, s10, "@LEVELS: {reg10}"),
		 #(display_message, s10),
#  (store_skill_level, ":skill_pathfind", "skl_pathfinding", "trp_player"),
#  (store_skill_level, ":skill_spotting", "skl_spotting", "trp_player"),
#        (val_add, ":skill_pathfind", ":skill_spotting"),
#          (assign, reg10, ":skill_pathfind"),
#          (str_clear, s10),
#          (str_store_string, s10, "@LEVELS: {reg10}"),
#		  (display_message, s10),
  #skl_spotting             = 13
#skl_pathfinding          = 14

    (try_begin), #Fief-related disease
      (ge, "$dayy_count", 7),
      (assign, "$dayy_count", 1),
    (else_try),
      (val_add, "$dayy_count", 1),
    (try_end),
#    (try_begin),
#      (eq, "$dayy_two", 1),
#      (assign, "$dayy_two", 0),
#    (else_try),
#      (assign, "$dayy_two", 1),
#    (try_end),
#    (try_begin),
#      (ge, "$dayy_three", 3),
#      (assign, "$dayy_three", 1),
#    (else_try),
#      (val_add, "$dayy_three", 1),
#    (try_end),
#    (try_begin),
#      (ge, "$dayy_four", 4),
#      (assign, "$dayy_four", 1),
#    (else_try),
#      (val_add, "$dayy_four", 1),
#    (try_end),
#    (try_begin),
#      (gt, "$main_q_day", 0),
#      (val_sub, "$main_q_day", 1),
#      (try_begin),
#        (eq, "$main_q_step", 3),
#        (assign, reg8, "$main_q_day"),
#        (display_message, "str_mq_1_3b"),
#      (try_end),
#    (try_end),
#    (call_script, "script_wm_check_faction_castle_num_regular_activate"),
#    (call_script, "script_check_faction_army_power_and_food"),
#    (try_for_range, ":var0", "fac_kingdom_1", "fac_undeads"),
#      (faction_slot_eq, ":var0", 30, 1),
#      (neq, ":var0", "fac_kingdoms_end"),
#      (faction_get_slot, ":var1", ":var0", 25),
#      (faction_get_slot, ":var2", ":var0", 20),
#      (faction_get_slot, ":var3", ":var0", 28),
#      (try_begin),
#        (is_between, ":var2", "p_pyongyang", "p_place_end"),
#        (store_faction_of_party, ":var4", ":var2"),
#        (neg|faction_slot_eq, ":var4", 30, 1),
#        (faction_set_slot, ":var0", 20, 1),
#        (faction_set_slot, ":var0", 28, 0),
#      (else_try),
#        (le, ":var3", 0),
#        (lt, ":var1", 25000),
#        (faction_set_slot, ":var0", 20, 1),
#        (faction_set_slot, ":var0", 28, 0),
#      (else_try),
#        (is_between, ":var2", "p_pyongyang", "p_place_end"),
#        (store_faction_of_party, ":var4", ":var2"),
#        (eq, ":var4", ":var0"),
#        (faction_set_slot, ":var0", 20, 1),
#        (faction_set_slot, ":var0", 28, 0),
#      (else_try),
#        (is_between, ":var2", "p_pyongyang", "p_place_end"),
#        (store_faction_of_party, ":var4", ":var2"),
#        (store_relation, ":var5", ":var4", ":var0"),
#        (ge, ":var5", 0),
#        (faction_set_slot, ":var0", 20, 1),
#        (faction_set_slot, ":var0", 28, 0),
#      (else_try),
#        (neq, ":var2", 1),
#        (neg|is_between, ":var2", "p_pyongyang", "p_place_end"),
#        (faction_set_slot, ":var0", 20, 1),
#        (faction_set_slot, ":var0", 28, 0),
#      (try_end),
#      (faction_get_slot, ":var2", ":var0", 20),
#      (ge, ":var1", 25000),
#      (eq, ":var2", 1),
#      (call_script, "script_temp_save_number11_initialize"),
#      (try_for_range, ":var6", "p_pyongyang", "p_place_end"),
#        (store_faction_of_party, ":var7", ":var6"),
#        (eq, ":var7", ":var0"),
#        (try_for_range, ":var8", 53, 63),
#          (party_get_slot, ":var9", ":var6", ":var8"),
#          (store_faction_of_party, ":var4", ":var9"),
#          (faction_slot_eq, ":var4", 30, 1),
#          (store_relation, ":var10", ":var0", ":var4"),
#          (lt, ":var10", 0),
#          (call_script, "script_party_count_fit_for_battle", ":var9"),
#          (assign, ":var11", reg0),
#          (lt, ":var11", 11000),
#          (call_script, "script_temp_save_number11_inject", ":var9"),
#        (try_end),
#      (try_end),
#      (call_script, "script_temp_save_number11_choice_rand"),
#      (try_begin),
#        (is_between, "$wm_target_number11", "p_pyongyang", "p_place_end"),
#        (store_faction_of_party, ":var4", "$wm_target_number11"),
#        (faction_slot_eq, ":var4", 30, 1),
#        (store_relation, ":var10", ":var0", ":var4"),
#        (lt, ":var10", 0),
#        (faction_set_slot, ":var0", 20, "$wm_target_number11"),
#        (try_begin),
#          (ge, ":var0", "fac_kingdom_1"),
#          (this_or_next|eq, ":var0", "$contract_fac"),
#          (eq, ":var0", "$wm_player_fac"),
#          (str_store_party_name, s1, "$wm_target_number11"),
#          (display_message, "str_attack_targett", 0x00FF0000),
#          (party_relocate_near_party, "p_attack_target", "$wm_target_number11", 0),
#          (party_set_flags, "p_attack_target", pf_disabled, 0),
#          (party_set_icon, "p_attack_target", "icon_attack_target"),
#        (try_end),
#      (else_try),
#        (neg|is_between, "$wm_target_number11", "p_pyongyang", "p_place_end"),
#        (call_script, "script_temp_save_number11_initialize"),
#        (try_for_range, ":var6", "p_pyongyang", "p_place_end"),
#          (store_faction_of_party, ":var7", ":var6"),
#          (eq, ":var7", ":var0"),
#          (try_for_range, ":var8", 53, 63),
#            (party_get_slot, ":var9", ":var6", ":var8"),
#            (store_faction_of_party, ":var4", ":var9"),
#            (faction_slot_eq, ":var4", 30, 1),
#            (store_relation, ":var10", ":var0", ":var4"),
#            (lt, ":var10", 0),
#            (call_script, "script_temp_save_number11_inject", ":var9"),
#          (try_end),
#        (try_end),
#        (call_script, "script_temp_save_number11_choice_rand"),
#        (try_begin),
#          (is_between, "$wm_target_number11", "p_pyongyang", "p_place_end"),
#          (store_faction_of_party, ":var4", "$wm_target_number11"),
#          (faction_slot_eq, ":var4", 30, 1),
#          (store_relation, ":var10", ":var0", ":var4"),
#          (lt, ":var10", 0),
#          (faction_set_slot, ":var0", 20, "$wm_target_number11"),
#          (try_begin),
#            (ge, ":var0", "fac_kingdom_1"),
#            (this_or_next|eq, ":var0", "$contract_fac"),
#            (eq, ":var0", "$wm_player_fac"),
#            (str_store_party_name, s1, "$wm_target_number11"),
#            (display_message, "str_attack_targett", 0x00FF0000),
#            (party_relocate_near_party, "p_attack_target", "$wm_target_number11", 0),
#            (party_set_flags, "p_attack_target", pf_disabled, 0),
#            (party_set_icon, "p_attack_target", "icon_attack_target"),
#          (try_end),
#        (try_end),
#      (try_end),
#      (try_begin),
#        (ge, ":var0", "fac_kingdom_1"),
#        (this_or_next|eq, ":var0", "$contract_fac"),
#        (eq, ":var0", "$wm_player_fac"),
#        (faction_get_slot, ":var12", ":var0", 20),
#        (neg|is_between, ":var12", "p_pyongyang", "p_place_end"),
#        (party_set_flags, "p_attack_target", pf_disabled, 1),
#      (try_end),
#    (try_end),
#    (try_begin),
#      (eq, "$dayy_count", 6),
#      (call_script, "script_wm_turn_dev_output_div_build_ai"),
#    (try_end),
#    (try_begin),
#      (eq, "$dayy_count", 1),
#      (call_script, "script_faction_public_opinion_sett"),
#      (call_script, "script_check_faction_border_faction"),
#      (call_script, "script_no_border_faction_enemy_peace"),
#      (try_begin),
#        (eq, "$weekk_count", 1),
#        (call_script, "script_rand_between_faction_diplomacy", "fac_kingdom_1", "fac_kingdom_16"),
#        (call_script, "script_wm_trade_price_try_for"),
#      (else_try),
#        (eq, "$weekk_count", 2),
#        (call_script, "script_rand_between_faction_diplomacy", "fac_kingdom_17", "fac_kingdom_32"),
#        (call_script, "script_wm_place_owner_sett_scan", 1),
#      (else_try),
#        (eq, "$weekk_count", 3),
#        (call_script, "script_rand_between_faction_diplomacy", "fac_kingdom_33", "fac_kingdom_48"),
#        (call_script, "script_wm_trade_price_try_for"),
#      (else_try),
#        (eq, "$weekk_count", 4),
#        (call_script, "script_rand_between_faction_diplomacy", "fac_kingdom_49", "fac_japan_people"),
#        (call_script, "script_wm_place_owner_sett_scan", 1),
#      (try_end),
#    (try_end),
 #   (try_begin),
 #     (eq, "$dayy_count", 2),
 #     (try_begin),
 #       (gt, "$ai_holywar_delay", 0),
 #       (val_sub, "$ai_holywar_delay", 1),
 #     (try_end),
 #     (try_begin),
 #       (le, "$ai_holywar_delay", 0),
 #       (store_random_in_range, ":var13", 0, 10),
 #       (try_begin),
 #         (eq, ":var13", 0),
 #         (call_script, "script_ai_rand_holywar"),
 #       (else_try),
 #         (eq, ":var13", 1),
 #         (this_or_next|eq, "$start_age", 0),
 #         (eq, "$start_age", 1184),
 #         (store_faction_of_party, ":var7", "p_jerusalem"),
 #         (faction_get_slot, ":var14", ":var7", 27),
 #         (try_begin),
 #           (neq, ":var14", 1),
 #           (call_script, "script_holywar_reln_set", 1, ":var14", "p_jerusalem"),
 #         (else_try),
 #           (neq, ":var14", 3),
 #           (call_script, "script_holywar_reln_set", 3, ":var14", "p_jerusalem"),
 #         (try_end),
 #       (try_end),
 #     (try_end),
 #   (try_end),
    (try_begin), #Fief-related disease
      (eq, "$dayy_count", 3),  #DEFAULT
	  
	  ###DEBUG
	  #(this_or_next|le, "$dayy_count", 3), 
	  #(ge, "$dayy_count", 3), 
	  ##DEBUG
	  
      (store_random_in_range, ":var15", 0, 2), #0, 2 = default
      (try_begin),
        (eq, ":var15", 0),
        (try_begin),
          (eq, "$weekk_count", 1),
          (call_script, "script_disaster_rand_execute", 9),
		  #(display_message, "@TESTING THE DISEASES!", 0x0032CD32), #TESTING THE DISEASES
        (else_try),
          (eq, "$weekk_count", 2),
          (call_script, "script_disaster_rand_execute", 7),
		  #(display_message, "@TESTING THE DISEASES!", 0x0032CD32), #TESTING THE DISEASES
          #(call_script, "script_npc_courtship_event"),
        (else_try),
          (eq, "$weekk_count", 3),
          (call_script, "script_disaster_rand_execute", 6),
		  #(display_message, "@TESTING THE DISEASES!", 0x0032CD32), #TESTING THE DISEASES
        (else_try),
          (eq, "$weekk_count", 4),
          (call_script, "script_disaster_rand_execute", 5),
		  #(display_message, "@TESTING THE DISEASES!", 0x0032CD32), #TESTING THE DISEASES
          #(call_script, "script_npc_courtship_event"),
        (try_end),
      (try_end),
      #(store_random_in_range, "$temp_glob_rand_1", 1081, 1252),
      #(store_random_in_range, "$temp_glob_rand_2", 1081, 1252),
      #(store_random_in_range, "$temp_glob_rand_3", 1081, 1252),
      #(store_random_in_range, "$temp_glob_rand_4", 1081, 1252),
      #(store_random_in_range, "$temp_glob_rand_5", 1081, 1252),
      #(store_random_in_range, "$temp_glob_rand_6", 1081, 1252),
      #(store_random_in_range, "$temp_glob_rand_7", 1081, 1252),
    (try_end),
#    (try_begin),
#      (eq, "$dayy_count", 5),
#      (try_for_range, ":var16", "fac_kingdom_1", "fac_undeads"),
#        (faction_slot_eq, ":var16", 30, 1),
#        (try_for_range, ":var8", 56, 76),
#          (faction_get_slot, ":var17", ":var16", ":var8"),
#          (gt, ":var17", 0),
#          (neg|is_between, ":var17", "p_temp_party", "p_reserved_5"),
#          (neq, ":var17", "p_reserved_5"),
#          (party_is_active, ":var17"),
#          (party_slot_eq, ":var17", 0, 1),
#          (party_stack_get_troop_id, ":var18", ":var17", 0),
#          (this_or_next|is_between, ":var18", "trp_tt_lord_01_00", "trp_tt_lord_end"),
#          (is_between, ":var18", "trp_temp_commander_fac_01", "trp_temp_commander_end"),
#          (assign, ":var19", 100),
#          (store_div, ":var20", ":var19", 5),
#          (call_script, "script_ai_equip_supp_depend_fac", ":var17", ":var20", ":var16"),
#        (try_end),
#      (try_end),
#      (try_begin),
#        (assign, ":var21", "p_main_party"),
#        (try_begin),
#          (neq, "$supp_equip_01", 1),
#          (party_set_slot, ":var21", 30, 0),
#        (try_end),
#        (try_begin),
#          (neq, "$supp_equip_02", 1),
#          (party_set_slot, ":var21", 31, 0),
#        (try_end),
#        (try_begin),
#          (neq, "$supp_equip_03", 1),
#          (party_set_slot, ":var21", 32, 0),
#        (try_end),
#        (try_begin),
#          (neq, "$supp_equip_04", 1),
#          (party_set_slot, ":var21", 33, 0),
#        (try_end),
#        (try_begin),
#          (neq, "$supp_equip_05", 1),
#          (party_set_slot, ":var21", 34, 0),
#        (try_end),
#        (try_begin),
#          (neq, "$supp_equip_06", 1),
#          (party_set_slot, ":var21", 35, 0),
#        (try_end),
#        (try_begin),
#          (neq, "$supp_equip_07", 1),
#          (party_set_slot, ":var21", 36, 0),
#        (try_end),
#        (try_begin),
#          (neq, "$supp_equip_08", 1),
#          (party_set_slot, ":var21", 37, 0),
#        (try_end),
#        (try_begin),
#          (neq, "$supp_equip_09", 1),
#          (party_set_slot, ":var21", 38, 0),
#        (try_end),
#        (try_begin),
#          (neq, "$supp_equip_10", 1),
#          (party_set_slot, ":var21", 39, 0),
#        (try_end),
#        (try_begin),
#          (neq, "$supp_equip_11", 1),
#          (party_set_slot, ":var21", 40, 0),
#        (try_end),
#        (try_begin),
#          (neq, "$supp_equip_12", 1),
#          (party_set_slot, ":var21", 41, 0),
#        (try_end),
#        (try_begin),
#          (neq, "$supp_equip_13", 1),
#          (party_set_slot, ":var21", 42, 0),
#        (try_end),
#        (assign, ":var22", 0),
#        (try_begin),
#          (eq, "$supp_equip_01", 1),
#          (val_add, ":var22", 1),
#        (try_end),
#        (try_begin),
#          (eq, "$supp_equip_02", 1),
#          (val_add, ":var22", 1),
#        (try_end),
#        (try_begin),
#          (eq, "$supp_equip_03", 1),
#          (val_add, ":var22", 1),
#        (try_end),
#        (try_begin),
#          (eq, "$supp_equip_04", 1),
#          (val_add, ":var22", 1),
#        (try_end),
#        (try_begin),
#          (eq, "$supp_equip_05", 1),
#          (val_add, ":var22", 1),
#        (try_end),
#        (try_begin),
#          (eq, "$supp_equip_06", 1),
#          (val_add, ":var22", 1),
#        (try_end),
#        (try_begin),
#          (eq, "$supp_equip_07", 1),
#          (val_add, ":var22", 1),
#        (try_end),
#        (try_begin),
#          (eq, "$supp_equip_08", 1),
#          (val_add, ":var22", 1),
#        (try_end),
#        (try_begin),
#          (eq, "$supp_equip_09", 1),
#          (val_add, ":var22", 1),
#        (try_end),
#        (try_begin),
#          (eq, "$supp_equip_10", 1),
#          (val_add, ":var22", 1),
#        (try_end),
#        (try_begin),
#          (eq, "$supp_equip_11", 1),
#          (val_add, ":var22", 1),
#        (try_end),
#        (try_begin),
#          (eq, "$supp_equip_12", 1),
#          (val_add, ":var22", 1),
#        (try_end),
#        (try_begin),
#          (eq, "$supp_equip_13", 1),
#          (val_add, ":var22", 1),
#        (try_end),
#        (gt, ":var22", 0),
#        (assign, ":var19", 100),
#        (assign, ":var23", 5000),
#        (store_div, ":var20", ":var19", ":var22"),
#        (store_div, ":var24", ":var23", ":var22"),
#        (try_begin),
#          (eq, "$supp_equip_01", 1),
#          (call_script, "script_equip_supp_to_party", ":var21", 30, ":var20", ":var24"),
#        (try_end),
#        (try_begin),
#          (eq, "$supp_equip_02", 1),
#          (call_script, "script_equip_supp_to_party", ":var21", 31, ":var20", ":var24"),
#        (try_end),
#        (try_begin),
#          (eq, "$supp_equip_03", 1),
#          (call_script, "script_equip_supp_to_party", ":var21", 32, ":var20", ":var24"),
#        (try_end),
#        (try_begin),
#          (eq, "$supp_equip_04", 1),
#          (call_script, "script_equip_supp_to_party", ":var21", 33, ":var20", ":var24"),
#        (try_end),
#        (try_begin),
#          (eq, "$supp_equip_05", 1),
#          (call_script, "script_equip_supp_to_party", ":var21", 34, ":var20", ":var24"),
#        (try_end),
#        (try_begin),
#          (eq, "$supp_equip_06", 1),
#          (call_script, "script_equip_supp_to_party", ":var21", 35, ":var20", ":var24"),
#        (try_end),
#        (try_begin),
#          (eq, "$supp_equip_07", 1),
#          (call_script, "script_equip_supp_to_party", ":var21", 36, ":var20", ":var24"),
#        (try_end),
#        (try_begin),
#          (eq, "$supp_equip_08", 1),
#          (call_script, "script_equip_supp_to_party", ":var21", 37, ":var20", ":var24"),
#        (try_end),
#        (try_begin),
#          (eq, "$supp_equip_09", 1),
#          (call_script, "script_equip_supp_to_party", ":var21", 38, ":var20", ":var24"),
#        (try_end),
#        (try_begin),
#          (eq, "$supp_equip_10", 1),
#          (call_script, "script_equip_supp_to_party", ":var21", 39, ":var20", ":var24"),
#        (try_end),
#        (try_begin),
#          (eq, "$supp_equip_11", 1),
#          (call_script, "script_equip_supp_to_party", ":var21", 40, ":var20", ":var24"),
#        (try_end),
#        (try_begin),
#          (eq, "$supp_equip_12", 1),
#          (call_script, "script_equip_supp_to_party", ":var21", 41, ":var20", ":var24"),
#        (try_end),
#        (try_begin),
#          (eq, "$supp_equip_13", 1),
#          (call_script, "script_equip_supp_to_party", ":var21", 42, ":var20", ":var24"),
#        (try_end),
#      (try_end),
#      (try_begin),
#        (eq, "$r_player_class", 5),
#        (party_set_slot, "p_main_party", 41, 1000),
#      (else_try),
#        (eq, "$r_player_class", 3),
#        (party_set_slot, "p_main_party", 38, 1000),
#      (try_end),
#      (try_begin),
#        (gt, "$workshop_target_party", 0),
#        (gt, "$workshop_slave", 50),
#        (is_between, "$wm_player_fac", "fac_kingdom_1", "fac_kingdoms_end"),
#        (faction_slot_eq, "$wm_player_fac", 6, 0),
#        (display_message, "str_slave_not_fac", 0x00FF9000),
#        (call_script, "script_wm_honor_change_diff", "trp_player", 2, 34),
#      (try_end),
#      (try_for_range, ":var0", "fac_kingdom_1", "fac_undeads"),
#        (faction_get_slot, ":var3", ":var0", 28),
#        (gt, ":var3", 0),
#        (val_sub, ":var3", 1),
#        (faction_set_slot, ":var0", 28, ":var3"),
#      (try_end),
#    (try_end),
#    (try_begin),
#      (gt, "$qquest_type", 0),
#      (le, "$qquest_time_day", 0),
#      (call_script, "script_qquest_initialize"),
#      (display_message, "str_questfail_time", 0x00FFFF00),
#    (else_try),
#      (gt, "$qquest_time_day", 0),
#      (neq, "$qquest_progress", 1),
#      (val_sub, "$qquest_time_day", 1),
#    (try_end),
#    (try_begin),
#      (neq, "$qquest_type", 23),
#      (neq, "$qquest_type", 24),
#      (party_set_flags, "p_for_quest_villa", pf_disabled, 1),
#      (party_set_flags, "p_for_quest_villa", pf_always_visible, 0),
#    (try_end),
#    (try_begin),
#      (is_between, "$workshop_target_party", "p_pyongyang", "p_place_end"),
#      (store_faction_of_party, ":var7", "$workshop_target_party"),
#      (store_relation, ":var5", ":var7", "$wm_player_fac"),
#      (party_get_slot, ":var25", "$workshop_target_party", 11),
#      (try_begin),
#        (lt, ":var5", 0),
#        (str_store_party_name, s7, "p_workshop_party"),
#        (assign, "$workshop_target_party", 0),
#        (assign, "$workshop_slave", 0),
#        (party_set_flags, "p_workshop_party", pf_disabled, 1),
#        (display_message, "str_workshop_enemy"),
#        (play_sound, "snd_sabotagee"),
#      (else_try),
#        (neq, ":var25", "$workshop_target_res_slot"),
#        (str_store_party_name, s7, "p_workshop_party"),
#        (str_store_item_name, s8, "$workshop_target_product"),
#        (assign, "$workshop_target_party", 0),
#        (assign, "$workshop_slave", 0),
#        (party_set_flags, "p_workshop_party", pf_disabled, 1),
#        (display_message, "str_workshop_depleted"),
#      (else_try),
#        (gt, "$workshop_slave", 50),
#        (store_random_in_range, ":var26", 0, 4),
#        (store_mul, ":var27", 25, 5),
#        (try_begin),
#          (eq, "$workshop_work_level", ":var27"),
#          (ge, ":var26", 1),
#          (val_sub, "$workshop_slave", 1),
#        (else_try),
#          (eq, "$workshop_work_level", 100),
#          (ge, ":var26", 2),
#          (val_sub, "$workshop_slave", 1),
#        (else_try),
#          (eq, "$workshop_work_level", 75),
#          (ge, ":var26", 3),
#          (val_sub, "$workshop_slave", 1),
#        (try_end),
#        (store_mul, ":var28", "$workshop_slave", "$workshop_work_level"),
#        (val_div, ":var28", 100),
#        (val_add, "$workshop_product_cur", ":var28"),
#        (try_begin),
#          (gt, "$workshop_product_cur", "$workshop_target_price"),
#          (val_sub, "$workshop_product_cur", "$workshop_target_price"),
#          (val_add, "$workshop_product_stock", 1),
#          (try_begin),
#            (gt, "$workshop_product_stock", 10),
#            (assign, "$workshop_product_stock", 10),
#          (try_end),
#        (try_end),
#      (try_end),
#    (try_end),
#    (try_begin),
#      (neg|is_between, "$contract_fac", "fac_kingdom_1", "fac_kingdoms_end"),
#      (gt, "$contract_time", 0),
#      (assign, "$contract_time", 0),
#    (try_end),
#    (try_begin),
#      (le, "$contract_time", 0),
#      (assign, "$contract_fac", 0),
#    (try_end),
#    (try_begin),
#      (gt, "$contract_time", 0),
#      (val_sub, "$contract_time", 1),
#      (is_between, "$contract_fac", "fac_kingdom_1", "fac_kingdoms_end"),
#      (assign, ":var29", "$contract_fac"),
#      (try_for_range, ":var0", "fac_kingdom_1", "fac_undeads"),
#        (neq, ":var0", ":var29"),
#        (faction_slot_eq, ":var0", 30, 1),
#        (call_script, "script_wm_copy_faction_relation", ":var29", ":var0", ":var29"),
#      (try_end),
#      (call_script, "script_troop_contribution_diff", "trp_player", 1, 34),
#    (try_end),
#    (try_begin),
#      (is_between, "$contract_fac", "fac_kingdom_1", "fac_kingdoms_end"),
#      (set_show_messages, 0),
#      (troop_get_slot, ":var30", "trp_player", 20),
#      (val_div, ":var30", 23),
#      (set_show_messages, 1),
#      (try_begin),
#        (le, ":var30", 0),
#        (call_script, "script_wm_mercenary_dispose"),
#        (display_message, "str_merc_too_lazy", 0x00FF9000),
#      (else_try),
#        (le, "$contract_time", 0),
#        (call_script, "script_wm_mercenary_dispose"),
#      (try_end),
#    (try_end),
#    (try_begin),
#      (is_between, "$wm_player_fac", "fac_kingdom_1", "fac_kingdoms_end"),
#      (try_for_range, ":var0", "fac_kingdom_1", "fac_undeads"),
#        (neq, ":var0", "$wm_player_fac"),
#        (neq, ":var0", "fac_kingdoms_end"),
#        (store_relation, ":var5", "$wm_player_fac", ":var0"),
#        (call_script, "script_set_player_relation_with_faction_no_mess", ":var0", ":var5"),
#      (try_end),
#    (try_end),
#    (try_begin),
#      (is_between, "$nakepit_target_party", "p_pyongyang", "p_place_end"),
#      (store_faction_of_party, ":var7", "$nakepit_target_party"),
#      (store_relation, ":var5", ":var7", "$wm_player_fac"),
#      (lt, ":var5", 0),
#      (str_store_party_name, s7, "p_nakepit_party"),
#      (assign, "$nakepit_target_party", 0),
#      (party_set_flags, "p_nakepit_party", pf_disabled, 1),
#      (display_message, "str_workshop_enemy"),
#      (play_sound, "snd_sabotagee"),
#    (try_end),
#    (try_begin),
#      (is_between, "$brothel_target_party", "p_pyongyang", "p_place_end"),
#      (store_faction_of_party, ":var7", "$brothel_target_party"),
#      (store_relation, ":var5", ":var7", "$wm_player_fac"),
#      (lt, ":var5", 0),
#      (str_store_party_name, s7, "p_brothel_party"),
#      (assign, "$brothel_target_party", 0),
#      (party_set_flags, "p_brothel_party", pf_disabled, 1),
#      (display_message, "str_workshop_enemy"),
#      (play_sound, "snd_sabotagee"),
#    (try_end),
#    (try_begin),
#      (is_between, "$hidout_target_party", "p_pyongyang", "p_place_end"),
#      (store_faction_of_party, ":var7", "$brothel_target_party"),
#      (store_relation, ":var5", ":var7", "$wm_player_fac"),
#      (lt, ":var5", 0),
#      (str_store_party_name, s7, "p_ply_hideout"),
#      (assign, "$hidout_target_party", 0),
#      (assign, "$hideout_build_prison", 0),
#      (assign, "$hideout_build_torture", 0),
#      (party_set_flags, "p_ply_hideout", pf_disabled, 1),
#      (display_message, "str_workshop_enemy"),
#      (play_sound, "snd_sabotagee"),
#    (try_end),
#    (call_script, "script_player_faction_relation_rescan"),
#    (try_begin),
#      (eq, "$dayy_two", 1),
#      (store_random_in_range, "$glob_weather", 0, 3),
#      (try_begin),
#        (eq, "$glob_weather", 2),
#        (store_random_in_range, ":var26", 0, 2),
#        (eq, ":var26", 0),
#        (assign, "$glob_weather", 0),
#      (try_end),
#    (try_end),
#    (try_begin),
#      (eq, "$dayy_two", 1),
#      (troop_slot_ge, "trp_player", 16, 1),
#      (troop_get_slot, ":var31", "trp_player", 16),
#      (store_add, ":var32", "str_wound_0", ":var31"),
#      (str_store_string, s8, ":var32"),
#      (display_message, "str_health_status_s8"),
#    (try_end),
#    (try_begin),
#      (eq, "$dayy_three", 1),
#      (call_script, "script_bandit_party_spawn"),
#    (try_end),
#    (try_begin),
#      (eq, "$dayy_four", 1),
#      (call_script, "script_wm_wound_disease_event"),
#    (try_end),
#    (call_script, "script_lord_lady_mainland_sett"),
#    (try_begin),
#      (eq, "$dayy_four", 1),
#      (store_attribute_level, ":var33", "trp_player", 3),
#      (try_begin),
#        (gt, ":var33", 40),
#        (assign, ":var33", 40),
#      (try_end),
#      (assign, reg8, ":var33"),
#      (val_mul, ":var33", 2),
#      (assign, reg9, ":var33"),
#      (display_message, "str_charisma_train"),
#      (call_script, "script_exp_reward_for_common_troop", ":var33"),
#    (try_end),
#    (try_begin),
#      (eq, "$dayy_count", 2),
#      (gt, "$orphan_girl_troop_id", 0),
#      (lt, "$orphan_grown_count", 240),
#      (try_begin),
#        (ge, "$orphan_train_type", 23),
#        (store_skill_level, ":var34", "$orphan_train_type", "$orphan_girl_troop_id"),
#        (lt, ":var34", 9),
#        (troop_raise_skill, "$orphan_girl_troop_id", "$orphan_train_type", 1),
#      (else_try),
#        (eq, "$orphan_train_type", 1),
#        (store_attribute_level, ":var35", "$orphan_girl_troop_id", 0),
#        (lt, ":var35", 60),
#        (troop_raise_attribute, "$orphan_girl_troop_id", ca_strength, 1),
#        (troop_raise_proficiency, "$orphan_girl_troop_id", wpt_one_handed_weapon, 10),
#        (troop_raise_proficiency, "$orphan_girl_troop_id", wpt_two_handed_weapon, 10),
#        (troop_raise_proficiency, "$orphan_girl_troop_id", wpt_polearm, 10),
#      (else_try),
#        (eq, "$orphan_train_type", 2),
#        (store_attribute_level, ":var35", "$orphan_girl_troop_id", 1),
#        (lt, ":var35", 60),
#        (troop_raise_attribute, "$orphan_girl_troop_id", ca_agility, 1),
#        (troop_raise_proficiency, "$orphan_girl_troop_id", wpt_archery, 10),
#        (troop_raise_proficiency, "$orphan_girl_troop_id", wpt_crossbow, 10),
#        (troop_raise_proficiency, "$orphan_girl_troop_id", wpt_throwing, 10),
#        (troop_raise_proficiency, "$orphan_girl_troop_id", wpt_firearm, 10),
#      (else_try),
#        (eq, "$orphan_train_type", 3),
#        (store_attribute_level, ":var35", "$orphan_girl_troop_id", 3),
#        (lt, ":var35", 60),
#        (troop_raise_attribute, "$orphan_girl_troop_id", ca_charisma, 1),
#      (try_end),
#      (store_attribute_level, ":var35", "$orphan_girl_troop_id", 3),
#      (try_begin),
#        (ge, ":var35", 45),
#        (assign, "$orphan_girl_troop_id", "trp_tt_lady_orphan_05"),
#        (call_script, "script_orphan_skill_copy"),
#      (else_try),
#        (ge, ":var35", 35),
#        (assign, "$orphan_girl_troop_id", "trp_tt_lady_orphan_04"),
#        (call_script, "script_orphan_skill_copy"),
#      (else_try),
#        (ge, ":var35", 25),
#        (assign, "$orphan_girl_troop_id", "trp_tt_lady_orphan_03"),
#        (call_script, "script_orphan_skill_copy"),
#      (else_try),
#        (ge, ":var35", 15),
#        (assign, "$orphan_girl_troop_id", "trp_tt_lady_orphan_02"),
#        (call_script, "script_orphan_skill_copy"),
#      (try_end),
#      (val_add, "$orphan_grown_count", 1),
#    (try_end),
#    (try_begin),
#      (eq, "$dayy_count", 3),
#      (call_script, "script_slave_progress_try"),
#      (call_script, "script_qquest_lord_lady_sett"),
#      (try_begin),
#        (this_or_next|eq, "$trade_contract_a", 1),
#        (eq, "$trade_contract_b", 1),
#        (call_script, "script_respawn_player_traders_party"),
#      (try_end),
#      (call_script, "script_wm_party_quest_slot_sett"),
#    (try_end),
#    (try_begin),
#      (eq, "$dayy_count", 2),
#      (val_add, "$player_bath_cooltime", 1),
#      (try_begin),
#        (gt, "$player_bath_cooltime", 11),
#        (display_message, "str_player_bath_alarm", 0x00FF0000),
#        (call_script, "script_wm_troop_wound_disease_slot", "trp_player", 5),
#      (try_end),
#    (try_end),
#    (try_begin),
#      (eq, "$dayy_count", 1),
#      (call_script, "script_quest_party_spawn"),
#      (call_script, "script_quest_party_time_sett"),
#      (call_script, "script_quest_party_remove"),
#    (try_end),
#    (assign, ":var36", 0),
#    (assign, ":var37", 0),
#    (assign, ":var38", 0),
#    (assign, ":var39", 0),
#    (assign, ":var40", 0),
#    (assign, ":var41", 0),
#    (party_get_num_companion_stacks, ":var42", "p_main_party"),
#    (try_for_range, ":var43", 0, ":var42"),
#      (party_stack_get_troop_id, ":var44", "p_main_party", ":var43"),
#      (gt, ":var44", "trp_army_size_troop"),
#      (neg|troop_is_hero, ":var44"),
#      (party_stack_get_size, ":var45", "p_main_party", ":var43"),
#      (try_begin),
#        (gt, ":var45", 0),
#        (store_character_level, ":var46", ":var44"),
#        (try_begin),
#          (lt, ":var46", 18),
#          (val_add, ":var36", ":var45"),
#        (else_try),
#          (lt, ":var46", 21),
#          (val_add, ":var37", ":var45"),
#        (else_try),
#          (lt, ":var46", 25),
#          (val_add, ":var38", ":var45"),
#        (else_try),
#          (lt, ":var46", 28),
#          (val_add, ":var39", ":var45"),
#        (else_try),
#          (lt, ":var46", 30),
#          (val_add, ":var40", ":var45"),
#        (else_try),
#          (val_add, ":var41", ":var45"),
#        (try_end),
#      (try_end),
#    (try_end),
#    (store_add, ":var47", ":var40", ":var41"),
#    (store_add, ":var48", ":var47", ":var39"),
#    (try_begin),
#      (gt, ":var41", 20),
#      (store_sub, ":var49", ":var41", 20),
#      (call_script, "script_troop_recount_sett", ":var49", 1, 30, 1000),
#    (else_try),
#      (gt, ":var47", 40),
#      (store_sub, ":var49", ":var47", 40),
#      (call_script, "script_troop_recount_sett", ":var49", 1, 28, 30),
#    (else_try),
#      (gt, ":var48", 60),
#    (try_end),
#    (call_script, "script_lord_slot_troop_leader_state_fix"),
#    (try_begin),
#      (eq, "$dayy_count", 1),
#      (party_set_flags, "p_tournament_flag_1", pf_disabled, 1),
#      (party_set_flags, "p_tournament_flag_2", pf_disabled, 1),
#      (party_set_flags, "p_tournament_flag_3", pf_disabled, 1),
#      (party_set_flags, "p_tournament_flag_4", pf_disabled, 1),
#      (party_set_flags, "p_tournament_flag_5", pf_disabled, 1),
#      (party_set_flags, "p_tournament_flag_6", pf_disabled, 1),
#      (party_set_flags, "p_tournament_flag_7", pf_disabled, 1),
#      (party_set_flags, "p_tournament_flag_8", pf_disabled, 1),
#    (try_end),
#    (try_begin),
#      (eq, "$dayy_count", 2),
#      (store_random_in_range, "$tournament_place_1", "p_pyongyang", "p_place_end"),
#      (party_set_slot, "$tournament_place_1", 52, 1),
#      (party_relocate_near_party, "p_tournament_flag_1", "$tournament_place_1", 0),
#      (party_set_flags, "p_tournament_flag_1", pf_disabled, 0),
#      (party_set_icon, "p_tournament_flag_1", "icon_tournament_flag"),
#      (store_random_in_range, "$tournament_place_2", "p_pyongyang", "p_place_end"),
#      (party_set_slot, "$tournament_place_2", 52, 1),
#      (party_relocate_near_party, "p_tournament_flag_2", "$tournament_place_2", 0),
#      (party_set_flags, "p_tournament_flag_2", pf_disabled, 0),
#      (party_set_icon, "p_tournament_flag_2", "icon_tournament_flag"),
#      (store_random_in_range, "$tournament_place_3", "p_pyongyang", "p_place_end"),
#      (party_set_slot, "$tournament_place_3", 52, 1),
#      (party_relocate_near_party, "p_tournament_flag_3", "$tournament_place_3", 0),
#      (party_set_flags, "p_tournament_flag_3", pf_disabled, 0),
#      (party_set_icon, "p_tournament_flag_3", "icon_tournament_flag"),
#      (store_random_in_range, "$tournament_place_4", "p_pyongyang", "p_place_end"),
#      (party_set_slot, "$tournament_place_4", 52, 1),
#      (party_relocate_near_party, "p_tournament_flag_4", "$tournament_place_4", 0),
#      (party_set_flags, "p_tournament_flag_4", pf_disabled, 0),
#      (party_set_icon, "p_tournament_flag_4", "icon_tournament_flag"),
#      (store_random_in_range, "$tournament_place_5", "p_pyongyang", "p_place_end"),
#      (party_set_slot, "$tournament_place_5", 52, 1),
#      (party_relocate_near_party, "p_tournament_flag_5", "$tournament_place_5", 0),
#      (party_set_flags, "p_tournament_flag_5", pf_disabled, 0),
#      (party_set_icon, "p_tournament_flag_5", "icon_tournament_flag"),
#      (store_random_in_range, "$tournament_place_6", "p_pyongyang", "p_place_end"),
#      (party_set_slot, "$tournament_place_6", 52, 1),
#      (party_relocate_near_party, "p_tournament_flag_6", "$tournament_place_6", 0),
#      (party_set_flags, "p_tournament_flag_6", pf_disabled, 0),
#      (party_set_icon, "p_tournament_flag_6", "icon_tournament_flag"),
#      (store_random_in_range, "$tournament_place_7", "p_pyongyang", "p_place_end"),
#      (party_set_slot, "$tournament_place_7", 52, 1),
#      (party_relocate_near_party, "p_tournament_flag_7", "$tournament_place_7", 0),
#      (party_set_flags, "p_tournament_flag_7", pf_disabled, 0),
#      (party_set_icon, "p_tournament_flag_7", "icon_tournament_flag"),
#      (store_random_in_range, "$tournament_place_8", "p_pyongyang", "p_place_end"),
#      (party_set_slot, "$tournament_place_8", 52, 1),
#      (party_relocate_near_party, "p_tournament_flag_8", "$tournament_place_8", 0),
#      (party_set_flags, "p_tournament_flag_8", pf_disabled, 0),
#      (party_set_icon, "p_tournament_flag_8", "icon_tournament_flag"),
#    (try_end),
    (store_random_in_range, ":var15", 0, 2), #0, 2 = default
    (try_begin), #Fief-related disease
      (eq, ":var15", 0),
      (try_begin),
        (eq, "$dayy_count", 1),
        (call_script, "script_disaster_rand_execute", 11),
		#(display_message, "@TESTING THE DISEASES!", 0x0032CD32), #TESTING THE DISEASES
      (else_try),
        (eq, "$dayy_count", 2),
        (call_script, "script_disaster_rand_execute", 1),
		#(display_message, "@TESTING THE DISEASES!", 0x0032CD32), #TESTING THE DISEASES
      (else_try),
        (eq, "$dayy_count", 3),
        (call_script, "script_disaster_rand_execute", 2),
		#(display_message, "@TESTING THE DISEASES!", 0x0032CD32), #TESTING THE DISEASES
      (else_try),
        (eq, "$dayy_count", 4),
        (call_script, "script_disaster_rand_execute", 3),
		#(display_message, "@TESTING THE DISEASES!", 0x0032CD32), #TESTING THE DISEASES
      (else_try),
        (eq, "$dayy_count", 5),
        (call_script, "script_disaster_rand_execute", 4),
		#(display_message, "@TESTING THE DISEASES!", 0x0032CD32), #TESTING THE DISEASES
      (else_try),
        (eq, "$dayy_count", 6),
        (call_script, "script_disaster_rand_execute", 8),
		#(display_message, "@TESTING THE DISEASES!", 0x0032CD32), #TESTING THE DISEASES
      (else_try),
        (eq, "$dayy_count", 7),
        (call_script, "script_disaster_rand_execute", 10),
		#(display_message, "@TESTING THE DISEASES!", 0x0032CD32), #TESTING THE DISEASES
      (try_end),
    (try_end),
#    (call_script, "script_caravan_party_spawn"),
#    (try_begin),
#      (eq, "$dayy_count", 4),
#      (call_script, "script_wm_comp_separate", "$wm_comp_id_standby"),
#      (call_script, "script_resilience_progress"),
#    (try_end),
#    (try_begin),
#      (eq, "$g_sex_officer", "trp_player"),
#      (store_party_size_wo_prisoners, ":var50", "p_main_party"),
#      (gt, ":var50", 1),
#      (val_sub, ":var50", 1),
#      (try_begin),
#        (gt, ":var50", 20),
#        (store_random_in_range, ":var50", 10, 21),
#      (try_end),
#      (val_add, "$Sex_num", ":var50"),
#    (try_end),
#    (try_begin),
#      (eq, "$dayy_count", 5),
#      (assign, ":var51", 0),
#      (assign, ":var52", 0),
#      (try_begin),
#        (gt, "$wm_comp_id_1", 0),
#        (store_character_level, ":var46", "$wm_comp_id_1"),
#        (val_add, ":var52", ":var46"),
#      (try_end),
#      (try_begin),
#        (gt, "$wm_comp_id_2", 0),
#        (store_character_level, ":var46", "$wm_comp_id_2"),
#        (val_add, ":var52", ":var46"),
#      (try_end),
#      (try_begin),
#        (gt, "$wm_comp_id_3", 0),
#        (store_character_level, ":var46", "$wm_comp_id_3"),
#        (val_add, ":var52", ":var46"),
#      (try_end),
#      (try_begin),
#        (gt, "$wm_comp_id_4", 0),
#        (store_character_level, ":var46", "$wm_comp_id_4"),
#        (val_add, ":var52", ":var46"),
#      (try_end),
#      (try_begin),
#        (gt, "$wm_comp_id_5", 0),
#        (store_character_level, ":var46", "$wm_comp_id_5"),
#        (val_add, ":var52", ":var46"),
#      (try_end),
#      (val_mul, ":var52", 10),
#      (val_add, ":var51", ":var52"),
#      (assign, ":var53", 0),
#      (try_for_range, ":var54", "trp_elite_troops_01", "trp_elite_troops_end"),
#        (troop_slot_eq, ":var54", 35, 1),
#        (store_character_level, ":var46", ":var54"),
#        (val_mul, ":var46", 7),
#        (val_add, ":var53", ":var46"),
#      (try_end),
#      (val_add, ":var51", ":var53"),
#      (store_party_size_wo_prisoners, ":var55", "p_main_party"),
#      (val_sub, ":var55", 1),
#      (try_begin),
#        (is_between, "$contract_fac", "fac_kingdom_1", "fac_kingdoms_end"),
#        (eq, "$r_player_class", 0),
#        (assign, ":var55", 0),
#      (else_try),
#        (is_between, "$contract_fac", "fac_kingdom_1", "fac_kingdoms_end"),
#        (ge, ":var55", 500),
#        (val_div, ":var55", 4),
#      (else_try),
#        (lt, ":var55", 500),
#        (assign, ":var55", 0),
#      (else_try),
#        (gt, ":var55", 3),
#        (val_div, ":var55", 3),
#      (try_end),
#      (val_add, ":var51", ":var55"),
#      (assign, ":var56", 0),
#      (try_begin),
#        (is_between, "$ply_staying_party_no", "p_pyongyang", "p_place_end"),
#        (gt, "$ply_staying_army_size", 3),
#        (store_div, ":var56", "$ply_staying_army_size", 3),
#      (try_end),
#      (val_add, ":var51", ":var56"),
#      (assign, ":var57", 0),
#      (party_get_num_companion_stacks, ":var42", "p_main_party"),
#      (try_for_range, ":var43", 0, ":var42"),
#        (party_stack_get_troop_id, ":var44", "p_main_party", ":var43"),
#        (gt, ":var44", "trp_army_size_troop"),
#        (neg|troop_is_hero, ":var44"),
#        (party_stack_get_size, ":var45", "p_main_party", ":var43"),
#        (try_begin),
#          (gt, ":var45", 0),
#          (store_character_level, ":var46", ":var44"),
#          (store_sub, ":var27", ":var46", 10),
#          (try_begin),
#            (ge, ":var46", 25),
#            (troop_is_guarantee_horse, ":var44"),
#            (val_mul, ":var27", 3),
#          (try_end),
#          (val_add, ":var57", ":var27"),
#        (try_end),
#      (try_end),
#      (store_party_size_wo_prisoners, ":var50", "p_main_party"),
#      (try_begin),
#        (le, ":var50", 300),
#        (ge, ":var57", 2),
#        (val_div, ":var57", 2),
#      (try_end),
#      (try_begin),
#        (is_between, "$contract_fac", "fac_kingdom_1", "fac_kingdoms_end"),
#        (eq, "$r_player_class", 0),
#        (assign, ":var57", 0),
#      (else_try),
#        (is_between, "$contract_fac", "fac_kingdom_1", "fac_kingdoms_end"),
#        (ge, ":var57", 2),
#        (val_div, ":var57", 2),
#      (try_end),
#      (val_add, ":var51", ":var57"),
#      (try_begin),
#        (gt, "$policy_frugal", 0),
#        (le, "$policy_frugal", 5),
#        (store_mul, ":var58", "$policy_frugal", 5),
#        (store_sub, ":var59", 100, ":var58"),
#        (set_show_messages, 0),
#        (val_mul, ":var51", ":var59"),
#        (val_div, ":var51", 100),
#        (set_show_messages, 1),
#      (try_end),
#      (assign, ":var60", 0),
#      (try_begin),
#        (call_script, "script_ship_wage_counting", "$m_ship_type_1"),
#        (val_add, ":var60", "$temp"),
#        (call_script, "script_ship_wage_counting", "$m_ship_type_2"),
#        (val_add, ":var60", "$temp"),
#        (call_script, "script_ship_wage_counting", "$m_ship_type_3"),
#        (val_add, ":var60", "$temp"),
#        (call_script, "script_ship_wage_counting", "$m_ship_type_4"),
#        (val_add, ":var60", "$temp"),
#        (call_script, "script_ship_wage_counting", "$m_ship_type_5"),
#        (val_add, ":var60", "$temp"),
#      (try_end),
#      (try_begin),
#        (gt, ":var60", 3),
#        (store_party_size_wo_prisoners, ":var61", "p_main_party"),
#        (lt, ":var61", 200),
#        (val_div, ":var60", 3),
#      (try_end),
#      (try_begin),
#        (eq, "$pirate_king", 1),
#        (gt, ":var60", 3),
#        (val_div, ":var60", 3),
#      (try_end),
#      (try_begin),
#        (gt, "$policy_ship_manage", 0),
#        (le, "$policy_ship_manage", 5),
#        (store_mul, ":var58", "$policy_ship_manage", 6),
#        (store_sub, ":var59", 100, ":var58"),
#        (set_show_messages, 0),
#        (val_mul, ":var60", ":var59"),
#        (val_div, ":var60", 100),
#        (set_show_messages, 1),
#      (try_end),
#      (val_add, ":var51", ":var60"),
#      (troop_get_slot, ":var62", "trp_player", 42),
#      (try_begin),
#        (neq, ":var62", "p_main_party"),
#        (neg|is_between, ":var62", "p_temp_party", "p_reserved_5"),
#        (neq, ":var62", "p_reserved_5"),
#        (party_is_active, ":var62"),
#        (party_slot_eq, ":var62", 0, 5),
#        (val_add, ":var51", 500),
#      (try_end),
#      (troop_get_slot, ":var62", "trp_player", 43),
#      (try_begin),
#        (neq, ":var62", "p_main_party"),
#        (neg|is_between, ":var62", "p_temp_party", "p_reserved_5"),
#        (neq, ":var62", "p_reserved_5"),
#        (party_is_active, ":var62"),
#        (party_slot_eq, ":var62", 0, 5),
#        (val_add, ":var51", 500),
#      (try_end),
#      (try_begin),
#        (gt, "$workshop_slave", 50),
#        (val_add, ":var51", "$workshop_slave"),
#      (try_end),
#      (try_begin),
#        (call_script, "script_party_money_level_ge", "p_main_party", ":var51"),
#        (neq, "$wm_mo_continue", 1),
#        (call_script, "script_party_army_size_execute", "p_main_party", 90, 3),
#        (call_script, "script_moral_level_diff", "p_main_party", -10),
#        (display_message, "str_nomoney", 0x00FF0000),
#      (try_end),
#      (display_message, "str_ala_payday", 0x00FFFF00),
#      (call_script, "script_party_money_level_diff", "p_main_party", ":var51", 34),
#    (try_end),
#    (try_begin),
#      (gt, "$need_meeting_loose", 0),
#      (val_sub, "$need_meeting_loose", 1),
#      (display_message, "str_ala_meeting", 0x00FFFF00),
#    (try_end),
#    (try_begin),
#      (gt, "$need_meeting_for_ai", 0),
#      (le, "$need_meeting_loose", 0),
#      (store_random_in_range, ":var63", 0, 10),
#      (try_begin),
#        (try_begin),
#          (eq, "$opinion_suggester", 4),
#          (val_add, ":var63", 2),
#        (try_end),
#        (try_begin),
#          (eq, "$need_meeting_for_ai", 11),
#          (ge, ":var63", 3),
#          (call_script, "script_wm_fac_relation_set", "$wm_player_fac", "$sugester_faction", -10),
#          (faction_set_slot, "$wm_player_fac", 4, "$declare_war_term"),
#        (else_try),
#          (ge, ":var63", 3),
#          (this_or_next|eq, "$need_meeting_for_ai", 12),
#          (eq, "$need_meeting_for_ai", 2),
#          (call_script, "script_wm_fac_relation_set", "$wm_player_fac", "$sugester_faction", 10),
#        (else_try),
#          (ge, ":var63", 5),
#          (this_or_next|eq, "$need_meeting_for_ai", 13),
#          (eq, "$need_meeting_for_ai", 3),
#          (call_script, "script_wm_fac_relation_set", "$wm_player_fac", "$sugester_faction", 30),
#        (else_try),
#          (ge, ":var63", 5),
#          (this_or_next|eq, "$need_meeting_for_ai", 14),
#          (eq, "$need_meeting_for_ai", 4),
#          (call_script, "script_wm_fac_relation_set", "$wm_player_fac", "$sugester_faction", 90),
#        (else_try),
#          (eq, "$need_meeting_for_ai", 15),
#          (ge, ":var63", 3),
#          (call_script, "script_temporary_policy_excute", 1, "$wm_player_fac"),
#        (else_try),
#          (eq, "$need_meeting_for_ai", 16),
#          (ge, ":var63", 3),
#          (call_script, "script_temporary_policy_excute", 2, "$wm_player_fac"),
#        (else_try),
#          (eq, "$need_meeting_for_ai", 17),
#          (ge, ":var63", 3),
#          (call_script, "script_temporary_policy_excute", 3, "$wm_player_fac"),
#        (try_end),
#      (try_end),
#      (assign, "$need_meeting_for_ai", 0),
#      (assign, "$sugester_faction", 0),
#      (assign, "$need_meeting_loose", 0),
#      (display_message, "str_ala_meet_cancel", 0x00FFFF00),
#    (try_end),
#    (try_begin),
#      (gt, "$ruin_qst_target_num", 0),
#      (gt, "$ruin_qst_remain_turn", 0),
#      (neg|party_slot_ge, "$ruin_qst_target_num", 3, 3),
#      (val_sub, "$ruin_qst_remain_turn", 1),
#      (assign, reg8, "$ruin_qst_remain_turn"),
#      (str_store_party_name, s11, "$ruin_qst_target_num"),
#      (store_sub, ":var31", "$ruin_qst_target_num", "p_ruin_1"),
#      (store_add, ":var32", "str_r_clue_001", ":var31"),
#      (str_store_string, s12, ":var32"),
#      (str_store_party_name, s13, "$ruin_qst_giver_loc"),
#      (display_message, "str_ruin_quest_mess", 0x00FFFFFF),
#    (else_try),
#      (gt, "$ruin_qst_target_num", 0),
#      (le, "$ruin_qst_remain_turn", 0),
#      (str_store_party_name, s11, "$ruin_qst_giver_loc"),
#      (display_message, "str_fail_rep", 0x00FFFFFF),
#    (else_try),
#      (gt, "$ruin_qst_target_num", 0),
#      (party_slot_ge, "$ruin_qst_target_num", 3, 3),
#      (str_store_party_name, s11, "$ruin_qst_giver_loc"),
#      (display_message, "str_succ_rep", 0x00FFFFFF),
#    (try_end),
#    (assign, "$wm_try_duel", 0),
#    (assign, "$wm_steal_try", 0),
#    (call_script, "script_rand_glob_dice"),
#    (party_set_morale, "p_main_party", 100),
#    (try_begin),
#      (is_between, "$ply_staying_party_no", "p_pyongyang", "p_place_end"),
#      (store_party_size_wo_prisoners, ":var50", "p_main_party"),
#      (store_faction_of_party, ":var4", "$ply_staying_party_no"),
#      (store_relation, ":var10", "$wm_player_fac", ":var4"),
#      (this_or_next|lt, ":var10", 0),
#      (gt, ":var50", 300),
#      (assign, "$ply_staying_party_no", 0),
#      (assign, "$ply_staying_army_size", 0),
#      (assign, "$ply_staying_army_recruit_on", 0),
#      (display_message, "str_t_armystay_disband_enemy", 0x00FF0000),
#    (else_try),
#      (neg|is_between, "$ply_staying_party_no", "p_pyongyang", "p_place_end"),
#      (assign, "$ply_staying_party_no", 0),
#      (assign, "$ply_staying_army_size", 0),
#      (assign, "$ply_staying_army_recruit_on", 0),
#    (try_end),
#    (call_script, "script_init_main_party_core_slot"),
#    (call_script, "script_paohu_r18_control"),
  ]),
  
  			(0.0, 0.0, 168.0,
		[
		(eq, "$notify_official", 1),
		],

		[
		(call_script, "script_version_check"),
		]),
]